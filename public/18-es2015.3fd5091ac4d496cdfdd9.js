(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"8auw":function(o,e,t){"use strict";t.r(e),t.d(e,"RoomPageModule",function(){return S});var n=t("ofXK"),i=t("3Pt+"),r=t("TEn/"),c=t("tyNb"),s=t("mrSG"),b=t("mgGq"),a=t("fXoL"),l=t("d6tv"),m=t("l7P3"),d=t("hlQ1");let u=(()=>{class o extends d.d{constructor(o){super("Room",o)}formFieldOptions(o){return this.formFieldsOptions.get(o)}get formFieldsOptions(){return new Map([["price",{title:"Update price",subTitle:"Price",iconName:"business-outline",inputLable:"input price",inputType:"text",errors:new Map([["required","Required value"],["pattern","Entered wrong symbol"]]),formControl:{formState:"",validatorOrOpts:{updateOn:"change",validators:[i.o.pattern("[0-9]*"),i.o.required]}}}],["name",{title:"Update room",subTitle:"Name",iconName:"cash-outline",inputLable:"input room name",inputType:"text",errors:new Map([["required","Required value"],["pattern","Entered wrong symbol"],["minlength","Too short"],["maxlength","Too long"]]),formControl:{formState:"",validatorOrOpts:{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9\u0430-\u044f\u0410-\u042f\u0456\u0406\u0457\u0407\u0454\u0404_@#$%\u2116 '\"\\-]*$"),i.o.minLength(2),i.o.maxLength(60),i.o.required]}}}]])}}return o.\u0275fac=function(e){return new(e||o)(a.Rb(d.e))},o.\u0275prov=a.Eb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const p=["addRoomFormDirective"];function f(o,e){1&o&&a.Jb(0,"ion-progress-bar",18)}function h(o,e){if(1&o&&(a.Nb(0,"ion-text",19),a.mc(1),a.Yb(2,"json"),a.Mb()),2&o){const o=a.Xb(2);a.yb(1),a.oc(" ",a.Zb(2,1,o.addRoomForm.get("name").errors)," ")}}function N(o,e){if(1&o&&(a.Nb(0,"ion-text",19),a.mc(1),a.Yb(2,"json"),a.Mb()),2&o){const o=a.Xb(2);a.yb(1),a.oc(" ",a.Zb(2,1,o.addRoomForm.get("price").errors)," ")}}function M(o,e){if(1&o){const o=a.Ob();a.Nb(0,"form",3,4),a.Nb(2,"ion-grid"),a.Nb(3,"ion-row"),a.Nb(4,"ion-col",5),a.Nb(5,"ion-card"),a.Nb(6,"ion-card-header"),a.Nb(7,"ion-card-title",6),a.mc(8,"Add room"),a.Mb(),a.lc(9,f,1,0,"ion-progress-bar",7),a.Yb(10,"async"),a.Mb(),a.Nb(11,"ion-card-content"),a.Nb(12,"ion-list"),a.Nb(13,"ion-item"),a.Jb(14,"ion-icon",8),a.Nb(15,"ion-label",9),a.mc(16,"Name"),a.Mb(),a.Jb(17,"ion-input",10),a.Mb(),a.lc(18,h,3,3,"ion-text",11),a.Nb(19,"ion-item"),a.Jb(20,"ion-icon",12),a.Nb(21,"ion-label",9),a.mc(22,"Price"),a.Mb(),a.Jb(23,"ion-input",13),a.Mb(),a.lc(24,N,3,3,"ion-text",11),a.Mb(),a.Mb(),a.Mb(),a.Nb(25,"ion-row"),a.Nb(26,"ion-col",14),a.Nb(27,"ion-button",15),a.Vb("click",function(){return a.ic(o),a.Xb().dismiss()}),a.mc(28,"Cancel"),a.Mb(),a.Mb(),a.Nb(29,"ion-col",16),a.Nb(30,"ion-button",17),a.Vb("click",function(){return a.ic(o),a.Xb().onSignup()}),a.mc(31," Add "),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb()}if(2&o){const o=a.Xb();a.dc("formGroup",o.addRoomForm),a.yb(9),a.dc("ngIf",a.Zb(10,5,o.loading$)),a.yb(9),a.dc("ngIf",o.addRoomForm.get("name").touched&&o.addRoomForm.get("name").errors),a.yb(6),a.dc("ngIf",o.addRoomForm.get("price").touched&&o.addRoomForm.get("price").errors),a.yb(6),a.dc("disabled","INVALID"===o.addRoomForm.status||"PENDING"===o.addRoomForm.status)}}let g=(()=>{class o{constructor(o,e,t,n){this.modalController=o,this.userService=e,this.store=t,this.roomService=n}ngOnInit(){this.loading$=this.roomService.loading$,this.addRoomForm=new i.e({name:new i.c(this.roomService.formFieldOptions("name").formControl.formState,this.roomService.formFieldOptions("name").formControl.validatorOrOpts,this.roomService.formFieldOptions("name").formControl.asyncValidator),price:new i.c(this.roomService.formFieldOptions("price").formControl.formState,this.roomService.formFieldOptions("price").formControl.validatorOrOpts,this.roomService.formFieldOptions("price").formControl.asyncValidator)})}dismiss(o){this.modalController.dismiss(o)}onSignup(){this.dismiss({name:this.addRoomForm.get("name").value,price:this.addRoomForm.get("price").value}),this.resetForm()}resetForm(){this.addRoomFormDirective&&this.addRoomFormDirective.resetForm()}}return o.\u0275fac=function(e){return new(e||o)(a.Ib(r.X),a.Ib(l.a),a.Ib(m.i),a.Ib(u))},o.\u0275cmp=a.Cb({type:o,selectors:[["app-room-add"]],viewQuery:function(o,e){var t;1&o&&a.qc(p,!0),2&o&&a.gc(t=a.Wb())&&(e.addRoomFormDirective=t.first)},inputs:{company:"company"},decls:9,vars:1,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["addRoomFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["type","indeterminate","color","primary",4,"ngIf"],["name","business-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","name"],["class","input-error","color","danger",4,"ngIf"],["name","cash-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","price"],["size","8"],["expand","block","fill","outline",3,"click"],["size","4"],["expand","block",3,"disabled","click"],["type","indeterminate","color","primary"],["color","danger",1,"input-error"]],template:function(o,e){1&o&&(a.Nb(0,"ion-header"),a.Nb(1,"ion-toolbar"),a.Nb(2,"ion-title"),a.mc(3,"Add room"),a.Mb(),a.Nb(4,"ion-buttons",0),a.Nb(5,"ion-button",1),a.Vb("click",function(){return e.dismiss()}),a.mc(6,"close"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(7,"ion-content"),a.lc(8,M,32,7,"form",2),a.Mb()),2&o&&(a.yb(8),a.dc("ngIf",e.addRoomForm))},directives:[r.q,r.T,r.R,r.g,r.f,r.n,n.n,i.p,i.l,i.f,r.p,r.J,r.m,r.h,r.j,r.l,r.i,r.A,r.t,r.r,r.z,r.s,r.db,i.k,i.d,r.G,r.Q],pipes:[n.b,n.g],styles:[""]}),o})();var y=t("vtsq");function v(o,e){1&o&&(a.Lb(0),a.mc(1," Loading.."),a.Kb())}function F(o,e){if(1&o){const o=a.Ob();a.Lb(0),a.Nb(1,"ion-item-sliding"),a.Nb(2,"ion-item"),a.Nb(3,"ion-label"),a.Nb(4,"ion-row"),a.Nb(5,"ion-col",7),a.Nb(6,"ion-item",8),a.Nb(7,"ion-label"),a.Nb(8,"h4"),a.mc(9,"Room name:"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(10,"ion-col",9),a.Nb(11,"ion-item",8),a.Nb(12,"ion-label"),a.Nb(13,"ion-text",10),a.mc(14),a.Mb(),a.Mb(),a.Nb(15,"ion-button",5),a.Vb("click",function(){a.ic(o);const t=e.$implicit;return a.Xb().update(t._id,"name")}),a.mc(16," Update "),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(17,"ion-row"),a.Nb(18,"ion-col",7),a.Nb(19,"ion-item",8),a.Nb(20,"ion-label"),a.Nb(21,"h4"),a.mc(22,"Price:"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(23,"ion-col",9),a.Nb(24,"ion-item",8),a.Nb(25,"ion-label"),a.Nb(26,"ion-text",10),a.mc(27),a.Mb(),a.Mb(),a.Nb(28,"ion-button",5),a.Vb("click",function(){a.ic(o);const t=e.$implicit;return a.Xb().update(t._id,"price")}),a.mc(29," Update "),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(30,"ion-item-options",11),a.Nb(31,"ion-item-option",12),a.Vb("click",function(){a.ic(o);const t=e.$implicit;return a.Xb().presentAlert(t._id,t.name)}),a.Jb(32,"ion-icon",13),a.Mb(),a.Mb(),a.Mb(),a.Kb()}if(2&o){const o=e.$implicit;a.yb(14),a.oc(" ",o.name," "),a.yb(13),a.oc(" ",o.price," ")}}const O=[{path:"",component:(()=>{class o{constructor(o,e,t,n){this.roomService=o,this.store=e,this.modalController=t,this.alertController=n,this.user=null,this.company=null}ngOnInit(){this.store.select(b.a).subscribe(o=>{o&&(this.company=o,this.roomService.getAll())}),this.store.select(b.b).subscribe(o=>{o&&(this.user=o)}),this.loading$=this.roomService.loading$,this.roomService.entities$.subscribe(o=>this.rooms=o)}presentAlert(o,e){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Delete",subHeader:"room: "+e,message:"Are you shure?",buttons:[{text:"Cancel",role:"cancel",handler:o=>{console.log("Confirm Cancel: blah")}},{text:"Okay",handler:()=>this.remove(o)}]});yield t.present()})}presentModal(o,e){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:o,componentProps:e});return yield t.present(),yield t.onWillDismiss()})}update(o,e){return Object(s.a)(this,void 0,void 0,function*(){const{data:t}=yield this.presentModal(y.a,{data:this.roomService.formFieldOptions(e)});t&&this.roomService.update({_id:o,[e]:t}).subscribe(o=>console.log("update result",o),o=>console.log("update error",o))})}add(){return Object(s.a)(this,void 0,void 0,function*(){const{data:o}=yield this.presentModal(g,{company:this.company});o&&this.roomService.add(o).subscribe(o=>console.log("add result",o),o=>console.log("add error",o))})}remove(o){return this.roomService.delete(o)}}return o.\u0275fac=function(e){return new(e||o)(a.Ib(u),a.Ib(m.i),a.Ib(r.X),a.Ib(r.a))},o.\u0275cmp=a.Cb({type:o,selectors:[["app-room"]],decls:24,vars:5,consts:[[4,"ngIf"],["slot","end"],["menu","dashboard-menu"],["size-md","6","offset-md","3"],[1,"ion-text-center"],[3,"click"],[4,"ngFor","ngForOf"],["size","4",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],["color","primary"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(o,e){1&o&&(a.Nb(0,"ion-header"),a.Nb(1,"ion-toolbar"),a.Nb(2,"ion-title"),a.mc(3,"Room "),a.lc(4,v,2,0,"ng-container",0),a.Yb(5,"async"),a.Mb(),a.Nb(6,"ion-buttons",1),a.Jb(7,"ion-menu-button",2),a.Mb(),a.Mb(),a.Mb(),a.Nb(8,"ion-content"),a.Nb(9,"ion-grid"),a.Nb(10,"ion-row"),a.Nb(11,"ion-col",3),a.Nb(12,"h2",4),a.mc(13),a.Mb(),a.Nb(14,"ion-list"),a.Nb(15,"ion-list-header"),a.Nb(16,"ion-label"),a.Nb(17,"h2"),a.mc(18,"Rooms"),a.Mb(),a.Nb(19,"ion-note",1),a.mc(20," slide to delete "),a.Mb(),a.Mb(),a.Nb(21,"ion-button",5),a.Vb("click",function(){return e.add()}),a.mc(22,"New room"),a.Mb(),a.Mb(),a.lc(23,F,33,2,"ng-container",6),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb()),2&o&&(a.yb(4),a.dc("ngIf",a.Zb(5,3,e.loading$)),a.yb(9),a.nc(null==e.company?null:e.company.companyName),a.yb(10),a.dc("ngForOf",e.rooms))},directives:[r.q,r.T,r.R,n.n,r.g,r.D,r.n,r.p,r.J,r.m,r.A,r.B,r.z,r.F,r.f,n.m,r.y,r.t,r.Q,r.x,r.w,r.r],pipes:[n.b],styles:[""]}),o})()}];let w=(()=>{class o{}return o.\u0275mod=a.Gb({type:o}),o.\u0275inj=a.Fb({factory:function(e){return new(e||o)},imports:[[c.k.forChild(O)],c.k]}),o})();var R=t("FpXt");let S=(()=>{class o{}return o.\u0275mod=a.Gb({type:o}),o.\u0275inj=a.Fb({factory:function(e){return new(e||o)},imports:[[n.c,i.h,i.n,r.U,w,R.a]]}),o})()}}]);