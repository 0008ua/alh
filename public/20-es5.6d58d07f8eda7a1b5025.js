!function(){function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function o(n,o){for(var t=0;t<o.length;t++){var e=o[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function t(n,t,e){return t&&o(n.prototype,t),e&&o(n,e),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"M/w1":function(o,e,i){"use strict";i.r(e),i.d(e,"LoginFormPageModule",function(){return H});var r=i("ofXK"),a=i("3Pt+"),s=i("TEn/"),c=i("tyNb"),b=i("mYIz"),u=i("fXoL"),l=i("d6tv"),m=i("l7P3"),p=i("sYmb"),g=i("1UXS"),d=["loginFormDirective"];function f(n,o){if(1&n&&(u.Nb(0,"ion-text",19),u.nc(1),u.Yb(2,"translate"),u.Mb()),2&n){var t=o.$implicit;u.yb(1),u.pc(" ",u.Zb(2,1,"errors."+t)," ")}}function y(n,o){if(1&n&&(u.Lb(0),u.mc(1,f,3,3,"ion-text",18),u.Yb(2,"errorExtractor"),u.Kb()),2&n){var t=u.Xb();u.yb(1),u.dc("ngForOf",u.Zb(2,1,t.loginForm.get("login").errors))}}function h(n,o){if(1&n&&(u.Nb(0,"ion-text",19),u.nc(1),u.Yb(2,"translate"),u.Mb()),2&n){var t=o.$implicit;u.yb(1),u.pc(" ",u.Zb(2,1,"errors."+t)," ")}}function N(n,o){if(1&n&&(u.Lb(0),u.mc(1,h,3,3,"ion-text",18),u.Yb(2,"errorExtractor"),u.Kb()),2&n){var t=u.Xb();u.yb(1),u.dc("ngForOf",u.Zb(2,1,t.loginForm.get("password").errors))}}var v,w=((v=function(){function o(t,e,i,r){n(this,o),this.userService=t,this.router=e,this.store=i,this.translate=r,this.inputType="password"}return t(o,[{key:"ngOnInit",value:function(){this.lang=this.translate.currentLang,this.loginForm=new a.e({login:new a.c("",{updateOn:"change",validators:[a.o.required]}),password:new a.c("",{updateOn:"change",validators:[a.o.required]})})}},{key:"switchInputType",value:function(){this.inputType="password"===this.inputType?"text":"password"}},{key:"onLogin",value:function(){var n={login:this.loginForm.get("login").value,password:this.loginForm.get("password").value};this.store.dispatch(new b.j({user:n})),this.resetForm()}},{key:"resetForm",value:function(){this.loginFormDirective&&this.loginFormDirective.resetForm()}},{key:"switchLanguage",value:function(){this.lang="en"===this.lang?"uk":"en",this.translate.use(this.lang)}}]),o}()).\u0275fac=function(n){return new(n||v)(u.Ib(l.a),u.Ib(c.g),u.Ib(m.i),u.Ib(p.d))},v.\u0275cmp=u.Cb({type:v,selectors:[["app-login-form"]],viewQuery:function(n,o){var t;1&n&&u.rc(d,!0),2&n&&u.hc(t=u.Wb())&&(o.loginFormDirective=t.first)},decls:53,vars:27,consts:[["slot","end"],["color","primary","button","","lines","none",3,"click"],["name","earth-outline","slot","start"],[3,"formGroup"],["loginFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["src","/assets/banner.svg",1,"logo_login"],["button","","color","primary","routerLink","/user/login/signup"],["name","person-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","login"],[4,"ngIf"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["expand","block",3,"disabled","click"],["class","input-error","color","danger",4,"ngFor","ngForOf"],["color","danger",1,"input-error"]],template:function(n,o){1&n&&(u.Nb(0,"ion-header"),u.Nb(1,"ion-toolbar"),u.Nb(2,"ion-title"),u.nc(3),u.Yb(4,"translate"),u.Mb(),u.Nb(5,"ion-buttons",0),u.Nb(6,"ion-item",1),u.Vb("click",function(){return o.switchLanguage()}),u.Jb(7,"ion-icon",2),u.Nb(8,"ion-label"),u.nc(9),u.Yb(10,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(11,"ion-content"),u.Nb(12,"form",3,4),u.Nb(14,"ion-grid"),u.Nb(15,"ion-row"),u.Nb(16,"ion-col",5),u.Nb(17,"div",6),u.Nb(18,"h1"),u.nc(19,"The Little Hotel"),u.Mb(),u.Mb(),u.Nb(20,"ion-card"),u.Nb(21,"ion-card-header"),u.Nb(22,"div"),u.Jb(23,"img",7),u.Mb(),u.Nb(24,"ion-card-title",6),u.nc(25),u.Yb(26,"translate"),u.Mb(),u.Nb(27,"ion-card-subtitle",6),u.Nb(28,"a",8),u.nc(29),u.Yb(30,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Nb(31,"ion-card-content"),u.Nb(32,"ion-list"),u.Nb(33,"ion-item"),u.Jb(34,"ion-icon",9),u.Nb(35,"ion-label",10),u.nc(36),u.Yb(37,"translate"),u.Mb(),u.Jb(38,"ion-input",11),u.Mb(),u.mc(39,y,3,3,"ng-container",12),u.Nb(40,"ion-item",13),u.Jb(41,"ion-icon",14),u.Nb(42,"ion-label",10),u.nc(43),u.Yb(44,"translate"),u.Mb(),u.Jb(45,"ion-input",15),u.Nb(46,"ion-icon",16),u.Vb("click",function(){return o.switchInputType()}),u.Mb(),u.Mb(),u.mc(47,N,3,3,"ng-container",12),u.Mb(),u.Mb(),u.Mb(),u.Nb(48,"ion-row"),u.Nb(49,"ion-col"),u.Nb(50,"ion-button",17),u.Vb("click",function(){return o.onLogin()}),u.nc(51),u.Yb(52,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb()),2&n&&(u.yb(3),u.oc(u.Zb(4,13,"modules.user.signin")),u.yb(6),u.oc(u.Zb(10,15,"language")),u.yb(3),u.dc("formGroup",o.loginForm),u.yb(13),u.oc(u.Zb(26,17,"modules.user.signin")),u.yb(4),u.oc(u.Zb(30,19,"modules.user.orSignup")),u.yb(7),u.oc(u.Zb(37,21,"modules.user.login")),u.yb(3),u.dc("ngIf",o.loginForm.get("login").dirty&&o.loginForm.get("login").errors),u.yb(4),u.oc(u.Zb(44,23,"modules.user.password")),u.yb(2),u.dc("type",o.inputType),u.yb(1),u.dc("name","password"===o.inputType?"eye-outline":"eye-off-outline"),u.yb(1),u.dc("ngIf",o.loginForm.get("password").dirty&&o.loginForm.get("password").errors),u.yb(3),u.dc("disabled","INVALID"===o.loginForm.status),u.yb(1),u.pc(" ",u.Zb(52,25,"modules.user.signin")," "))},directives:[s.q,s.T,s.R,s.g,s.t,s.r,s.z,s.n,a.p,a.l,a.f,s.p,s.J,s.m,s.h,s.j,s.l,s.k,c.j,s.bb,s.i,s.A,s.s,s.db,a.k,a.d,r.n,s.f,r.m,s.Q],pipes:[p.c,g.a],styles:[".logo_login[_ngcontent-%COMP%]{width:100%;margin:auto;display:block}"]}),v),M=i("XNiG"),F=i("vkgz"),k=i("eIep"),I=i("JX91"),x=i("pLZG"),Z=i("IzEk"),L=["signupFormDirective"];function Y(n,o){if(1&n&&(u.Nb(0,"ion-text",27),u.nc(1),u.Yb(2,"translate"),u.Mb()),2&n){var t=o.$implicit;u.yb(1),u.pc(" ",u.Zb(2,1,"errors."+t)," ")}}function O(n,o){if(1&n&&(u.Lb(0),u.mc(1,Y,3,3,"ion-text",26),u.Yb(2,"errorExtractor"),u.Kb()),2&n){var t=u.Xb(2);u.yb(1),u.dc("ngForOf",u.Zb(2,1,t.signupForm.get("companyName").errors))}}function J(n,o){if(1&n&&(u.Nb(0,"ion-text",27),u.nc(1),u.Yb(2,"translate"),u.Mb()),2&n){var t=o.$implicit;u.yb(1),u.pc(" ",u.Zb(2,1,"errors."+t)," ")}}function C(n,o){if(1&n&&(u.Lb(0),u.mc(1,J,3,3,"ion-text",26),u.Yb(2,"errorExtractor"),u.Kb()),2&n){var t=u.Xb(2);u.yb(1),u.dc("ngForOf",u.Zb(2,1,t.signupForm.get("login").errors))}}function T(n,o){if(1&n&&(u.Nb(0,"ion-text",27),u.nc(1),u.Yb(2,"translate"),u.Mb()),2&n){var t=o.$implicit;u.yb(1),u.pc(" ",u.Zb(2,1,"errors."+t)," ")}}function j(n,o){if(1&n&&(u.Lb(0),u.mc(1,T,3,3,"ion-text",26),u.Yb(2,"errorExtractor"),u.Kb()),2&n){var t=u.Xb(2);u.yb(1),u.dc("ngForOf",u.Zb(2,1,t.signupForm.get("email").errors))}}function S(n,o){if(1&n&&(u.Nb(0,"ion-text",27),u.nc(1),u.Yb(2,"translate"),u.Mb()),2&n){var t=o.$implicit;u.yb(1),u.pc(" ",u.Zb(2,1,"errors."+t)," ")}}function D(n,o){if(1&n&&(u.Lb(0),u.mc(1,S,3,3,"ion-text",26),u.Yb(2,"errorExtractor"),u.Kb()),2&n){var t=u.Xb(2);u.yb(1),u.dc("ngForOf",u.Zb(2,1,t.signupForm.get("password").errors))}}function E(n,o){1&n&&u.Jb(0,"ion-icon",28),2&n&&u.dc("name","checkmark-done-outline")}function X(n,o){if(1&n&&(u.Nb(0,"ion-text",27),u.nc(1),u.Yb(2,"translate"),u.Mb()),2&n){var t=o.$implicit;u.yb(1),u.pc(" ",u.Zb(2,1,"errors."+t)," ")}}function $(n,o){if(1&n&&(u.Lb(0),u.mc(1,X,3,3,"ion-text",26),u.Yb(2,"errorExtractor"),u.Kb()),2&n){var t=u.Xb(2);u.yb(1),u.dc("ngForOf",u.Zb(2,1,t.signupForm.get("passwordConfirm").errors))}}function z(n,o){if(1&n){var t=u.Ob();u.Nb(0,"form",4,5),u.Nb(2,"ion-grid"),u.Nb(3,"ion-row"),u.Nb(4,"ion-col",6),u.Nb(5,"div",7),u.Nb(6,"h1"),u.nc(7,"The Little Hotel"),u.Mb(),u.Mb(),u.Nb(8,"ion-card"),u.Nb(9,"ion-card-header"),u.Nb(10,"div"),u.Jb(11,"img",8),u.Mb(),u.Nb(12,"ion-card-title",7),u.nc(13),u.Yb(14,"translate"),u.Mb(),u.Nb(15,"ion-card-subtitle",7),u.Nb(16,"a",9),u.nc(17),u.Yb(18,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Nb(19,"ion-card-content"),u.Nb(20,"ion-list"),u.Nb(21,"ion-item"),u.Jb(22,"ion-icon",10),u.Nb(23,"ion-label",11),u.nc(24),u.Yb(25,"translate"),u.Mb(),u.Jb(26,"ion-input",12),u.Mb(),u.mc(27,O,3,3,"ng-container",13),u.Nb(28,"ion-item"),u.Jb(29,"ion-icon",14),u.Nb(30,"ion-label",11),u.nc(31),u.Yb(32,"translate"),u.Mb(),u.Jb(33,"ion-input",15),u.Mb(),u.mc(34,C,3,3,"ng-container",13),u.Nb(35,"ion-item"),u.Jb(36,"ion-icon",16),u.Nb(37,"ion-label",11),u.nc(38),u.Yb(39,"translate"),u.Mb(),u.Jb(40,"ion-input",17),u.Mb(),u.mc(41,j,3,3,"ng-container",13),u.Nb(42,"ion-item",18),u.Jb(43,"ion-icon",19),u.Nb(44,"ion-label",11),u.nc(45),u.Yb(46,"translate"),u.Mb(),u.Jb(47,"ion-input",20),u.Nb(48,"ion-icon",21),u.Vb("click",function(){return u.jc(t),u.Xb().switchInputType()}),u.Mb(),u.Mb(),u.mc(49,D,3,3,"ng-container",13),u.Nb(50,"ion-item",18),u.Jb(51,"ion-icon",22),u.Nb(52,"ion-label",11),u.nc(53),u.Yb(54,"translate"),u.Mb(),u.Jb(55,"ion-input",23),u.mc(56,E,1,1,"ion-icon",24),u.Mb(),u.mc(57,$,3,3,"ng-container",13),u.Mb(),u.Mb(),u.Mb(),u.Nb(58,"ion-row"),u.Nb(59,"ion-col"),u.Nb(60,"ion-button",25),u.Vb("click",function(){return u.jc(t),u.Xb().formSubmitSubject$.next()}),u.nc(61),u.Yb(62,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb()}if(2&n){var e=u.Xb();u.dc("formGroup",e.signupForm),u.yb(13),u.oc(u.Zb(14,19,"modules.user.signup")),u.yb(4),u.oc(u.Zb(18,21,"modules.user.orSignin")),u.yb(7),u.oc(u.Zb(25,23,"modules.user.companyName")),u.yb(3),u.dc("ngIf",e.signupForm.get("companyName").dirty&&e.signupForm.get("companyName").errors),u.yb(4),u.oc(u.Zb(32,25,"modules.user.login")),u.yb(3),u.dc("ngIf",e.signupForm.get("login").dirty&&e.signupForm.get("login").errors),u.yb(4),u.oc(u.Zb(39,27,"modules.user.email")),u.yb(3),u.dc("ngIf",e.signupForm.get("email").dirty&&e.signupForm.get("email").errors),u.yb(4),u.oc(u.Zb(46,29,"modules.user.password")),u.yb(2),u.dc("type",e.inputType),u.yb(1),u.dc("name","password"===e.inputType?"eye-outline":"eye-off-outline"),u.yb(1),u.dc("ngIf",e.signupForm.get("password").dirty&&e.signupForm.get("password").errors),u.yb(4),u.oc(u.Zb(54,31,"modules.user.confirmPassword")),u.yb(2),u.dc("type",e.inputType),u.yb(1),u.dc("ngIf",e.signupForm.get("passwordConfirm").dirty&&"VALID"===e.signupForm.get("passwordConfirm").status),u.yb(1),u.dc("ngIf",e.signupForm.get("passwordConfirm").dirty&&e.signupForm.get("passwordConfirm").errors),u.yb(3),u.dc("disabled","INVALID"===e.signupForm.status||"PENDING"===e.signupForm.status),u.yb(1),u.pc(" ",u.Zb(62,33,"modules.user.signup")," ")}}var A,V,q,G,_=((A=function(){function o(t,e,i){n(this,o),this.userService=t,this.router=e,this.translate=i,this.inputType="password",this.formSubmitSubject$=new M.a}return t(o,[{key:"ngOnInit",value:function(){var n=this;this.lang=this.translate.currentLang,this.signupForm=new a.e({companyName:new a.c("",{updateOn:"change",validators:[a.o.pattern("^[a-zA-Z0-9 _\\-]+$"),a.o.minLength(2),a.o.maxLength(60),a.o.required],asyncValidators:[this.userService.checkCompanyNameUnique()]}),login:new a.c("",{updateOn:"change",validators:[a.o.pattern("^[a-zA-Z0-9_\\-]+$"),a.o.minLength(2),a.o.maxLength(60),a.o.required],asyncValidators:[this.userService.checkLoginUnique()]}),password:new a.c("",{updateOn:"change",validators:[a.o.pattern("^[a-zA-Z0-9_\\-]+$"),a.o.minLength(8),a.o.maxLength(60),a.o.required]}),passwordConfirm:new a.c("",{updateOn:"change",validators:[a.o.pattern("^[a-zA-Z0-9_\\-]+$"),a.o.minLength(8),a.o.maxLength(60),a.o.required]}),email:new a.c("",{updateOn:"change",validators:[a.o.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"),a.o.required],asyncValidators:[this.userService.checkEmailUnique()]})},this.userService.matchPassword),this.formSubmitSubject$.pipe(Object(F.a)(function(){return n.signupForm.markAsDirty()}),Object(k.a)(function(){return n.signupForm.statusChanges.pipe(Object(I.a)(n.signupForm.status),Object(x.a)(function(n){return"PENDING"!==n}),Object(Z.a)(1))}),Object(x.a)(function(n){return"VALID"===n})).subscribe(function(o){return n.onSignup()})}},{key:"switchInputType",value:function(){this.inputType="password"===this.inputType?"text":"password"}},{key:"onSignup",value:function(){var n=this;this.userService.createCompany({companyName:this.signupForm.get("companyName").value,user:{login:this.signupForm.get("login").value,password:this.signupForm.get("password").value,email:this.signupForm.get("email").value}}).subscribe(function(o){return n.resetForm()},function(n){return console.log("signup Error",n.error)})}},{key:"resetForm",value:function(){this.signupFormDirective&&this.signupFormDirective.resetForm()}},{key:"switchLanguage",value:function(){this.lang="en"===this.lang?"uk":"en",this.translate.use(this.lang)}}]),o}()).\u0275fac=function(n){return new(n||A)(u.Ib(l.a),u.Ib(c.g),u.Ib(p.d))},A.\u0275cmp=u.Cb({type:A,selectors:[["app-signup-form"]],viewQuery:function(n,o){var t;1&n&&u.rc(L,!0),2&n&&u.hc(t=u.Wb())&&(o.signupFormDirective=t.first)},decls:13,vars:7,consts:[["slot","end"],["color","primary","button","","lines","none",3,"click"],["name","earth-outline","slot","start"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["signupFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["src","/assets/banner.svg",1,"logo_login"],["button","","color","primary","routerLink","/user/login"],["name","podium-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","companyName"],[4,"ngIf"],["name","person-outline","slot","start",1,"ion-align-self-center"],["type","text","autocomplete","","autocorrect","","formControlName","login"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["name","reorder-two-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","passwordConfirm",3,"type"],["class","ion-align-self-center","color","success","slot","end",3,"name",4,"ngIf"],["expand","block",3,"disabled","click"],["class","input-error","color","danger",4,"ngFor","ngForOf"],["color","danger",1,"input-error"],["color","success","slot","end",1,"ion-align-self-center",3,"name"]],template:function(n,o){1&n&&(u.Nb(0,"ion-header"),u.Nb(1,"ion-toolbar"),u.Nb(2,"ion-title"),u.nc(3),u.Yb(4,"translate"),u.Mb(),u.Nb(5,"ion-buttons",0),u.Nb(6,"ion-item",1),u.Vb("click",function(){return o.switchLanguage()}),u.Jb(7,"ion-icon",2),u.Nb(8,"ion-label"),u.nc(9),u.Yb(10,"translate"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(11,"ion-content"),u.mc(12,z,63,35,"form",3),u.Mb()),2&n&&(u.yb(3),u.oc(u.Zb(4,3,"modules.user.signup")),u.yb(6),u.oc(u.Zb(10,5,"language")),u.yb(3),u.dc("ngIf",o.signupForm))},directives:[s.q,s.T,s.R,s.g,s.t,s.r,s.z,s.n,r.n,a.p,a.l,a.f,s.p,s.J,s.m,s.h,s.j,s.l,s.k,c.j,s.bb,s.i,s.A,s.s,s.db,a.k,a.d,s.f,r.m,s.Q],pipes:[p.c,g.a],styles:[".logo_login[_ngcontent-%COMP%]{width:100%;margin:auto;display:block}"]}),A),P=i("lJxs"),K=((V=function(){function o(t,e,i){n(this,o),this.userService=t,this.router=e,this.store=i}return t(o,[{key:"canActivate",value:function(n,o){var t=this;return this.store.select("user").pipe(Object(P.a)(function(n){return!n.user||(t.router.navigateByUrl("/"),!1)}))}}]),o}()).\u0275fac=function(n){return new(n||V)(u.Rb(l.a),u.Rb(c.g),u.Rb(m.i))},V.\u0275prov=u.Eb({token:V,factory:V.\u0275fac,providedIn:"root"}),V),U=[{path:"",component:w,canActivate:[K]},{path:"signup",component:_,canActivate:[K]},{path:"**",redirectTo:"",pathMatch:"full"}],R=((q=function o(){n(this,o)}).\u0275mod=u.Gb({type:q}),q.\u0275inj=u.Fb({factory:function(n){return new(n||q)},imports:[[c.k.forChild(U)],c.k]}),q),Q=i("iTUp"),H=((G=function o(){n(this,o)}).\u0275mod=u.Gb({type:G}),G.\u0275inj=u.Fb({factory:function(n){return new(n||G)},imports:[[r.c,a.n,s.U,R,p.b.forChild({extend:!0}),Q.a]]}),G)}}])}();