(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{GMam:function(i,t,e){"use strict";e.r(t),e.d(t,"ProfilePageModule",function(){return X});var o=e("ofXK"),n=e("3Pt+"),b=e("TEn/"),c=e("tyNb"),r=e("mrSG"),a=e("z6cu"),l=e("Cfvw"),s=e("JIr8"),m=e("eIep"),d=e("mYIz"),u=e("mgGq"),N=e("fXoL"),M=e("d6tv");const p=["activateEmailCodeFormDirective"];function f(i,t){if(1&i&&(N.Nb(0,"ion-text",16),N.lc(1),N.Yb(2,"json"),N.Mb()),2&i){const i=N.Xb(2);N.yb(1),N.nc(" ",N.Zb(2,1,i.activateEmailCodeForm.get("code").errors)," ")}}function h(i,t){if(1&i){const i=N.Ob();N.Nb(0,"form",3,4),N.Nb(2,"ion-grid"),N.Nb(3,"ion-row"),N.Nb(4,"ion-col",5),N.Nb(5,"ion-card"),N.Nb(6,"ion-card-header"),N.Nb(7,"ion-card-title",6),N.lc(8,"Activate email"),N.Mb(),N.Nb(9,"ion-card-subtitle",6),N.lc(10,"Please enter activation code from email"),N.Mb(),N.Mb(),N.Nb(11,"ion-card-content"),N.Nb(12,"ion-list"),N.Nb(13,"ion-item",7),N.Jb(14,"ion-icon",8),N.Nb(15,"ion-label",9),N.lc(16,"Code"),N.Mb(),N.Jb(17,"ion-input",10),N.Mb(),N.kc(18,f,3,3,"ion-text",11),N.Mb(),N.Mb(),N.Mb(),N.Nb(19,"ion-row"),N.Nb(20,"ion-col",12),N.Nb(21,"ion-button",13),N.Vb("click",function(){return N.hc(i),N.Xb().activate()}),N.lc(22," Activate "),N.Mb(),N.Mb(),N.Nb(23,"ion-col",14),N.Nb(24,"ion-button",15),N.Vb("click",function(){return N.hc(i),N.Xb().dismiss(null)}),N.lc(25," Cancel "),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()}if(2&i){const i=N.Xb();N.dc("formGroup",i.activateEmailCodeForm),N.yb(18),N.dc("ngIf",i.activateEmailCodeForm.get("code").touched&&i.activateEmailCodeForm.get("code").errors),N.yb(3),N.dc("disabled","INVALID"===i.activateEmailCodeForm.status||"PENDING"===i.activateEmailCodeForm.status)}}let v=(()=>{class i{constructor(i,t){this.modalController=i,this.userService=t}ngOnInit(){this.activateEmailCodeForm=new n.e({code:new n.c("",{updateOn:"change",validators:[n.o.pattern("^[0-9]{2,10}$"),n.o.minLength(2),n.o.maxLength(10),n.o.required]})})}dismiss(i){console.log("code data",i),this.modalController.dismiss(i)}activate(){this.dismiss({code:this.activateEmailCodeForm.get("code").value}),this.resetForm()}resetForm(){this.activateEmailCodeFormDirective&&this.activateEmailCodeFormDirective.resetForm()}}return i.\u0275fac=function(t){return new(t||i)(N.Ib(b.R),N.Ib(M.a))},i.\u0275cmp=N.Cb({type:i,selectors:[["app-update-activation"]],viewQuery:function(i,t){var e;1&i&&N.pc(p,!0),2&i&&N.gc(e=N.Wb())&&(t.activateEmailCodeFormDirective=e.first)},decls:9,vars:1,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["activateEmailCodeFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","number","autocomplete","","autocorrect","","formControlName","code"],["class","input-error","color","danger",4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["color","danger",1,"input-error"]],template:function(i,t){1&i&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.lc(3,"Activate email"),N.Mb(),N.Nb(4,"ion-buttons",0),N.Nb(5,"ion-button",1),N.Vb("click",function(){return t.dismiss(null)}),N.lc(6,"close"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(7,"ion-content"),N.kc(8,h,26,3,"form",2),N.Mb()),2&i&&(N.yb(8),N.dc("ngIf",t.activateEmailCodeForm))},directives:[b.p,b.O,b.N,b.f,b.e,b.m,o.n,n.p,n.l,n.f,b.o,b.G,b.l,b.g,b.i,b.k,b.j,b.h,b.x,b.s,b.q,b.w,b.r,b.T,n.k,n.d,b.M],pipes:[o.g],styles:[""]}),i})();var g=e("XNiG"),F=e("vkgz"),E=e("JX91"),k=e("pLZG"),y=e("IzEk");const C=["updateEmailFormDirective"];function w(i,t){if(1&i&&(N.Nb(0,"ion-text",16),N.lc(1),N.Yb(2,"json"),N.Mb()),2&i){const i=N.Xb(2);N.yb(1),N.nc(" ",N.Zb(2,1,i.updateEmailForm.get("email").errors)," ")}}function I(i,t){if(1&i){const i=N.Ob();N.Nb(0,"form",3,4),N.Nb(2,"ion-grid"),N.Nb(3,"ion-row"),N.Nb(4,"ion-col",5),N.Nb(5,"ion-card"),N.Nb(6,"ion-card-header"),N.Nb(7,"ion-card-title",6),N.lc(8,"Update email"),N.Mb(),N.Mb(),N.Nb(9,"ion-card-content"),N.Nb(10,"ion-list"),N.Nb(11,"ion-item",7),N.Jb(12,"ion-icon",8),N.Nb(13,"ion-label",9),N.lc(14,"Email"),N.Mb(),N.Jb(15,"ion-input",10),N.Mb(),N.kc(16,w,3,3,"ion-text",11),N.Mb(),N.Mb(),N.Mb(),N.Nb(17,"ion-row"),N.Nb(18,"ion-col",12),N.Nb(19,"ion-button",13),N.Vb("click",function(){return N.hc(i),N.Xb().formSubmitSubject$.next()}),N.lc(20," Update "),N.Mb(),N.Mb(),N.Nb(21,"ion-col",14),N.Nb(22,"ion-button",15),N.Vb("click",function(){return N.hc(i),N.Xb().dismiss(null)}),N.lc(23," Cancel "),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()}if(2&i){const i=N.Xb();N.dc("formGroup",i.updateEmailForm),N.yb(16),N.dc("ngIf",i.updateEmailForm.get("email").touched&&i.updateEmailForm.get("email").errors),N.yb(3),N.dc("disabled","INVALID"===i.updateEmailForm.status||"PENDING"===i.updateEmailForm.status)}}let O=(()=>{class i{constructor(i,t){this.modalController=i,this.userService=t,this.formSubmitSubject$=new g.a}ngOnInit(){this.updateEmailForm=new n.e({email:this.userService.emailFormControl("")}),this.formSubmitSubject$.pipe(Object(F.a)(()=>this.updateEmailForm.markAsDirty()),Object(m.a)(()=>this.updateEmailForm.statusChanges.pipe(Object(E.a)(this.updateEmailForm.status),Object(k.a)(i=>"PENDING"!==i),Object(y.a)(1))),Object(k.a)(i=>"VALID"===i)).subscribe(i=>this.onUpdate())}dismiss(i){console.log("data form",i),this.modalController.dismiss(i)}onUpdate(){this.dismiss({email:this.updateEmailForm.get("email").value}),this.resetForm()}resetForm(){this.updateEmailFormDirective&&this.updateEmailFormDirective.resetForm()}}return i.\u0275fac=function(t){return new(t||i)(N.Ib(b.R),N.Ib(M.a))},i.\u0275cmp=N.Cb({type:i,selectors:[["app-update-email"]],viewQuery:function(i,t){var e;1&i&&N.pc(C,!0),2&i&&N.gc(e=N.Wb())&&(t.updateEmailFormDirective=e.first)},inputs:{email:"email"},decls:9,vars:1,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["updateEmailFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["class","input-error","color","danger",4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["color","danger",1,"input-error"]],template:function(i,t){1&i&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.lc(3,"Update Email"),N.Mb(),N.Nb(4,"ion-buttons",0),N.Nb(5,"ion-button",1),N.Vb("click",function(){return t.dismiss()}),N.lc(6,"close"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(7,"ion-content"),N.kc(8,I,24,3,"form",2),N.Mb()),2&i&&(N.yb(8),N.dc("ngIf",t.updateEmailForm))},directives:[b.p,b.O,b.N,b.f,b.e,b.m,o.n,n.p,n.l,n.f,b.o,b.G,b.l,b.g,b.i,b.k,b.h,b.x,b.s,b.q,b.w,b.r,b.X,n.k,n.d,b.M],pipes:[o.g],styles:[""]}),i})();var x=e("l7P3");function j(i,t){if(1&i){const i=N.Ob();N.Nb(0,"ion-button",8),N.Vb("click",function(){return N.hc(i),N.Xb().activate()}),N.lc(1," Activate "),N.Mb()}}const G=[{path:"",component:(()=>{class i{constructor(i,t,e){this.store=i,this.modalController=t,this.userService=e,this.user=null}ngOnInit(){this.store.select(u.b).subscribe(i=>{this.user=i})}presentModal(i,t){return Object(r.a)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:i,componentProps:t});return yield e.present(),yield e.onWillDismiss()})}activate(){this.userService.sendActivationCode(this.user._id).pipe(Object(s.a)(i=>Object(a.a)(i)),Object(m.a)(i=>(console.log("sendActivationCode",i),Object(l.a)(this.presentModal(v))))).subscribe(i=>{console.log("data s",i.data),this.store.dispatch(new d.a({_id:this.user._id,code:i.data.code}))},i=>console.log("err activate",i))}updateEmail(){return Object(r.a)(this,void 0,void 0,function*(){const{data:i}=yield this.presentModal(O);i&&(console.log("data",i),this.store.dispatch(new d.l({_id:this.user._id,email:i.email})))})}}return i.\u0275fac=function(t){return new(t||i)(N.Ib(x.i),N.Ib(b.R),N.Ib(M.a))},i.\u0275cmp=N.Cb({type:i,selectors:[["app-profile"]],decls:76,vars:6,consts:[["slot","end"],["contentId","main-content"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["size","4",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],["color","primary"],[3,"click"],[3,"click",4,"ngIf"]],template:function(i,t){1&i&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.lc(3,"Profile"),N.Mb(),N.Nb(4,"ion-buttons",0),N.Jb(5,"ion-menu-button",1),N.Mb(),N.Mb(),N.Mb(),N.Nb(6,"ion-content"),N.Nb(7,"ion-grid"),N.Nb(8,"ion-row"),N.Nb(9,"ion-col",2),N.Nb(10,"h2",3),N.lc(11,"Profile"),N.Mb(),N.Nb(12,"ion-list"),N.Nb(13,"ion-row"),N.Nb(14,"ion-col",4),N.Nb(15,"ion-item",5),N.Nb(16,"ion-label"),N.Nb(17,"h4"),N.lc(18,"Login:"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(19,"ion-col",6),N.Nb(20,"ion-item",5),N.Nb(21,"ion-label"),N.Nb(22,"ion-text",7),N.Nb(23,"p"),N.lc(24),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(25,"ion-row"),N.Nb(26,"ion-col",4),N.Nb(27,"ion-item",5),N.Nb(28,"ion-label"),N.Nb(29,"h4"),N.lc(30,"Email:"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(31,"ion-col",6),N.Nb(32,"ion-item",5),N.Nb(33,"ion-label"),N.Nb(34,"ion-text",7),N.Nb(35,"p"),N.lc(36),N.Mb(),N.Mb(),N.Mb(),N.Nb(37,"ion-button",8),N.Vb("click",function(){return t.updateEmail()}),N.lc(38," Update email "),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(39,"ion-row"),N.Nb(40,"ion-col",4),N.Nb(41,"ion-item",5),N.Nb(42,"ion-label"),N.Nb(43,"h4"),N.lc(44,"Role:"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(45,"ion-col",6),N.Nb(46,"ion-item",5),N.Nb(47,"ion-label"),N.Nb(48,"ion-text",7),N.Nb(49,"p"),N.lc(50),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(51,"ion-row"),N.Nb(52,"ion-col",4),N.Nb(53,"ion-item",5),N.Nb(54,"ion-label"),N.Nb(55,"h4"),N.lc(56,"Blocked:"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(57,"ion-col",6),N.Nb(58,"ion-item",5),N.Nb(59,"ion-label"),N.Nb(60,"ion-text",7),N.Nb(61,"p"),N.lc(62),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(63,"ion-row"),N.Nb(64,"ion-col",4),N.Nb(65,"ion-item",5),N.Nb(66,"ion-label"),N.Nb(67,"h4"),N.lc(68,"Activated:"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(69,"ion-col",6),N.Nb(70,"ion-item",5),N.Nb(71,"ion-label"),N.Nb(72,"ion-text",7),N.Nb(73,"p"),N.lc(74),N.Mb(),N.Mb(),N.Mb(),N.kc(75,j,2,0,"ion-button",9),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()),2&i&&(N.yb(24),N.nc(" ",t.user.login," "),N.yb(12),N.nc(" ",t.user.email," "),N.yb(14),N.nc(" ",t.user.role," "),N.yb(12),N.nc(" ",!!t.user.blocked," "),N.yb(12),N.nc(" ",!!t.user.activated," "),N.yb(1),N.dc("ngIf",!t.user.activated))},directives:[b.p,b.O,b.N,b.f,b.A,b.m,b.o,b.G,b.l,b.x,b.s,b.w,b.M,b.e,o.n],styles:[""]}),i})()}];let D=(()=>{class i{}return i.\u0275mod=N.Gb({type:i}),i.\u0275inj=N.Fb({factory:function(t){return new(t||i)},imports:[[c.k.forChild(G)],c.k]}),i})(),X=(()=>{class i{}return i.\u0275mod=N.Gb({type:i}),i.\u0275inj=N.Fb({factory:function(t){return new(t||i)},imports:[[o.c,n.h,n.n,b.P,D]]}),i})()}}]);