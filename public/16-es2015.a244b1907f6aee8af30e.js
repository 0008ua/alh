(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{Fl6X:function(o,e,t){"use strict";t.r(e),t.d(e,"OperatorPageModule",function(){return L});var n=t("ofXK"),i=t("3Pt+"),r=t("TEn/"),b=t("tyNb"),a=t("mrSG"),s=t("mgGq"),c=t("XNiG"),l=t("vkgz"),d=t("eIep"),p=t("JX91"),m=t("pLZG"),u=t("IzEk"),N=t("fXoL"),f=t("d6tv"),h=t("l7P3"),M=t("hlQ1");let g=(()=>{class o extends M.d{constructor(o,e){super("Operator",o),this.userService=e}formFieldOptions(o){return this.formFieldsOptions.get(o)}get formFieldsOptions(){return new Map([["email",{title:"Update email",subTitle:"Email",iconName:"mail-outline",inputLable:"Input email",inputType:"email",errors:new Map([["required","Required value"],["pattern","Entered wrong email"]]),formControl:{formState:"",validatorOrOpts:{updateOn:"blur",validators:[i.o.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"),i.o.required],asyncValidators:[this.userService.checkEmailUnique()]}}}]])}}return o.\u0275fac=function(e){return new(e||o)(N.Rb(M.e),N.Rb(f.a))},o.\u0275prov=N.Eb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const y=["addOperatorFormDirective"];function O(o,e){1&o&&N.Jb(0,"ion-progress-bar",25)}function w(o,e){if(1&o&&(N.Nb(0,"ion-text",26),N.nc(1),N.Yb(2,"json"),N.Mb()),2&o){const o=N.Xb(2);N.yb(1),N.pc(" ",N.Zb(2,1,o.addOperatorForm.get("login").errors)," ")}}function v(o,e){if(1&o&&(N.Nb(0,"ion-text",26),N.nc(1),N.Yb(2,"json"),N.Mb()),2&o){const o=N.Xb(2);N.yb(1),N.pc(" ",N.Zb(2,1,o.addOperatorForm.get("email").errors)," ")}}function F(o,e){if(1&o&&(N.Nb(0,"ion-text",26),N.nc(1),N.Yb(2,"json"),N.Mb()),2&o){const o=N.Xb(2);N.yb(1),N.pc(" ",N.Zb(2,1,o.addOperatorForm.get("password").errors)," ")}}function k(o,e){1&o&&N.Jb(0,"ion-icon",27),2&o&&N.dc("name","checkmark-done-outline")}function I(o,e){if(1&o&&(N.Nb(0,"ion-text",26),N.nc(1),N.Yb(2,"json"),N.Mb()),2&o){const o=N.Xb(2);N.yb(1),N.pc(" ",N.Zb(2,1,o.addOperatorForm.get("passwordConfirm").errors)," ")}}function x(o,e){if(1&o){const o=N.Ob();N.Nb(0,"form",3,4),N.Nb(2,"ion-grid"),N.Nb(3,"ion-row"),N.Nb(4,"ion-col",5),N.Nb(5,"ion-card"),N.Nb(6,"ion-card-header"),N.Nb(7,"ion-card-title",6),N.nc(8,"Add company user"),N.Mb(),N.mc(9,O,1,0,"ion-progress-bar",7),N.Yb(10,"async"),N.Mb(),N.Nb(11,"ion-card-content"),N.Nb(12,"ion-list"),N.Nb(13,"ion-item"),N.Jb(14,"ion-icon",8),N.Nb(15,"ion-label",9),N.nc(16,"Login"),N.Mb(),N.Jb(17,"ion-input",10),N.Mb(),N.mc(18,w,3,3,"ion-text",11),N.Nb(19,"ion-item"),N.Jb(20,"ion-icon",12),N.Nb(21,"ion-label",9),N.nc(22,"Email"),N.Mb(),N.Jb(23,"ion-input",13),N.Mb(),N.mc(24,v,3,3,"ion-text",11),N.Nb(25,"ion-item",14),N.Jb(26,"ion-icon",15),N.Nb(27,"ion-label",9),N.nc(28,"Password"),N.Mb(),N.Jb(29,"ion-input",16),N.Nb(30,"ion-icon",17),N.Vb("click",function(){return N.jc(o),N.Xb().switchInputType()}),N.Mb(),N.Mb(),N.mc(31,F,3,3,"ion-text",11),N.Nb(32,"ion-item",14),N.Jb(33,"ion-icon",18),N.Nb(34,"ion-label",9),N.nc(35,"Password Confirm"),N.Mb(),N.Jb(36,"ion-input",19),N.mc(37,k,1,1,"ion-icon",20),N.Mb(),N.mc(38,I,3,3,"ion-text",11),N.Mb(),N.Mb(),N.Mb(),N.Nb(39,"ion-row"),N.Nb(40,"ion-col",21),N.Nb(41,"ion-button",22),N.Vb("click",function(){return N.jc(o),N.Xb().dismiss()}),N.nc(42,"Cancel"),N.Mb(),N.Mb(),N.Nb(43,"ion-col",23),N.Nb(44,"ion-button",24),N.Vb("click",function(){return N.jc(o),N.Xb().formSubmitSubject$.next()}),N.nc(45," Add "),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()}if(2&o){const o=N.Xb();N.dc("formGroup",o.addOperatorForm),N.yb(9),N.dc("ngIf",N.Zb(10,11,o.loading$)),N.yb(9),N.dc("ngIf",o.addOperatorForm.get("login").touched&&o.addOperatorForm.get("login").errors),N.yb(6),N.dc("ngIf",o.addOperatorForm.get("email").touched&&o.addOperatorForm.get("email").errors),N.yb(5),N.dc("type",o.inputType),N.yb(1),N.dc("name","password"===o.inputType?"eye-outline":"eye-off-outline"),N.yb(1),N.dc("ngIf",o.addOperatorForm.get("password").touched&&o.addOperatorForm.get("password").errors),N.yb(5),N.dc("type",o.inputType),N.yb(1),N.dc("ngIf","VALID"===o.addOperatorForm.get("passwordConfirm").status),N.yb(1),N.dc("ngIf",o.addOperatorForm.get("passwordConfirm").touched&&o.addOperatorForm.get("passwordConfirm").errors),N.yb(6),N.dc("disabled","INVALID"===o.addOperatorForm.status||"PENDING"===o.addOperatorForm.status)}}let C=(()=>{class o{constructor(o,e,t,n){this.modalController=o,this.userService=e,this.store=t,this.operatorService=n,this.inputType="password",this.formSubmitSubject$=new c.a}ngOnInit(){this.loading$=this.operatorService.loading$,this.addOperatorForm=new i.e({login:new i.c("",{updateOn:"blur",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{2,60}$"),i.o.minLength(2),i.o.maxLength(60),i.o.required],asyncValidators:[this.userService.checkLoginUnique()]}),password:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),i.o.minLength(8),i.o.maxLength(60),i.o.required]}),passwordConfirm:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),i.o.minLength(8),i.o.maxLength(60),i.o.required]}),email:this.userService.emailFormControl()},this.userService.matchPassword),this.formSubmitSubject$.pipe(Object(l.a)(()=>this.addOperatorForm.markAsDirty()),Object(d.a)(()=>this.addOperatorForm.statusChanges.pipe(Object(p.a)(this.addOperatorForm.status),Object(m.a)(o=>"PENDING"!==o),Object(u.a)(1))),Object(m.a)(o=>"VALID"===o)).subscribe(o=>this.onSignup())}dismiss(o){this.modalController.dismiss(o)}switchInputType(){this.inputType="password"===this.inputType?"text":"password"}onSignup(){this.dismiss({login:this.addOperatorForm.get("login").value,password:this.addOperatorForm.get("password").value,email:this.addOperatorForm.get("email").value}),this.resetForm()}resetForm(){this.addOperatorFormDirective&&this.addOperatorFormDirective.resetForm()}}return o.\u0275fac=function(e){return new(e||o)(N.Ib(r.W),N.Ib(f.a),N.Ib(h.i),N.Ib(g))},o.\u0275cmp=N.Cb({type:o,selectors:[["app-operator-add"]],viewQuery:function(o,e){var t;1&o&&N.rc(y,!0),2&o&&N.hc(t=N.Wb())&&(e.addOperatorFormDirective=t.first)},inputs:{company:"company"},decls:9,vars:1,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["addOperatorFormDirective","ngForm"],["size-md","10","offset-md","1"],[1,"ion-text-center"],["type","indeterminate","color","primary",4,"ngIf"],["name","person-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","login"],["class","input-error","color","danger",4,"ngIf"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["name","reorder-two-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","passwordConfirm",3,"type"],["class","ion-align-self-center","color","primary","slot","end",3,"name",4,"ngIf"],["size","8"],["expand","block","fill","outline",3,"click"],["size","4"],["expand","block",3,"disabled","click"],["type","indeterminate","color","primary"],["color","danger",1,"input-error"],["color","primary","slot","end",1,"ion-align-self-center",3,"name"]],template:function(o,e){1&o&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.nc(3,"Add company user"),N.Mb(),N.Nb(4,"ion-buttons",0),N.Nb(5,"ion-button",1),N.Vb("click",function(){return e.dismiss()}),N.nc(6,"close"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(7,"ion-content"),N.mc(8,x,46,13,"form",2),N.Mb()),2&o&&(N.yb(8),N.dc("ngIf",e.addOperatorForm))},directives:[r.q,r.S,r.Q,r.g,r.f,r.n,n.n,i.p,i.l,i.f,r.p,r.J,r.m,r.h,r.j,r.l,r.i,r.A,r.t,r.r,r.z,r.s,r.cb,i.k,i.d,r.G,r.P],pipes:[n.b,n.g],styles:[""]}),o})();var S=t("sYmb");function j(o,e){1&o&&(N.Lb(0),N.nc(1," Loading.."),N.Kb())}function Z(o,e){if(1&o){const o=N.Ob();N.Nb(0,"ion-item-sliding"),N.Nb(1,"ion-item"),N.Nb(2,"ion-label"),N.Nb(3,"ion-row"),N.Nb(4,"ion-col",7),N.Nb(5,"ion-item",8),N.Nb(6,"ion-label"),N.Nb(7,"h4"),N.nc(8),N.Yb(9,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(10,"ion-col",9),N.Nb(11,"ion-item",8),N.Nb(12,"ion-label"),N.Nb(13,"ion-text",10),N.Nb(14,"p"),N.nc(15),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(16,"ion-row"),N.Nb(17,"ion-col",7),N.Nb(18,"ion-item",8),N.Nb(19,"ion-label"),N.Nb(20,"h4"),N.nc(21),N.Yb(22,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(23,"ion-col",9),N.Nb(24,"ion-item",8),N.Nb(25,"ion-label"),N.Nb(26,"ion-text",10),N.Nb(27,"p"),N.nc(28),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(29,"ion-row"),N.Nb(30,"ion-col",7),N.Nb(31,"ion-item",8),N.Nb(32,"ion-label"),N.Nb(33,"h4"),N.nc(34),N.Yb(35,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(36,"ion-col",9),N.Nb(37,"ion-item",8),N.Nb(38,"ion-label"),N.Nb(39,"ion-text",10),N.Nb(40,"p"),N.nc(41),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(42,"ion-row"),N.Nb(43,"ion-col",7),N.Nb(44,"ion-item",8),N.Nb(45,"ion-label"),N.Nb(46,"h4"),N.nc(47),N.Yb(48,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(49,"ion-col",9),N.Nb(50,"ion-item",8),N.Nb(51,"ion-label"),N.Nb(52,"ion-text",10),N.Nb(53,"p"),N.nc(54),N.Yb(55,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Nb(56,"ion-button",5),N.Vb("click",function(){N.jc(o);const e=N.Xb().$implicit;return N.Xb().blockUser(e._id,!e.blocked)}),N.nc(57),N.Yb(58,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(59,"ion-row"),N.Nb(60,"ion-col",7),N.Nb(61,"ion-item",8),N.Nb(62,"ion-label"),N.Nb(63,"h4"),N.nc(64),N.Yb(65,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(66,"ion-col",9),N.Nb(67,"ion-item",8),N.Nb(68,"ion-label"),N.Nb(69,"ion-text",10),N.Nb(70,"p"),N.nc(71),N.Yb(72,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(73,"ion-item-options",11),N.Nb(74,"ion-item-option",12),N.Vb("click",function(){N.jc(o);const e=N.Xb().$implicit;return N.Xb().presentAlert(e._id,e.login)}),N.Jb(75,"ion-icon",13),N.Mb(),N.Mb(),N.Mb()}if(2&o){const o=N.Xb().$implicit;N.yb(8),N.oc(N.Zb(9,11,"modules.dashboard.profile.login")),N.yb(7),N.pc(" ",o.login," "),N.yb(6),N.oc(N.Zb(22,13,"modules.dashboard.profile.email")),N.yb(7),N.pc(" ",o.email," "),N.yb(6),N.oc(N.Zb(35,15,"modules.dashboard.profile.role")),N.yb(7),N.pc(" ",o.role," "),N.yb(6),N.oc(N.Zb(48,17,"modules.dashboard.profile.blocked")),N.yb(7),N.pc(" ",N.Zb(55,19,"common.logic."+!!o.blocked)," "),N.yb(3),N.pc(" ",N.Zb(58,21,o.blocked?"modules.dashboard.operator.unblock":"modules.dashboard.operator.block")," "),N.yb(7),N.oc(N.Zb(65,23,"modules.dashboard.profile.activated")),N.yb(7),N.pc(" ",N.Zb(72,25,"common.logic."+!!o.activated)," ")}}function X(o,e){if(1&o&&(N.Lb(0),N.mc(1,Z,76,27,"ion-item-sliding",0),N.Kb()),2&o){const o=e.$implicit,t=N.Xb();N.yb(1),N.dc("ngIf",o._id!==t.user._id)}}const $=[{path:"",component:(()=>{class o{constructor(o,e,t,n){this.operatorService=o,this.store=e,this.modalController=t,this.alertController=n,this.user=null,this.company=null}ngOnInit(){this.store.select(s.a).subscribe(o=>{o&&(this.company=o,this.operatorService.getAll())}),this.store.select(s.b).subscribe(o=>{o&&(this.user=o)}),this.entities$=this.operatorService.entities$,this.loading$=this.operatorService.loading$,this.entities$.subscribe(o=>this.operators=o)}presentAlert(o,e){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:"Delete",subHeader:"user with login: "+e,message:"Are you shure?",buttons:[{text:"Cancel",role:"cancel",handler:o=>{console.log("Confirm Cancel: blah")}},{text:"Okay",handler:()=>this.remove(o)}]});yield t.present()})}presentModal(o,e){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:o,componentProps:e});return yield t.present(),yield t.onWillDismiss()})}blockUser(o,e){this.operatorService.update({_id:o,blocked:e}).subscribe(o=>console.log("update result",o),o=>console.log("update error",o))}add(){return Object(a.a)(this,void 0,void 0,function*(){const{data:o}=yield this.presentModal(C,{company:this.company});o&&this.operatorService.add(o).subscribe(o=>console.log("add result",o),o=>console.log("add error",o))})}remove(o){return this.operatorService.delete(o)}}return o.\u0275fac=function(e){return new(e||o)(N.Ib(g),N.Ib(h.i),N.Ib(r.W),N.Ib(r.a))},o.\u0275cmp=N.Cb({type:o,selectors:[["app-operator"]],decls:25,vars:14,consts:[[4,"ngIf"],["slot","end"],["menu","dashboard-menu"],["size-md","6","offset-md","3"],[1,"ion-text-center"],[3,"click"],[4,"ngFor","ngForOf"],["size","4",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],["color","primary"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(o,e){1&o&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.nc(3),N.Yb(4,"translate"),N.mc(5,j,2,0,"ng-container",0),N.Yb(6,"async"),N.Mb(),N.Nb(7,"ion-buttons",1),N.Jb(8,"ion-menu-button",2),N.Mb(),N.Mb(),N.Mb(),N.Nb(9,"ion-content"),N.Nb(10,"ion-grid"),N.Nb(11,"ion-row"),N.Nb(12,"ion-col",3),N.Nb(13,"h2",4),N.nc(14),N.Mb(),N.Nb(15,"ion-list"),N.Nb(16,"ion-list-header"),N.Nb(17,"ion-label"),N.Nb(18,"ion-note",1),N.nc(19),N.Yb(20,"translate"),N.Mb(),N.Mb(),N.Nb(21,"ion-button",5),N.Vb("click",function(){return e.add()}),N.nc(22),N.Yb(23,"translate"),N.Mb(),N.Mb(),N.mc(24,X,2,1,"ng-container",6),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()),2&o&&(N.yb(3),N.pc("",N.Zb(4,6,"modules.dashboard.operator.title")," "),N.yb(2),N.dc("ngIf",N.Zb(6,8,e.loading$)),N.yb(9),N.oc(null==e.company?null:e.company.companyName),N.yb(5),N.pc(" ",N.Zb(20,10,"elements.button.slideToDelete")," "),N.yb(3),N.oc(N.Zb(23,12,"elements.button.add")),N.yb(2),N.dc("ngForOf",e.operators))},directives:[r.q,r.S,r.Q,n.n,r.g,r.D,r.n,r.p,r.J,r.m,r.A,r.B,r.z,r.F,r.f,n.m,r.y,r.t,r.P,r.x,r.w,r.r],pipes:[S.c,n.b],styles:[""]}),o})()}];let Y=(()=>{class o{}return o.\u0275mod=N.Gb({type:o}),o.\u0275inj=N.Fb({factory:function(e){return new(e||o)},imports:[[b.k.forChild($)],b.k]}),o})();var J=t("FpXt");let L=(()=>{class o{}return o.\u0275mod=N.Gb({type:o}),o.\u0275inj=N.Fb({factory:function(e){return new(e||o)},imports:[[n.c,i.h,r.T,i.n,Y,J.a,S.b.forChild({extend:!0})]]}),o})()}}]);