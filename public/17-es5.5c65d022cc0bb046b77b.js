!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"L/5t":function(t,i,o){"use strict";o.r(i),o.d(i,"ProfilePageModule",function(){return B});var r=o("ofXK"),a=o("3Pt+"),b=o("TEn/"),c=o("tyNb"),s=o("mrSG"),l=o("z6cu"),u=o("Cfvw"),m=o("JIr8"),d=o("eIep"),p=o("mYIz"),f=o("mgGq"),N=o("fXoL"),v=o("d6tv"),M=o("sYmb"),h=o("1UXS"),y=["activateEmailCodeFormDirective"];function g(e,t){if(1&e&&(N.Nb(0,"ion-text",17),N.nc(1),N.Yb(2,"translate"),N.Mb()),2&e){var n=t.$implicit;N.yb(1),N.pc(" ",N.Zb(2,1,"errors."+n)," ")}}function k(e,t){if(1&e&&(N.Lb(0),N.mc(1,g,3,3,"ion-text",16),N.Yb(2,"errorExtractor"),N.Kb()),2&e){var n=N.Xb(2);N.yb(1),N.dc("ngForOf",N.Zb(2,1,n.activateEmailCodeForm.get("code").errors))}}function w(e,t){if(1&e){var n=N.Ob();N.Nb(0,"form",3,4),N.Nb(2,"ion-grid"),N.Nb(3,"ion-row"),N.Nb(4,"ion-col",5),N.Nb(5,"ion-card"),N.Nb(6,"ion-card-header"),N.Nb(7,"ion-card-title",6),N.nc(8),N.Yb(9,"translate"),N.Mb(),N.Nb(10,"ion-card-subtitle",6),N.nc(11),N.Yb(12,"translate"),N.Mb(),N.Mb(),N.Nb(13,"ion-card-content"),N.Nb(14,"ion-list"),N.Nb(15,"ion-item",7),N.Jb(16,"ion-icon",8),N.Nb(17,"ion-label",9),N.nc(18),N.Yb(19,"translate"),N.Mb(),N.Jb(20,"ion-input",10),N.Mb(),N.mc(21,k,3,3,"ng-container",11),N.Mb(),N.Mb(),N.Mb(),N.Nb(22,"ion-row"),N.Nb(23,"ion-col",12),N.Nb(24,"ion-button",13),N.Vb("click",function(){return N.jc(n),N.Xb().activate()}),N.nc(25),N.Yb(26,"translate"),N.Mb(),N.Mb(),N.Nb(27,"ion-col",14),N.Nb(28,"ion-button",15),N.Vb("click",function(){return N.jc(n),N.Xb().dismiss(null)}),N.nc(29," Cancel "),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()}if(2&e){var i=N.Xb();N.dc("formGroup",i.activateEmailCodeForm),N.yb(8),N.pc("",N.Zb(9,7,"elements.button.activate")," email"),N.yb(3),N.pc("",N.Zb(12,9,"modules.dashboard.profile.activationText")," "),N.yb(7),N.oc(N.Zb(19,11,"modules.dashboard.profile.code")),N.yb(3),N.dc("ngIf",i.activateEmailCodeForm.get("code").dirty&&i.activateEmailCodeForm.get("code").errors),N.yb(3),N.dc("disabled","INVALID"===i.activateEmailCodeForm.status||"PENDING"===i.activateEmailCodeForm.status),N.yb(1),N.pc(" ",N.Zb(26,13,"elements.button.update")," ")}}var F,E=((F=function(){function t(n,i){e(this,t),this.modalController=n,this.userService=i}return n(t,[{key:"ngOnInit",value:function(){this.activateEmailCodeForm=new a.e({code:new a.c("",{updateOn:"change",validators:[a.o.pattern("^[0-9]+$"),a.o.minLength(2),a.o.maxLength(10),a.o.required]})})}},{key:"dismiss",value:function(e){this.modalController.dismiss(e)}},{key:"activate",value:function(){this.dismiss({code:this.activateEmailCodeForm.get("code").value}),this.resetForm()}},{key:"resetForm",value:function(){this.activateEmailCodeFormDirective&&this.activateEmailCodeFormDirective.resetForm()}}]),t}()).\u0275fac=function(e){return new(e||F)(N.Ib(b.X),N.Ib(v.a))},F.\u0275cmp=N.Cb({type:F,selectors:[["app-update-activation"]],viewQuery:function(e,t){var n;1&e&&N.rc(y,!0),2&e&&N.hc(n=N.Wb())&&(t.activateEmailCodeFormDirective=n.first)},decls:11,vars:7,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["activateEmailCodeFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","number","autocomplete","","autocorrect","","formControlName","code"],[4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["class","input-error","color","danger",4,"ngFor","ngForOf"],["color","danger",1,"input-error"]],template:function(e,t){1&e&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.nc(3),N.Yb(4,"translate"),N.Mb(),N.Nb(5,"ion-buttons",0),N.Nb(6,"ion-button",1),N.Vb("click",function(){return t.dismiss(null)}),N.nc(7),N.Yb(8,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(9,"ion-content"),N.mc(10,w,30,15,"form",2),N.Mb()),2&e&&(N.yb(3),N.pc("",N.Zb(4,3,"elements.button.activate")," email"),N.yb(4),N.oc(N.Zb(8,5,"elements.button.close")),N.yb(3),N.dc("ngIf",t.activateEmailCodeForm))},directives:[b.q,b.T,b.R,b.g,b.f,b.n,r.n,a.p,a.l,a.f,b.p,b.J,b.m,b.h,b.j,b.l,b.k,b.i,b.A,b.t,b.r,b.z,b.s,b.Z,a.k,a.d,r.m,b.Q],pipes:[M.c,h.a],styles:[""]}),F),C=o("XNiG"),I=o("vkgz"),x=o("JX91"),Y=o("pLZG"),Z=o("IzEk"),j=["updateEmailFormDirective"];function O(e,t){if(1&e&&(N.Nb(0,"ion-text",17),N.nc(1),N.Yb(2,"translate"),N.Mb()),2&e){var n=t.$implicit;N.yb(1),N.pc(" ",N.Zb(2,1,"errors."+n)," ")}}function P(e,t){if(1&e&&(N.Lb(0),N.mc(1,O,3,3,"ion-text",16),N.Yb(2,"errorExtractor"),N.Kb()),2&e){var n=N.Xb(2);N.yb(1),N.dc("ngForOf",N.Zb(2,1,n.updateEmailForm.get("email").errors))}}function D(e,t){if(1&e){var n=N.Ob();N.Nb(0,"form",3,4),N.Nb(2,"ion-grid"),N.Nb(3,"ion-row"),N.Nb(4,"ion-col",5),N.Nb(5,"ion-card"),N.Nb(6,"ion-card-header"),N.Nb(7,"ion-card-title",6),N.nc(8),N.Yb(9,"translate"),N.Mb(),N.Mb(),N.Nb(10,"ion-card-content"),N.Nb(11,"ion-list"),N.Nb(12,"ion-item",7),N.Jb(13,"ion-icon",8),N.Nb(14,"ion-label",9),N.nc(15,"Email"),N.Mb(),N.Jb(16,"ion-input",10),N.Mb(),N.mc(17,P,3,3,"ng-container",11),N.Mb(),N.Mb(),N.Mb(),N.Nb(18,"ion-row"),N.Nb(19,"ion-col",12),N.Nb(20,"ion-button",13),N.Vb("click",function(){return N.jc(n),N.Xb().formSubmitSubject$.next()}),N.nc(21),N.Yb(22,"translate"),N.Mb(),N.Mb(),N.Nb(23,"ion-col",14),N.Nb(24,"ion-button",15),N.Vb("click",function(){return N.jc(n),N.Xb().dismiss(null)}),N.nc(25," Cancel "),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()}if(2&e){var i=N.Xb();N.dc("formGroup",i.updateEmailForm),N.yb(8),N.pc("",N.Zb(9,5,"elements.button.update")," email"),N.yb(9),N.dc("ngIf",i.updateEmailForm.get("email").dirty&&i.updateEmailForm.get("email").errors),N.yb(3),N.dc("disabled","INVALID"===i.updateEmailForm.status||"PENDING"===i.updateEmailForm.status),N.yb(1),N.pc(" ",N.Zb(22,7,"elements.button.update")," ")}}var V,X,z=((V=function(){function t(n,i){e(this,t),this.modalController=n,this.userService=i,this.formSubmitSubject$=new C.a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.updateEmailForm=new a.e({email:this.userService.emailFormControl("")}),this.formSubmitSubject$.pipe(Object(I.a)(function(){return e.updateEmailForm.markAsDirty()}),Object(I.a)(function(){return console.log("tap")}),Object(d.a)(function(){return e.updateEmailForm.statusChanges.pipe(Object(x.a)(e.updateEmailForm.status),Object(Y.a)(function(e){return console.log("status",e),"PENDING"!==e}),Object(Z.a)(1))}),Object(Y.a)(function(e){return"VALID"===e})).subscribe(function(t){return e.onUpdate()})}},{key:"dismiss",value:function(e){this.modalController.dismiss(e)}},{key:"onUpdate",value:function(){this.dismiss({email:this.updateEmailForm.get("email").value}),this.resetForm()}},{key:"resetForm",value:function(){this.updateEmailFormDirective&&this.updateEmailFormDirective.resetForm()}}]),t}()).\u0275fac=function(e){return new(e||V)(N.Ib(b.X),N.Ib(v.a))},V.\u0275cmp=N.Cb({type:V,selectors:[["app-update-email"]],viewQuery:function(e,t){var n;1&e&&N.rc(j,!0),2&e&&N.hc(n=N.Wb())&&(t.updateEmailFormDirective=n.first)},inputs:{email:"email"},decls:11,vars:7,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["updateEmailFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","email","autocomplete","","autocorrect","","formControlName","email"],[4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["class","input-error","color","danger",4,"ngFor","ngForOf"],["color","danger",1,"input-error"]],template:function(e,t){1&e&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.nc(3),N.Yb(4,"translate"),N.Mb(),N.Nb(5,"ion-buttons",0),N.Nb(6,"ion-button",1),N.Vb("click",function(){return t.dismiss()}),N.nc(7),N.Yb(8,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(9,"ion-content"),N.mc(10,D,26,9,"form",2),N.Mb()),2&e&&(N.yb(3),N.pc("",N.Zb(4,3,"elements.button.update")," Email"),N.yb(4),N.oc(N.Zb(8,5,"elements.button.close")),N.yb(3),N.dc("ngIf",t.updateEmailForm))},directives:[b.q,b.T,b.R,b.g,b.f,b.n,r.n,a.p,a.l,a.f,b.p,b.J,b.m,b.h,b.j,b.l,b.i,b.A,b.t,b.r,b.z,b.s,b.db,a.k,a.d,r.m,b.Q],pipes:[M.c,h.a],styles:[""]}),V),G=o("AytR"),S=o("l7P3"),A=((X=function(){function t(n,i,o,r){e(this,t),this.el=n,this.vcr=i,this.templateRef=o,this.userService=r,this.hasView=!1}return n(t,[{key:"appPermission",set:function(e){var t=this;this.userService.displayGuard(e).subscribe(function(e){if(e&&!t.hasView)t.vcr.createEmbeddedView(t.templateRef),t.hasView=!0;else{if(e&&t.hasView)return;t.vcr.clear(),t.hasView=!1}})}}]),t}()).\u0275fac=function(e){return new(e||X)(N.Ib(N.m),N.Ib(N.P),N.Ib(N.L),N.Ib(v.a))},X.\u0275dir=N.Db({type:X,selectors:[["","appPermission",""]],inputs:{appPermission:"appPermission"}}),X);function R(e,t){1&e&&(N.Nb(0,"p",3),N.Nb(1,"ion-text",12),N.nc(2),N.Yb(3,"translate"),N.Mb(),N.Mb()),2&e&&(N.yb(2),N.oc(N.Zb(3,1,"modules.dashboard.profile.activateWarning")))}function J(e,t){if(1&e){var n=N.Ob();N.Nb(0,"ion-button",9),N.Vb("click",function(){return N.jc(n),N.Xb().activate()}),N.nc(1),N.Yb(2,"translate"),N.Mb()}2&e&&(N.yb(1),N.pc(" ",N.Zb(2,1,"elements.button.activate")," "))}function L(e,t){if(1&e){var n=N.Ob();N.Nb(0,"ion-row"),N.Nb(1,"ion-col",13),N.Nb(2,"ion-item",6),N.Nb(3,"ion-button",14),N.Vb("click",function(){N.jc(n);var e=N.Xb();return e.presentAlert(e.company.companyName)}),N.nc(4),N.Yb(5,"translate"),N.Yb(6,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb()}2&e&&(N.yb(4),N.qc("",N.Zb(5,2,"elements.button.delete")," ",N.Zb(6,4,"modules.dashboard.profile.company"),""))}var q,T,U,$=function(){return{component:"ProfilePage",item:"msgNotActivated",condition:!1}},_=function(){return{component:"ProfilePage",item:"btnRemoveCompany"}},Q=[{path:"",component:(q=function(){function t(n,i,o,r,a){e(this,t),this.store=n,this.modalController=i,this.userService=o,this.alertController=r,this.translate=a,this.user=null,this.environment=G.a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.store.select(f.a).subscribe(function(t){e.company=t}),this.store.select(f.b).subscribe(function(t){e.user=t})}},{key:"presentModal",value:function(e,t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalController.create({component:e,componentProps:t});case 2:return i=n.sent,n.next=5,i.present();case 5:return n.next=7,i.onWillDismiss();case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}},n,this)}))}},{key:"presentAlert",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:this.translate.instant("elements.button.delete")+" "+this.translate.instant("modules.dashboard.profile.company")+": "+e,subHeader:this.translate.instant("modules.dashboard.profile.deleteAttention"),message:this.translate.instant("dif.sure"),buttons:[{text:"Cancel",role:"cancel",handler:function(e){}},{text:"Okay",handler:function(){return i.removeCompany()},cssClass:"color_danger"}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}},t,this)}))}},{key:"removeCompany",value:function(){this.store.dispatch(new p.q)}},{key:"activate",value:function(){var e=this;this.userService.sendActivationCode(this.user._id).pipe(Object(m.a)(function(e){return Object(l.a)(e)}),Object(d.a)(function(t){return Object(u.a)(e.presentModal(E))})).subscribe(function(t){var n;e.store.dispatch(new p.a({_id:e.user._id,code:null===(n=t.data)||void 0===n?void 0:n.code}))},function(e){return console.log("err activate",e)})}},{key:"updateEmail",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.presentModal(z);case 2:t=e.sent,(n=t.data)&&this.store.dispatch(new p.t({_id:this.user._id,email:n.email}));case 5:case"end":return e.stop()}},e,this)}))}}]),t}(),q.\u0275fac=function(e){return new(e||q)(N.Ib(S.i),N.Ib(b.X),N.Ib(v.a),N.Ib(b.a),N.Ib(M.d))},q.\u0275cmp=N.Cb({type:q,selectors:[["app-profile"]],decls:87,vars:37,consts:[["slot","end"],["menu","dashboard-menu"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["class","ion-text-center",4,"appPermission"],["size","4",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],["color","primary"],[3,"click"],[3,"click",4,"ngIf"],[4,"appPermission"],["color","danger"],[1,"ion-no-padding"],["color","danger","fill","outline",3,"click"]],template:function(e,t){1&e&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.nc(3),N.Yb(4,"translate"),N.Mb(),N.Nb(5,"ion-buttons",0),N.Jb(6,"ion-menu-button",1),N.Mb(),N.Mb(),N.Mb(),N.Nb(7,"ion-content"),N.Nb(8,"ion-grid"),N.Nb(9,"ion-row"),N.Nb(10,"ion-col",2),N.Nb(11,"h2",3),N.nc(12),N.Mb(),N.mc(13,R,4,3,"p",4),N.Nb(14,"ion-list"),N.Nb(15,"ion-row"),N.Nb(16,"ion-col",5),N.Nb(17,"ion-item",6),N.Nb(18,"ion-label"),N.Nb(19,"h4"),N.nc(20),N.Yb(21,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(22,"ion-col",7),N.Nb(23,"ion-item",6),N.Nb(24,"ion-label"),N.Nb(25,"ion-text",8),N.Nb(26,"p"),N.nc(27),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(28,"ion-row"),N.Nb(29,"ion-col",5),N.Nb(30,"ion-item",6),N.Nb(31,"ion-label"),N.Nb(32,"h4"),N.nc(33),N.Yb(34,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(35,"ion-col",7),N.Nb(36,"ion-item",6),N.Nb(37,"ion-label"),N.Nb(38,"ion-text",8),N.Nb(39,"p"),N.nc(40),N.Mb(),N.Mb(),N.Mb(),N.Nb(41,"ion-button",9),N.Vb("click",function(){return t.updateEmail()}),N.nc(42),N.Yb(43,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(44,"ion-row"),N.Nb(45,"ion-col",5),N.Nb(46,"ion-item",6),N.Nb(47,"ion-label"),N.Nb(48,"h4"),N.nc(49),N.Yb(50,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(51,"ion-col",7),N.Nb(52,"ion-item",6),N.Nb(53,"ion-label"),N.Nb(54,"ion-text",8),N.Nb(55,"p"),N.nc(56),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(57,"ion-row"),N.Nb(58,"ion-col",5),N.Nb(59,"ion-item",6),N.Nb(60,"ion-label"),N.Nb(61,"h4"),N.nc(62),N.Yb(63,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(64,"ion-col",7),N.Nb(65,"ion-item",6),N.Nb(66,"ion-label"),N.Nb(67,"ion-text",8),N.Nb(68,"p"),N.nc(69),N.Yb(70,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(71,"ion-row"),N.Nb(72,"ion-col",5),N.Nb(73,"ion-item",6),N.Nb(74,"ion-label"),N.Nb(75,"h4"),N.nc(76),N.Yb(77,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(78,"ion-col",7),N.Nb(79,"ion-item",6),N.Nb(80,"ion-label"),N.Nb(81,"ion-text",8),N.Nb(82,"p"),N.nc(83),N.Yb(84,"translate"),N.Mb(),N.Mb(),N.Mb(),N.mc(85,J,3,3,"ion-button",10),N.Mb(),N.Mb(),N.Mb(),N.mc(86,L,7,6,"ion-row",11),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()),2&e&&(N.yb(3),N.qc("",N.Zb(4,17,"modules.dashboard.profile.title")," -version ",t.environment.appVersion,""),N.yb(9),N.oc(null==t.company?null:t.company.companyName),N.yb(1),N.dc("appPermission",N.fc(35,$)),N.yb(7),N.oc(N.Zb(21,19,"modules.dashboard.profile.login")),N.yb(7),N.pc(" ",t.user.login," "),N.yb(6),N.oc(N.Zb(34,21,"modules.dashboard.profile.email")),N.yb(7),N.pc(" ",t.user.email," "),N.yb(2),N.pc(" ",N.Zb(43,23,"elements.button.update")," "),N.yb(7),N.oc(N.Zb(50,25,"modules.dashboard.profile.role")),N.yb(7),N.pc(" ",t.user.role," "),N.yb(6),N.oc(N.Zb(63,27,"modules.dashboard.profile.blocked")),N.yb(7),N.pc(" ",N.Zb(70,29,"common.logic."+!!t.user.blocked)," "),N.yb(7),N.oc(N.Zb(77,31,"modules.dashboard.profile.activated")),N.yb(7),N.pc(" ",N.Zb(84,33,"common.logic."+!!t.user.activated)," "),N.yb(2),N.dc("ngIf",!t.user.activated),N.yb(1),N.dc("appPermission",N.fc(36,_)))},directives:[b.q,b.T,b.R,b.g,b.D,b.n,b.p,b.J,b.m,A,b.A,b.t,b.z,b.Q,b.f,r.n],pipes:[M.c],styles:[""]}),q)}],W=((T=function t(){e(this,t)}).\u0275mod=N.Gb({type:T}),T.\u0275inj=N.Fb({factory:function(e){return new(e||T)},imports:[[c.k.forChild(Q)],c.k]}),T),K=o("FUS3"),H=o("iTUp"),B=((U=function t(){e(this,t)}).\u0275mod=N.Gb({type:U}),U.\u0275inj=N.Fb({factory:function(e){return new(e||U)},imports:[[r.c,a.h,a.n,b.U,W,M.b.forChild({extend:!0}),K.a,H.a]]}),U)}}])}();