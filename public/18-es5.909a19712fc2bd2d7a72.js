!function(){function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function n(e,o){return(n=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e})(e,o)}function r(e){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var t,n=c(e);if(o){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return i(this,t)}}function i(e,o){return!o||"object"!=typeof o&&"function"!=typeof o?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):o}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"8auw":function(o,i,c){"use strict";c.r(i),c.d(i,"RoomPageModule",function(){return D});var a,s=c("ofXK"),b=c("3Pt+"),u=c("TEn/"),l=c("tyNb"),m=c("mrSG"),d=c("mgGq"),f=c("fXoL"),p=c("d6tv"),h=c("l7P3"),v=c("hlQ1"),g=((a=function(o){!function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&n(e,o)}(c,o);var i=r(c);function c(o){return e(this,c),i.call(this,"Room",o)}return t(c,[{key:"formFieldOptions",value:function(e){return this.formFieldsOptions.get(e)}},{key:"formFieldsOptions",get:function(){return new Map([["price",{title:"Update price",subTitle:"Price",iconName:"business-outline",inputLable:"input price",inputType:"text",errors:new Map([["required","Required value"],["pattern","Entered wrong symbol"]]),formControl:{formState:"",validatorOrOpts:{updateOn:"change",validators:[b.o.pattern("[0-9]*"),b.o.required]}}}],["name",{title:"Update room",subTitle:"Name",iconName:"cash-outline",inputLable:"input room name",inputType:"text",errors:new Map([["required","Required value"],["pattern","Entered wrong symbol"],["minlength","Too short"],["maxlength","Too long"]]),formControl:{formState:"",validatorOrOpts:{updateOn:"change",validators:[b.o.pattern("^[a-zA-Z0-9\u0430-\u044f\u0410-\u042f\u0456\u0406\u0457\u0407\u0454\u0404_@#$%\u2116 '\"\\-]*$"),b.o.minLength(2),b.o.maxLength(60),b.o.required]}}}]])}}]),c}(v.d)).\u0275fac=function(e){return new(e||a)(f.Rb(v.e))},a.\u0275prov=f.Eb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),y=["addRoomFormDirective"];function N(e,o){1&e&&f.Jb(0,"ion-progress-bar",15)}function M(e,o){if(1&e&&(f.Nb(0,"ion-text",16),f.mc(1),f.Yb(2,"json"),f.Mb()),2&e){var t=f.Xb(2);f.yb(1),f.oc(" ",f.Zb(2,1,t.addRoomForm.get("name").errors)," ")}}function w(e,o){if(1&e&&(f.Nb(0,"ion-text",16),f.mc(1),f.Yb(2,"json"),f.Mb()),2&e){var t=f.Xb(2);f.yb(1),f.oc(" ",f.Zb(2,1,t.addRoomForm.get("price").errors)," ")}}function O(e,o){if(1&e){var t=f.Ob();f.Nb(0,"form",3,4),f.Nb(2,"ion-grid"),f.Nb(3,"ion-row"),f.Nb(4,"ion-col",5),f.Nb(5,"ion-card"),f.Nb(6,"ion-card-header"),f.Nb(7,"ion-card-title",6),f.mc(8,"Add room"),f.Mb(),f.lc(9,N,1,0,"ion-progress-bar",7),f.Yb(10,"async"),f.Mb(),f.Nb(11,"ion-card-content"),f.Nb(12,"ion-list"),f.Nb(13,"ion-item"),f.Jb(14,"ion-icon",8),f.Nb(15,"ion-label",9),f.mc(16,"Name"),f.Mb(),f.Jb(17,"ion-input",10),f.Mb(),f.lc(18,M,3,3,"ion-text",11),f.Nb(19,"ion-item"),f.Jb(20,"ion-icon",12),f.Nb(21,"ion-label",9),f.mc(22,"Price"),f.Mb(),f.Jb(23,"ion-input",13),f.Mb(),f.lc(24,w,3,3,"ion-text",11),f.Mb(),f.Mb(),f.Mb(),f.Nb(25,"ion-row"),f.Nb(26,"ion-col"),f.Nb(27,"ion-button",14),f.Vb("click",function(){return f.ic(t),f.Xb().onSignup()}),f.mc(28," Signup "),f.Mb(),f.Mb(),f.Mb(),f.Mb(),f.Mb(),f.Mb(),f.Mb()}if(2&e){var n=f.Xb();f.dc("formGroup",n.addRoomForm),f.yb(9),f.dc("ngIf",f.Zb(10,5,n.loading$)),f.yb(9),f.dc("ngIf",n.addRoomForm.get("name").touched&&n.addRoomForm.get("name").errors),f.yb(6),f.dc("ngIf",n.addRoomForm.get("price").touched&&n.addRoomForm.get("price").errors),f.yb(3),f.dc("disabled","INVALID"===n.addRoomForm.status||"PENDING"===n.addRoomForm.status)}}var R,F=((R=function(){function o(t,n,r,i){e(this,o),this.modalController=t,this.userService=n,this.store=r,this.roomService=i}return t(o,[{key:"ngOnInit",value:function(){this.loading$=this.roomService.loading$,this.addRoomForm=new b.e({name:new b.c(this.roomService.formFieldOptions("name").formControl.formState,this.roomService.formFieldOptions("name").formControl.validatorOrOpts,this.roomService.formFieldOptions("name").formControl.asyncValidator),price:new b.c(this.roomService.formFieldOptions("price").formControl.formState,this.roomService.formFieldOptions("price").formControl.validatorOrOpts,this.roomService.formFieldOptions("price").formControl.asyncValidator)})}},{key:"dismiss",value:function(e){this.modalController.dismiss(e)}},{key:"onSignup",value:function(){this.dismiss({name:this.addRoomForm.get("name").value,price:this.addRoomForm.get("price").value}),this.resetForm()}},{key:"resetForm",value:function(){this.addRoomFormDirective&&this.addRoomFormDirective.resetForm()}}]),o}()).\u0275fac=function(e){return new(e||R)(f.Ib(u.V),f.Ib(p.a),f.Ib(h.i),f.Ib(g))},R.\u0275cmp=f.Cb({type:R,selectors:[["app-room-add"]],viewQuery:function(e,o){var t;1&e&&f.qc(y,!0),2&e&&f.gc(t=f.Wb())&&(o.addRoomFormDirective=t.first)},inputs:{company:"company"},decls:9,vars:1,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["addRoomFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["type","indeterminate","color","primary",4,"ngIf"],["name","business-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","name"],["class","input-error","color","danger",4,"ngIf"],["name","cash-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","price"],["expand","block",3,"disabled","click"],["type","indeterminate","color","primary"],["color","danger",1,"input-error"]],template:function(e,o){1&e&&(f.Nb(0,"ion-header"),f.Nb(1,"ion-toolbar"),f.Nb(2,"ion-title"),f.mc(3,"Add room"),f.Mb(),f.Nb(4,"ion-buttons",0),f.Nb(5,"ion-button",1),f.Vb("click",function(){return o.dismiss()}),f.mc(6,"close"),f.Mb(),f.Mb(),f.Mb(),f.Mb(),f.Nb(7,"ion-content"),f.lc(8,O,29,7,"form",2),f.Mb()),2&e&&(f.yb(8),f.dc("ngIf",o.addRoomForm))},directives:[u.q,u.S,u.Q,u.g,u.f,u.n,s.n,b.p,b.l,b.f,u.p,u.J,u.m,u.h,u.j,u.l,u.i,u.A,u.t,u.r,u.z,u.s,u.bb,b.k,b.d,u.G,u.P],pipes:[s.b,s.g],styles:[""]}),R),k=c("vtsq");function x(e,o){1&e&&(f.Lb(0),f.mc(1," Loading.."),f.Kb())}function S(e,o){if(1&e){var t=f.Ob();f.Lb(0),f.Nb(1,"ion-item-sliding"),f.Nb(2,"ion-item"),f.Nb(3,"ion-label"),f.Nb(4,"ion-row"),f.Nb(5,"ion-col",7),f.Nb(6,"ion-item",8),f.Nb(7,"ion-label"),f.Nb(8,"h4"),f.mc(9,"Room name:"),f.Mb(),f.Mb(),f.Mb(),f.Mb(),f.Nb(10,"ion-col",9),f.Nb(11,"ion-item",8),f.Nb(12,"ion-label"),f.Nb(13,"ion-text",10),f.mc(14),f.Mb(),f.Mb(),f.Nb(15,"ion-button",5),f.Vb("click",function(){f.ic(t);var e=o.$implicit;return f.Xb().update(e._id,"name")}),f.mc(16," Update "),f.Mb(),f.Mb(),f.Mb(),f.Mb(),f.Nb(17,"ion-row"),f.Nb(18,"ion-col",7),f.Nb(19,"ion-item",8),f.Nb(20,"ion-label"),f.Nb(21,"h4"),f.mc(22,"Price:"),f.Mb(),f.Mb(),f.Mb(),f.Mb(),f.Nb(23,"ion-col",9),f.Nb(24,"ion-item",8),f.Nb(25,"ion-label"),f.Nb(26,"ion-text",10),f.mc(27),f.Mb(),f.Mb(),f.Nb(28,"ion-button",5),f.Vb("click",function(){f.ic(t);var e=o.$implicit;return f.Xb().update(e._id,"price")}),f.mc(29," Update "),f.Mb(),f.Mb(),f.Mb(),f.Mb(),f.Mb(),f.Mb(),f.Nb(30,"ion-item-options",11),f.Nb(31,"ion-item-option",12),f.Vb("click",function(){f.ic(t);var e=o.$implicit;return f.Xb().presentAlert(e._id,e.name)}),f.Jb(32,"ion-icon",13),f.Mb(),f.Mb(),f.Mb(),f.Kb()}if(2&e){var n=o.$implicit;f.yb(14),f.oc(" ",n.name," "),f.yb(13),f.oc(" ",n.price," ")}}var I,C,j,P=[{path:"",component:(I=function(){function o(t,n,r,i){e(this,o),this.roomService=t,this.store=n,this.modalController=r,this.alertController=i,this.user=null,this.company=null}return t(o,[{key:"ngOnInit",value:function(){var e=this;this.store.select(d.a).subscribe(function(o){o&&(e.company=o,e.roomService.getAll())}),this.store.select(d.b).subscribe(function(o){o&&(e.user=o)}),this.loading$=this.roomService.loading$,this.roomService.entities$.subscribe(function(o){return e.rooms=o})}},{key:"presentAlert",value:function(e,o){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:"Delete",subHeader:"room: "+o,message:"Are you shure?",buttons:[{text:"Cancel",role:"cancel",handler:function(e){console.log("Confirm Cancel: blah")}},{text:"Okay",handler:function(){return r.remove(e)}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}},t,this)}))}},{key:"presentModal",value:function(e,o){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:e,componentProps:o});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onWillDismiss();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t,this)}))}},{key:"update",value:function(e,o){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.presentModal(k.a,{data:this.roomService.formFieldOptions(o)});case 2:n=t.sent,(r=n.data)&&this.roomService.update((i={_id:e},c=o,a=r,c in i?Object.defineProperty(i,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[c]=a,i)).subscribe(function(e){return console.log("update result",e)},function(e){return console.log("update error",e)});case 5:case"end":return t.stop()}var i,c,a},t,this)}))}},{key:"add",value:function(){return Object(m.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var o,t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.presentModal(F,{company:this.company});case 2:o=e.sent,(t=o.data)&&this.roomService.add(t).subscribe(function(e){return console.log("add result",e)},function(e){return console.log("add error",e)});case 5:case"end":return e.stop()}},e,this)}))}},{key:"remove",value:function(e){return this.roomService.delete(e)}}]),o}(),I.\u0275fac=function(e){return new(e||I)(f.Ib(g),f.Ib(h.i),f.Ib(u.V),f.Ib(u.a))},I.\u0275cmp=f.Cb({type:I,selectors:[["app-room"]],decls:24,vars:5,consts:[[4,"ngIf"],["slot","end"],["contentId","dashboard-content"],["size-md","6","offset-md","3"],[1,"ion-text-center"],[3,"click"],[4,"ngFor","ngForOf"],["size","4",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],["color","primary"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(e,o){1&e&&(f.Nb(0,"ion-header"),f.Nb(1,"ion-toolbar"),f.Nb(2,"ion-title"),f.mc(3,"Room "),f.lc(4,x,2,0,"ng-container",0),f.Yb(5,"async"),f.Mb(),f.Nb(6,"ion-buttons",1),f.Jb(7,"ion-menu-button",2),f.Mb(),f.Mb(),f.Mb(),f.Nb(8,"ion-content"),f.Nb(9,"ion-grid"),f.Nb(10,"ion-row"),f.Nb(11,"ion-col",3),f.Nb(12,"h2",4),f.mc(13),f.Mb(),f.Nb(14,"ion-list"),f.Nb(15,"ion-list-header"),f.Nb(16,"ion-label"),f.Nb(17,"h2"),f.mc(18,"Rooms"),f.Mb(),f.Nb(19,"ion-note",1),f.mc(20," slide to delete "),f.Mb(),f.Mb(),f.Nb(21,"ion-button",5),f.Vb("click",function(){return o.add()}),f.mc(22,"New room"),f.Mb(),f.Mb(),f.lc(23,S,33,2,"ng-container",6),f.Mb(),f.Mb(),f.Mb(),f.Mb(),f.Mb()),2&e&&(f.yb(4),f.dc("ngIf",f.Zb(5,3,o.loading$)),f.yb(9),f.nc(null==o.company?null:o.company.companyName),f.yb(10),f.dc("ngForOf",o.rooms))},directives:[u.q,u.S,u.Q,s.n,u.g,u.D,u.n,u.p,u.J,u.m,u.A,u.B,u.z,u.F,u.f,s.m,u.y,u.t,u.P,u.x,u.w,u.r],pipes:[s.b],styles:[""]}),I)}],$=((C=function o(){e(this,o)}).\u0275mod=f.Gb({type:C}),C.\u0275inj=f.Fb({factory:function(e){return new(e||C)},imports:[[l.k.forChild(P)],l.k]}),C),_=c("FpXt"),D=((j=function o(){e(this,o)}).\u0275mod=f.Gb({type:j}),j.\u0275inj=f.Fb({factory:function(e){return new(e||j)},imports:[[s.c,b.h,b.n,u.T,$,_.a]]}),j)}}])}();