!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"L/5t":function(t,o,i){"use strict";i.r(o),i.d(o,"ProfilePageModule",function(){return A});var b=i("ofXK"),r=i("3Pt+"),a=i("TEn/"),c=i("tyNb"),l=i("mrSG"),s=i("z6cu"),u=i("Cfvw"),m=i("JIr8"),d=i("eIep"),p=i("mYIz"),f=i("mgGq"),N=i("fXoL"),M=i("d6tv"),v=i("sYmb"),h=["activateEmailCodeFormDirective"];function y(e,t){if(1&e&&(N.Nb(0,"ion-text",16),N.nc(1),N.Yb(2,"json"),N.Mb()),2&e){var n=N.Xb(2);N.yb(1),N.pc(" ",N.Zb(2,1,n.activateEmailCodeForm.get("code").errors)," ")}}function g(e,t){if(1&e){var n=N.Ob();N.Nb(0,"form",3,4),N.Nb(2,"ion-grid"),N.Nb(3,"ion-row"),N.Nb(4,"ion-col",5),N.Nb(5,"ion-card"),N.Nb(6,"ion-card-header"),N.Nb(7,"ion-card-title",6),N.nc(8),N.Yb(9,"translate"),N.Mb(),N.Nb(10,"ion-card-subtitle",6),N.nc(11),N.Yb(12,"translate"),N.Mb(),N.Mb(),N.Nb(13,"ion-card-content"),N.Nb(14,"ion-list"),N.Nb(15,"ion-item",7),N.Jb(16,"ion-icon",8),N.Nb(17,"ion-label",9),N.nc(18),N.Yb(19,"translate"),N.Mb(),N.Jb(20,"ion-input",10),N.Mb(),N.mc(21,y,3,3,"ion-text",11),N.Mb(),N.Mb(),N.Mb(),N.Nb(22,"ion-row"),N.Nb(23,"ion-col",12),N.Nb(24,"ion-button",13),N.Vb("click",function(){return N.jc(n),N.Xb().activate()}),N.nc(25),N.Yb(26,"translate"),N.Mb(),N.Mb(),N.Nb(27,"ion-col",14),N.Nb(28,"ion-button",15),N.Vb("click",function(){return N.jc(n),N.Xb().dismiss(null)}),N.nc(29," Cancel "),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()}if(2&e){var o=N.Xb();N.dc("formGroup",o.activateEmailCodeForm),N.yb(8),N.pc("",N.Zb(9,7,"elements.button.activate")," email"),N.yb(3),N.pc("",N.Zb(12,9,"modules.dashboard.profile.activationText")," "),N.yb(7),N.oc(N.Zb(19,11,"modules.dashboard.profile.code")),N.yb(3),N.dc("ngIf",o.activateEmailCodeForm.get("code").touched&&o.activateEmailCodeForm.get("code").errors),N.yb(3),N.dc("disabled","INVALID"===o.activateEmailCodeForm.status||"PENDING"===o.activateEmailCodeForm.status),N.yb(1),N.pc(" ",N.Zb(26,13,"elements.button.update")," ")}}var k,F=((k=function(){function t(n,o){e(this,t),this.modalController=n,this.userService=o}return n(t,[{key:"ngOnInit",value:function(){this.activateEmailCodeForm=new r.e({code:new r.c("",{updateOn:"change",validators:[r.o.pattern("^[0-9]{2,10}$"),r.o.minLength(2),r.o.maxLength(10),r.o.required]})})}},{key:"dismiss",value:function(e){this.modalController.dismiss(e)}},{key:"activate",value:function(){this.dismiss({code:this.activateEmailCodeForm.get("code").value}),this.resetForm()}},{key:"resetForm",value:function(){this.activateEmailCodeFormDirective&&this.activateEmailCodeFormDirective.resetForm()}}]),t}()).\u0275fac=function(e){return new(e||k)(N.Ib(a.W),N.Ib(M.a))},k.\u0275cmp=N.Cb({type:k,selectors:[["app-update-activation"]],viewQuery:function(e,t){var n;1&e&&N.rc(h,!0),2&e&&N.hc(n=N.Wb())&&(t.activateEmailCodeFormDirective=n.first)},decls:11,vars:7,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["activateEmailCodeFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","number","autocomplete","","autocorrect","","formControlName","code"],["class","input-error","color","danger",4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["color","danger",1,"input-error"]],template:function(e,t){1&e&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.nc(3),N.Yb(4,"translate"),N.Mb(),N.Nb(5,"ion-buttons",0),N.Nb(6,"ion-button",1),N.Vb("click",function(){return t.dismiss(null)}),N.nc(7),N.Yb(8,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(9,"ion-content"),N.mc(10,g,30,15,"form",2),N.Mb()),2&e&&(N.yb(3),N.pc("",N.Zb(4,3,"elements.button.activate")," email"),N.yb(4),N.oc(N.Zb(8,5,"elements.button.close")),N.yb(3),N.dc("ngIf",t.activateEmailCodeForm))},directives:[a.q,a.S,a.Q,a.g,a.f,a.n,b.n,r.p,r.l,r.f,a.p,a.J,a.m,a.h,a.j,a.l,a.k,a.i,a.A,a.t,a.r,a.z,a.s,a.Y,r.k,r.d,a.P],pipes:[v.c,b.g],styles:[""]}),k),E=i("XNiG"),w=i("vkgz"),C=i("JX91"),I=i("pLZG"),j=i("IzEk"),x=["updateEmailFormDirective"];function Y(e,t){if(1&e&&(N.Nb(0,"ion-text",16),N.nc(1),N.Yb(2,"json"),N.Mb()),2&e){var n=N.Xb(2);N.yb(1),N.pc(" ",N.Zb(2,1,n.updateEmailForm.get("email").errors)," ")}}function Z(e,t){if(1&e){var n=N.Ob();N.Nb(0,"form",3,4),N.Nb(2,"ion-grid"),N.Nb(3,"ion-row"),N.Nb(4,"ion-col",5),N.Nb(5,"ion-card"),N.Nb(6,"ion-card-header"),N.Nb(7,"ion-card-title",6),N.nc(8),N.Yb(9,"translate"),N.Mb(),N.Mb(),N.Nb(10,"ion-card-content"),N.Nb(11,"ion-list"),N.Nb(12,"ion-item",7),N.Jb(13,"ion-icon",8),N.Nb(14,"ion-label",9),N.nc(15,"Email"),N.Mb(),N.Jb(16,"ion-input",10),N.Mb(),N.mc(17,Y,3,3,"ion-text",11),N.Mb(),N.Mb(),N.Mb(),N.Nb(18,"ion-row"),N.Nb(19,"ion-col",12),N.Nb(20,"ion-button",13),N.Vb("click",function(){return N.jc(n),N.Xb().formSubmitSubject$.next()}),N.nc(21),N.Yb(22,"translate"),N.Mb(),N.Mb(),N.Nb(23,"ion-col",14),N.Nb(24,"ion-button",15),N.Vb("click",function(){return N.jc(n),N.Xb().dismiss(null)}),N.nc(25," Cancel "),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()}if(2&e){var o=N.Xb();N.dc("formGroup",o.updateEmailForm),N.yb(8),N.pc("",N.Zb(9,5,"elements.button.update")," email"),N.yb(9),N.dc("ngIf",o.updateEmailForm.get("email").touched&&o.updateEmailForm.get("email").errors),N.yb(3),N.dc("disabled","INVALID"===o.updateEmailForm.status||"PENDING"===o.updateEmailForm.status),N.yb(1),N.pc(" ",N.Zb(22,7,"elements.button.update")," ")}}var O,D=((O=function(){function t(n,o){e(this,t),this.modalController=n,this.userService=o,this.formSubmitSubject$=new E.a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.updateEmailForm=new r.e({email:this.userService.emailFormControl("")}),this.formSubmitSubject$.pipe(Object(w.a)(function(){return e.updateEmailForm.markAsDirty()}),Object(d.a)(function(){return e.updateEmailForm.statusChanges.pipe(Object(C.a)(e.updateEmailForm.status),Object(I.a)(function(e){return"PENDING"!==e}),Object(j.a)(1))}),Object(I.a)(function(e){return"VALID"===e})).subscribe(function(t){return e.onUpdate()})}},{key:"dismiss",value:function(e){console.log("data form",e),this.modalController.dismiss(e)}},{key:"onUpdate",value:function(){this.dismiss({email:this.updateEmailForm.get("email").value}),this.resetForm()}},{key:"resetForm",value:function(){this.updateEmailFormDirective&&this.updateEmailFormDirective.resetForm()}}]),t}()).\u0275fac=function(e){return new(e||O)(N.Ib(a.W),N.Ib(M.a))},O.\u0275cmp=N.Cb({type:O,selectors:[["app-update-email"]],viewQuery:function(e,t){var n;1&e&&N.rc(x,!0),2&e&&N.hc(n=N.Wb())&&(t.updateEmailFormDirective=n.first)},inputs:{email:"email"},decls:11,vars:7,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["updateEmailFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["class","input-error","color","danger",4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["color","danger",1,"input-error"]],template:function(e,t){1&e&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.nc(3),N.Yb(4,"translate"),N.Mb(),N.Nb(5,"ion-buttons",0),N.Nb(6,"ion-button",1),N.Vb("click",function(){return t.dismiss()}),N.nc(7),N.Yb(8,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(9,"ion-content"),N.mc(10,Z,26,9,"form",2),N.Mb()),2&e&&(N.yb(3),N.pc("",N.Zb(4,3,"elements.button.update")," Email"),N.yb(4),N.oc(N.Zb(8,5,"elements.button.close")),N.yb(3),N.dc("ngIf",t.updateEmailForm))},directives:[a.q,a.S,a.Q,a.g,a.f,a.n,b.n,r.p,r.l,r.f,a.p,a.J,a.m,a.h,a.j,a.l,a.i,a.A,a.t,a.r,a.z,a.s,a.cb,r.k,r.d,a.P],pipes:[v.c,b.g],styles:[""]}),O),z=i("l7P3");function G(e,t){if(1&e){var n=N.Ob();N.Nb(0,"ion-button",8),N.Vb("click",function(){return N.jc(n),N.Xb().activate()}),N.nc(1),N.Yb(2,"translate"),N.Mb()}2&e&&(N.yb(1),N.pc(" ",N.Zb(2,1,"elements.button.activate")," "))}var S,X,J,P=[{path:"",component:(S=function(){function t(n,o,i){e(this,t),this.store=n,this.modalController=o,this.userService=i,this.user=null}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.store.select(f.a).subscribe(function(t){e.company=t}),this.store.select(f.b).subscribe(function(t){e.user=t})}},{key:"presentModal",value:function(e,t){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalController.create({component:e,componentProps:t});case 2:return o=n.sent,n.next=5,o.present();case 5:return n.next=7,o.onWillDismiss();case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}},n,this)}))}},{key:"activate",value:function(){var e=this;this.userService.sendActivationCode(this.user._id).pipe(Object(m.a)(function(e){return Object(s.a)(e)}),Object(d.a)(function(t){return Object(u.a)(e.presentModal(F))})).subscribe(function(t){var n;e.store.dispatch(new p.a({_id:e.user._id,code:null===(n=t.data)||void 0===n?void 0:n.code}))},function(e){return console.log("err activate",e)})}},{key:"updateEmail",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.presentModal(D);case 2:t=e.sent,(n=t.data)&&(console.log("data",n),this.store.dispatch(new p.q({_id:this.user._id,email:n.email})));case 5:case"end":return e.stop()}},e,this)}))}}]),t}(),S.\u0275fac=function(e){return new(e||S)(N.Ib(z.i),N.Ib(a.W),N.Ib(M.a))},S.\u0275cmp=N.Cb({type:S,selectors:[["app-profile"]],decls:85,vars:32,consts:[["slot","end"],["menu","dashboard-menu"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["size","4",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],["color","primary"],[3,"click"],[3,"click",4,"ngIf"]],template:function(e,t){1&e&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.nc(3),N.Yb(4,"translate"),N.Mb(),N.Nb(5,"ion-buttons",0),N.Jb(6,"ion-menu-button",1),N.Mb(),N.Mb(),N.Mb(),N.Nb(7,"ion-content"),N.Nb(8,"ion-grid"),N.Nb(9,"ion-row"),N.Nb(10,"ion-col",2),N.Nb(11,"h2",3),N.nc(12),N.Mb(),N.Nb(13,"ion-list"),N.Nb(14,"ion-row"),N.Nb(15,"ion-col",4),N.Nb(16,"ion-item",5),N.Nb(17,"ion-label"),N.Nb(18,"h4"),N.nc(19),N.Yb(20,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(21,"ion-col",6),N.Nb(22,"ion-item",5),N.Nb(23,"ion-label"),N.Nb(24,"ion-text",7),N.Nb(25,"p"),N.nc(26),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(27,"ion-row"),N.Nb(28,"ion-col",4),N.Nb(29,"ion-item",5),N.Nb(30,"ion-label"),N.Nb(31,"h4"),N.nc(32),N.Yb(33,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(34,"ion-col",6),N.Nb(35,"ion-item",5),N.Nb(36,"ion-label"),N.Nb(37,"ion-text",7),N.Nb(38,"p"),N.nc(39),N.Mb(),N.Mb(),N.Mb(),N.Nb(40,"ion-button",8),N.Vb("click",function(){return t.updateEmail()}),N.nc(41),N.Yb(42,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(43,"ion-row"),N.Nb(44,"ion-col",4),N.Nb(45,"ion-item",5),N.Nb(46,"ion-label"),N.Nb(47,"h4"),N.nc(48),N.Yb(49,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(50,"ion-col",6),N.Nb(51,"ion-item",5),N.Nb(52,"ion-label"),N.Nb(53,"ion-text",7),N.Nb(54,"p"),N.nc(55),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(56,"ion-row"),N.Nb(57,"ion-col",4),N.Nb(58,"ion-item",5),N.Nb(59,"ion-label"),N.Nb(60,"h4"),N.nc(61),N.Yb(62,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(63,"ion-col",6),N.Nb(64,"ion-item",5),N.Nb(65,"ion-label"),N.Nb(66,"ion-text",7),N.Nb(67,"p"),N.nc(68),N.Yb(69,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(70,"ion-row"),N.Nb(71,"ion-col",4),N.Nb(72,"ion-item",5),N.Nb(73,"ion-label"),N.Nb(74,"h4"),N.nc(75),N.Yb(76,"translate"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(77,"ion-col",6),N.Nb(78,"ion-item",5),N.Nb(79,"ion-label"),N.Nb(80,"ion-text",7),N.Nb(81,"p"),N.nc(82),N.Yb(83,"translate"),N.Mb(),N.Mb(),N.Mb(),N.mc(84,G,3,3,"ion-button",9),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()),2&e&&(N.yb(3),N.oc(N.Zb(4,14,"modules.dashboard.profile.title")),N.yb(9),N.oc(t.company.companyName),N.yb(7),N.oc(N.Zb(20,16,"modules.dashboard.profile.login")),N.yb(7),N.pc(" ",t.user.login," "),N.yb(6),N.oc(N.Zb(33,18,"modules.dashboard.profile.email")),N.yb(7),N.pc(" ",t.user.email," "),N.yb(2),N.pc(" ",N.Zb(42,20,"elements.button.update")," "),N.yb(7),N.oc(N.Zb(49,22,"modules.dashboard.profile.role")),N.yb(7),N.pc(" ",t.user.role," "),N.yb(6),N.oc(N.Zb(62,24,"modules.dashboard.profile.blocked")),N.yb(7),N.pc(" ",N.Zb(69,26,"common.logic."+!!t.user.blocked)," "),N.yb(7),N.oc(N.Zb(76,28,"modules.dashboard.profile.activated")),N.yb(7),N.pc(" ",N.Zb(83,30,"common.logic."+!!t.user.activated)," "),N.yb(2),N.dc("ngIf",!t.user.activated))},directives:[a.q,a.S,a.Q,a.g,a.D,a.n,a.p,a.J,a.m,a.A,a.t,a.z,a.P,a.f,b.n],pipes:[v.c],styles:[""]}),S)}],V=((J=function t(){e(this,t)}).\u0275mod=N.Gb({type:J}),J.\u0275inj=N.Fb({factory:function(e){return new(e||J)},imports:[[c.k.forChild(P)],c.k]}),J),A=((X=function t(){e(this,t)}).\u0275mod=N.Gb({type:X}),X.\u0275inj=N.Fb({factory:function(e){return new(e||X)},imports:[[b.c,r.h,r.n,a.T,V,v.b.forChild({extend:!0})]]}),X)}}])}();