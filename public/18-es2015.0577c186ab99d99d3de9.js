(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"8auw":function(t,o,e){"use strict";e.r(o),e.d(o,"RoomPageModule",function(){return V});var n=e("ofXK"),i=e("3Pt+"),r=e("TEn/"),s=e("tyNb"),a=e("mrSG"),b=e("mgGq"),c=e("fXoL"),l=e("d6tv"),d=e("l7P3"),m=e("hlQ1"),u=e("sYmb");let p=(()=>{class t extends m.d{constructor(t,o){super("Room",t),this.translate=o}formFieldOptions(t){return this.formFieldsOptions.get(t)}get formFieldsOptions(){return new Map([["price",{title:this.translate.instant("modules.shared.formField.updatePrice"),subTitle:this.translate.instant("dif.price"),iconName:"business-outline",inputLable:this.translate.instant("modules.shared.formField.inputPrice"),inputType:"text",errors:new Map([["required","Required value"],["pattern","Entered wrong symbol"]]),formControl:{formState:"",validatorOrOpts:{updateOn:"change",validators:[i.o.pattern("[0-9]*"),i.o.required]}}}],["name",{title:this.translate.instant("modules.shared.formField.updateName"),subTitle:this.translate.instant("dif.name"),iconName:"cash-outline",inputLable:this.translate.instant("modules.shared.formField.inputName"),inputType:"text",errors:new Map([["required","Required value"],["pattern","Entered wrong symbol"],["minlength","Too short"],["maxlength","Too long"]]),formControl:{formState:"",validatorOrOpts:{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9\u0430-\u044f\u0410-\u042f\u0456\u0406\u0457\u0407\u0454\u0404_@#$%\u2116 '\"\\-]*$"),i.o.minLength(2),i.o.maxLength(60),i.o.required]}}}]])}}return t.\u0275fac=function(o){return new(o||t)(c.Rb(m.e),c.Rb(u.d))},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const f=["addRoomFormDirective"];function h(t,o){1&t&&c.Jb(0,"ion-progress-bar",19)}function N(t,o){if(1&t&&(c.Nb(0,"ion-text",20),c.nc(1),c.Yb(2,"json"),c.Mb()),2&t){const t=c.Xb(2);c.yb(1),c.pc(" ",c.Zb(2,1,t.addRoomForm.get("name").errors)," ")}}function M(t,o){if(1&t&&(c.Nb(0,"ion-text",20),c.nc(1),c.Yb(2,"json"),c.Mb()),2&t){const t=c.Xb(2);c.yb(1),c.pc(" ",c.Zb(2,1,t.addRoomForm.get("price").errors)," ")}}function g(t,o){if(1&t){const t=c.Ob();c.Nb(0,"form",3,4),c.Nb(2,"ion-grid"),c.Nb(3,"ion-row"),c.Nb(4,"ion-col",5),c.Nb(5,"ion-card"),c.Nb(6,"ion-card-header"),c.Nb(7,"ion-card-title",6),c.nc(8),c.Yb(9,"translate"),c.Yb(10,"lowercase"),c.Yb(11,"translate"),c.Mb(),c.mc(12,h,1,0,"ion-progress-bar",7),c.Yb(13,"async"),c.Mb(),c.Nb(14,"ion-card-content"),c.Nb(15,"ion-list"),c.Nb(16,"ion-item"),c.Jb(17,"ion-icon",8),c.Nb(18,"ion-label",9),c.nc(19),c.Yb(20,"translate"),c.Mb(),c.Jb(21,"ion-input",10),c.Mb(),c.mc(22,N,3,3,"ion-text",11),c.Nb(23,"ion-item",12),c.Jb(24,"ion-icon",13),c.Nb(25,"ion-label",9),c.nc(26),c.Yb(27,"translate"),c.Mb(),c.Jb(28,"ion-input",14),c.Mb(),c.mc(29,M,3,3,"ion-text",11),c.Mb(),c.Mb(),c.Mb(),c.Nb(30,"ion-row"),c.Nb(31,"ion-col",15),c.Nb(32,"ion-button",16),c.Vb("click",function(){return c.jc(t),c.Xb().dismiss()}),c.nc(33,"Cancel"),c.Mb(),c.Mb(),c.Nb(34,"ion-col",17),c.Nb(35,"ion-button",18),c.Vb("click",function(){return c.jc(t),c.Xb().onSignup()}),c.nc(36),c.Yb(37,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb()}if(2&t){const t=c.Xb();c.dc("formGroup",t.addRoomForm),c.yb(8),c.qc("",c.Zb(9,10,"elements.button.add")," ",c.Zb(10,12,c.Zb(11,14,"dif.room")),""),c.yb(4),c.dc("ngIf",c.Zb(13,16,t.loading$)),c.yb(7),c.oc(c.Zb(20,18,"dif.name")),c.yb(3),c.dc("ngIf",t.addRoomForm.get("name").touched&&t.addRoomForm.get("name").errors),c.yb(4),c.oc(c.Zb(27,20,"dif.price")),c.yb(3),c.dc("ngIf",t.addRoomForm.get("price").touched&&t.addRoomForm.get("price").errors),c.yb(6),c.dc("disabled","INVALID"===t.addRoomForm.status||"PENDING"===t.addRoomForm.status),c.yb(1),c.pc(" ",c.Zb(37,22,"elements.button.add")," ")}}let y=(()=>{class t{constructor(t,o,e,n){this.modalController=t,this.userService=o,this.store=e,this.roomService=n}ngOnInit(){this.loading$=this.roomService.loading$,this.addRoomForm=new i.e({name:new i.c(this.roomService.formFieldOptions("name").formControl.formState,this.roomService.formFieldOptions("name").formControl.validatorOrOpts,this.roomService.formFieldOptions("name").formControl.asyncValidator),price:new i.c(this.roomService.formFieldOptions("price").formControl.formState,this.roomService.formFieldOptions("price").formControl.validatorOrOpts,this.roomService.formFieldOptions("price").formControl.asyncValidator)})}dismiss(t){this.modalController.dismiss(t)}onSignup(){this.dismiss({name:this.addRoomForm.get("name").value,price:this.addRoomForm.get("price").value}),this.resetForm()}resetForm(){this.addRoomFormDirective&&this.addRoomFormDirective.resetForm()}}return t.\u0275fac=function(o){return new(o||t)(c.Ib(r.X),c.Ib(l.a),c.Ib(d.i),c.Ib(p))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-room-add"]],viewQuery:function(t,o){var e;1&t&&c.rc(f,!0),2&t&&c.hc(e=c.Wb())&&(o.addRoomFormDirective=e.first)},inputs:{company:"company"},decls:13,vars:12,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["addRoomFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["type","indeterminate","color","primary",4,"ngIf"],["name","business-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","name"],["class","input-error","color","danger",4,"ngIf"],["lines","none"],["name","cash-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","price"],["size","8"],["expand","block","fill","outline",3,"click"],["size","4"],["expand","block",3,"disabled","click"],["type","indeterminate","color","primary"],["color","danger",1,"input-error"]],template:function(t,o){1&t&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.nc(3),c.Yb(4,"translate"),c.Yb(5,"lowercase"),c.Yb(6,"translate"),c.Mb(),c.Nb(7,"ion-buttons",0),c.Nb(8,"ion-button",1),c.Vb("click",function(){return o.dismiss()}),c.nc(9),c.Yb(10,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(11,"ion-content"),c.mc(12,g,38,24,"form",2),c.Mb()),2&t&&(c.yb(3),c.qc("",c.Zb(4,4,"elements.button.add")," ",c.Zb(5,6,c.Zb(6,8,"dif.room")),""),c.yb(6),c.oc(c.Zb(10,10,"elements.button.close")),c.yb(3),c.dc("ngIf",o.addRoomForm))},directives:[r.q,r.T,r.R,r.g,r.f,r.n,n.n,i.p,i.l,i.f,r.p,r.J,r.m,r.h,r.j,r.l,r.i,r.A,r.t,r.r,r.z,r.s,r.db,i.k,i.d,r.G,r.Q],pipes:[u.c,n.k,n.b,n.g],styles:[""]}),t})();var F=e("XNiG"),v=e("vkgz"),O=e("eIep"),C=e("JX91"),I=e("pLZG"),w=e("IzEk"),k=e("1UXS");const S=["updateFormFieldDirective"];function x(t,o){if(1&t&&(c.Nb(0,"ion-text",17),c.nc(1),c.Yb(2,"translate"),c.Mb()),2&t){const t=o.$implicit;c.yb(1),c.pc(" ",c.Zb(2,1,"errors."+t)," ")}}function R(t,o){if(1&t&&(c.Lb(0),c.mc(1,x,3,3,"ion-text",16),c.Yb(2,"errorExtractor"),c.Kb()),2&t){const t=c.Xb(2);c.yb(1),c.dc("ngForOf",c.Zb(2,1,t.updateFormField.get("formControlName").errors))}}function j(t,o){if(1&t){const t=c.Ob();c.Nb(0,"form",3,4),c.Nb(2,"ion-grid"),c.Nb(3,"ion-row"),c.Nb(4,"ion-col",5),c.Nb(5,"ion-card"),c.Nb(6,"ion-card-header"),c.Nb(7,"ion-card-title",6),c.nc(8),c.Mb(),c.Mb(),c.Nb(9,"ion-card-content"),c.Nb(10,"ion-list"),c.Nb(11,"ion-item",7),c.Jb(12,"ion-icon",8),c.Nb(13,"ion-label",9),c.nc(14),c.Mb(),c.Jb(15,"ion-input",10),c.Mb(),c.mc(16,R,3,3,"ng-container",11),c.Mb(),c.Mb(),c.Mb(),c.Nb(17,"ion-row"),c.Nb(18,"ion-col",12),c.Nb(19,"ion-button",13),c.Vb("click",function(){return c.jc(t),c.Xb().formSubmitSubject$.next()}),c.nc(20," Ok "),c.Mb(),c.Mb(),c.Nb(21,"ion-col",14),c.Nb(22,"ion-button",15),c.Vb("click",function(){return c.jc(t),c.Xb().dismiss()}),c.nc(23," Cancel "),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb()}if(2&t){const t=c.Xb();c.dc("formGroup",t.updateFormField),c.yb(8),c.oc(t.data.subTitle),c.yb(4),c.dc("name",t.data.iconName),c.yb(2),c.oc(t.data.inputLable),c.yb(1),c.dc("type",t.data.inputType||"text"),c.yb(1),c.dc("ngIf",t.updateFormField.get("formControlName").dirty&&t.updateFormField.get("formControlName").errors),c.yb(3),c.dc("disabled","INVALID"===t.updateFormField.status||"PENDING"===t.updateFormField.status)}}let Z=(()=>{class t{constructor(t){this.modalController=t,this.formSubmitSubject$=new F.a}ngOnInit(){this.updateFormField=new i.e({formControlName:new i.c(this.data.formControl.formState,this.data.formControl.validatorOrOpts,this.data.formControl.asyncValidator)}),this.formSubmitSubject$.pipe(Object(v.a)(()=>this.updateFormField.markAsDirty()),Object(O.a)(()=>this.updateFormField.statusChanges.pipe(Object(C.a)(this.updateFormField.status),Object(I.a)(t=>"PENDING"!==t),Object(w.a)(1))),Object(I.a)(t=>"VALID"===t)).subscribe(t=>this.onConfirm())}dismiss(t){this.modalController.dismiss(t)}onConfirm(){this.dismiss(this.updateFormField.get("formControlName").value),this.resetForm()}resetForm(){this.updateFormFieldDirective&&this.updateFormFieldDirective.resetForm()}}return t.\u0275fac=function(o){return new(o||t)(c.Ib(r.X))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-update-form-field"]],viewQuery:function(t,o){var e;1&t&&c.rc(S,!0),2&t&&c.hc(e=c.Wb())&&(o.updateFormFieldDirective=e.first)},inputs:{data:"data"},decls:10,vars:5,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["updateFormFieldDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["slot","start",1,"ion-align-self-center",3,"name"],["position","floating"],["autocomplete","","autocorrect","","formControlName","formControlName",3,"type"],[4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["class","input-error","color","danger",4,"ngFor","ngForOf"],["color","danger",1,"input-error"]],template:function(t,o){1&t&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.nc(3),c.Mb(),c.Nb(4,"ion-buttons",0),c.Nb(5,"ion-button",1),c.Vb("click",function(){return o.dismiss()}),c.nc(6),c.Yb(7,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(8,"ion-content"),c.mc(9,j,24,7,"form",2),c.Mb()),2&t&&(c.yb(3),c.oc(o.data.title),c.yb(3),c.oc(c.Zb(7,3,"elements.button.close")),c.yb(3),c.dc("ngIf",o.updateFormField))},directives:[r.q,r.T,r.R,r.g,r.f,r.n,n.n,i.p,i.l,i.f,r.p,r.J,r.m,r.h,r.j,r.l,r.i,r.A,r.t,r.r,r.z,r.s,r.db,i.k,i.d,n.m,r.Q],pipes:[u.c,k.a],styles:[""]}),t})();function Y(t,o){1&t&&(c.Lb(0),c.nc(1," Loading.."),c.Kb())}function X(t,o){if(1&t){const t=c.Ob();c.Lb(0),c.Nb(1,"ion-item-sliding"),c.Nb(2,"ion-item"),c.Nb(3,"ion-label"),c.Nb(4,"ion-row"),c.Nb(5,"ion-col",7),c.Nb(6,"ion-item",8),c.Nb(7,"ion-label"),c.Nb(8,"h4"),c.nc(9),c.Yb(10,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(11,"ion-col",9),c.Nb(12,"ion-item",8),c.Nb(13,"ion-label"),c.Nb(14,"ion-text",10),c.nc(15),c.Mb(),c.Mb(),c.Nb(16,"ion-button",5),c.Vb("click",function(){c.jc(t);const e=o.$implicit;return c.Xb().update(e._id,"name")}),c.nc(17),c.Yb(18,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(19,"ion-row"),c.Nb(20,"ion-col",7),c.Nb(21,"ion-item",8),c.Nb(22,"ion-label"),c.Nb(23,"h4"),c.nc(24),c.Yb(25,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(26,"ion-col",9),c.Nb(27,"ion-item",8),c.Nb(28,"ion-label"),c.Nb(29,"ion-text",10),c.nc(30),c.Mb(),c.Mb(),c.Nb(31,"ion-button",5),c.Vb("click",function(){c.jc(t);const e=o.$implicit;return c.Xb().update(e._id,"price")}),c.nc(32),c.Yb(33,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(34,"ion-item-options",11),c.Nb(35,"ion-item-option",12),c.Vb("click",function(){c.jc(t);const e=o.$implicit;return c.Xb().presentAlert(e._id,e.name)}),c.Jb(36,"ion-icon",13),c.Mb(),c.Mb(),c.Mb(),c.Kb()}if(2&t){const t=o.$implicit;c.yb(9),c.oc(c.Zb(10,6,"dif.name")),c.yb(6),c.pc(" ",t.name," "),c.yb(2),c.pc(" ",c.Zb(18,8,"elements.button.update")," "),c.yb(7),c.oc(c.Zb(25,10,"dif.price")),c.yb(6),c.pc(" ",t.price," "),c.yb(2),c.pc(" ",c.Zb(33,12,"elements.button.update")," ")}}const D=[{path:"",component:(()=>{class t{constructor(t,o,e,n,i){this.roomService=t,this.store=o,this.modalController=e,this.alertController=n,this.translate=i,this.user=null,this.company=null}ngOnInit(){this.store.select(b.a).subscribe(t=>{t&&(this.company=t,this.roomService.getAll())}),this.store.select(b.b).subscribe(t=>{t&&(this.user=t)}),this.loading$=this.roomService.loading$,this.roomService.entities$.subscribe(t=>this.rooms=t)}presentAlert(t,o){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.alertController.create({header:this.translate.instant("elements.button.delete")+" "+this.translate.instant("dif.room")+": "+o,subHeader:this.translate.instant("modules.dashboard.room.deleteAttention"),message:this.translate.instant("dif.sure"),buttons:[{text:"Cancel",role:"cancel",handler:t=>{}},{text:"Okay",handler:()=>this.remove(t),cssClass:"color_danger"}]});yield e.present()})}presentModal(t,o){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:t,componentProps:o});return yield e.present(),yield e.onWillDismiss()})}update(t,o){return Object(a.a)(this,void 0,void 0,function*(){const{data:e}=yield this.presentModal(Z,{data:this.roomService.formFieldOptions(o)});e&&this.roomService.update({_id:t,[o]:e}).subscribe(t=>console.log("update result",t),t=>console.log("update error",t))})}add(){return Object(a.a)(this,void 0,void 0,function*(){const{data:t}=yield this.presentModal(y,{company:this.company});t&&this.roomService.add(t).subscribe(t=>console.log("add result",t),t=>console.log("add error",t))})}remove(t){return this.roomService.delete(t)}}return t.\u0275fac=function(o){return new(o||t)(c.Ib(p),c.Ib(d.i),c.Ib(r.X),c.Ib(r.a),c.Ib(u.d))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-room"]],decls:25,vars:14,consts:[[4,"ngIf"],["slot","end"],["menu","dashboard-menu"],["size-md","6","offset-md","3"],[1,"ion-text-center"],[3,"click"],[4,"ngFor","ngForOf"],["size","4",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],["color","primary"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"]],template:function(t,o){1&t&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.nc(3),c.Yb(4,"translate"),c.mc(5,Y,2,0,"ng-container",0),c.Yb(6,"async"),c.Mb(),c.Nb(7,"ion-buttons",1),c.Jb(8,"ion-menu-button",2),c.Mb(),c.Mb(),c.Mb(),c.Nb(9,"ion-content"),c.Nb(10,"ion-grid"),c.Nb(11,"ion-row"),c.Nb(12,"ion-col",3),c.Nb(13,"h2",4),c.nc(14),c.Mb(),c.Nb(15,"ion-list"),c.Nb(16,"ion-list-header"),c.Nb(17,"ion-label"),c.Nb(18,"ion-note",1),c.nc(19),c.Yb(20,"translate"),c.Mb(),c.Mb(),c.Nb(21,"ion-button",5),c.Vb("click",function(){return o.add()}),c.nc(22),c.Yb(23,"translate"),c.Mb(),c.Mb(),c.mc(24,X,37,14,"ng-container",6),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&t&&(c.yb(3),c.pc("",c.Zb(4,6,"modules.dashboard.room.title")," "),c.yb(2),c.dc("ngIf",c.Zb(6,8,o.loading$)),c.yb(9),c.oc(null==o.company?null:o.company.companyName),c.yb(5),c.pc(" ",c.Zb(20,10,"elements.button.slideToDelete")," "),c.yb(3),c.oc(c.Zb(23,12,"elements.button.add")),c.yb(2),c.dc("ngForOf",o.rooms))},directives:[r.q,r.T,r.R,n.n,r.g,r.D,r.n,r.p,r.J,r.m,r.A,r.B,r.z,r.F,r.f,n.m,r.y,r.t,r.Q,r.x,r.w,r.r],pipes:[u.c,n.b],styles:[""]}),t})()}];let $=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(o){return new(o||t)},imports:[[s.k.forChild(D)],s.k]}),t})();var G=e("FpXt");let V=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(o){return new(o||t)},imports:[[n.c,i.h,i.n,r.U,$,G.a,u.b.forChild({extend:!0})]]}),t})()}}]);