(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"L/5t":function(t,e,o){"use strict";o.r(e),o.d(e,"ProfilePageModule",function(){return T});var i=o("ofXK"),n=o("3Pt+"),b=o("TEn/"),r=o("tyNb"),a=o("mrSG"),c=o("z6cu"),s=o("Cfvw"),l=o("JIr8"),m=o("eIep"),d=o("mYIz"),u=o("mgGq"),p=o("fXoL"),N=o("d6tv"),f=o("sYmb"),M=o("1UXS");const h=["activateEmailCodeFormDirective"];function v(t,e){if(1&t&&(p.Nb(0,"ion-text",17),p.nc(1),p.Yb(2,"translate"),p.Mb()),2&t){const t=e.$implicit;p.yb(1),p.pc(" ",p.Zb(2,1,"errors."+t)," ")}}function y(t,e){if(1&t&&(p.Lb(0),p.mc(1,v,3,3,"ion-text",16),p.Yb(2,"errorExtractor"),p.Kb()),2&t){const t=p.Xb(2);p.yb(1),p.dc("ngForOf",p.Zb(2,1,t.activateEmailCodeForm.get("code").errors))}}function g(t,e){if(1&t){const t=p.Ob();p.Nb(0,"form",3,4),p.Nb(2,"ion-grid"),p.Nb(3,"ion-row"),p.Nb(4,"ion-col",5),p.Nb(5,"ion-card"),p.Nb(6,"ion-card-header"),p.Nb(7,"ion-card-title",6),p.nc(8),p.Yb(9,"translate"),p.Mb(),p.Nb(10,"ion-card-subtitle",6),p.nc(11),p.Yb(12,"translate"),p.Mb(),p.Mb(),p.Nb(13,"ion-card-content"),p.Nb(14,"ion-list"),p.Nb(15,"ion-item",7),p.Jb(16,"ion-icon",8),p.Nb(17,"ion-label",9),p.nc(18),p.Yb(19,"translate"),p.Mb(),p.Jb(20,"ion-input",10),p.Mb(),p.mc(21,y,3,3,"ng-container",11),p.Mb(),p.Mb(),p.Mb(),p.Nb(22,"ion-row"),p.Nb(23,"ion-col",12),p.Nb(24,"ion-button",13),p.Vb("click",function(){return p.jc(t),p.Xb().activate()}),p.nc(25),p.Yb(26,"translate"),p.Mb(),p.Mb(),p.Nb(27,"ion-col",14),p.Nb(28,"ion-button",15),p.Vb("click",function(){return p.jc(t),p.Xb().dismiss(null)}),p.nc(29," Cancel "),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()}if(2&t){const t=p.Xb();p.dc("formGroup",t.activateEmailCodeForm),p.yb(8),p.pc("",p.Zb(9,7,"elements.button.activate")," email"),p.yb(3),p.pc("",p.Zb(12,9,"modules.dashboard.profile.activationText")," "),p.yb(7),p.oc(p.Zb(19,11,"modules.dashboard.profile.code")),p.yb(3),p.dc("ngIf",t.activateEmailCodeForm.get("code").dirty&&t.activateEmailCodeForm.get("code").errors),p.yb(3),p.dc("disabled","INVALID"===t.activateEmailCodeForm.status||"PENDING"===t.activateEmailCodeForm.status),p.yb(1),p.pc(" ",p.Zb(26,13,"elements.button.update")," ")}}let F=(()=>{class t{constructor(t,e){this.modalController=t,this.userService=e}ngOnInit(){this.activateEmailCodeForm=new n.e({code:new n.c("",{updateOn:"change",validators:[n.o.pattern("^[0-9]+$"),n.o.minLength(2),n.o.maxLength(10),n.o.required]})})}dismiss(t){this.modalController.dismiss(t)}activate(){this.dismiss({code:this.activateEmailCodeForm.get("code").value}),this.resetForm()}resetForm(){this.activateEmailCodeFormDirective&&this.activateEmailCodeFormDirective.resetForm()}}return t.\u0275fac=function(e){return new(e||t)(p.Ib(b.X),p.Ib(N.a))},t.\u0275cmp=p.Cb({type:t,selectors:[["app-update-activation"]],viewQuery:function(t,e){var o;1&t&&p.rc(h,!0),2&t&&p.hc(o=p.Wb())&&(e.activateEmailCodeFormDirective=o.first)},decls:11,vars:7,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["activateEmailCodeFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","number","autocomplete","","autocorrect","","formControlName","code"],[4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["class","input-error","color","danger",4,"ngFor","ngForOf"],["color","danger",1,"input-error"]],template:function(t,e){1&t&&(p.Nb(0,"ion-header"),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-title"),p.nc(3),p.Yb(4,"translate"),p.Mb(),p.Nb(5,"ion-buttons",0),p.Nb(6,"ion-button",1),p.Vb("click",function(){return e.dismiss(null)}),p.nc(7),p.Yb(8,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(9,"ion-content"),p.mc(10,g,30,15,"form",2),p.Mb()),2&t&&(p.yb(3),p.pc("",p.Zb(4,3,"elements.button.activate")," email"),p.yb(4),p.oc(p.Zb(8,5,"elements.button.close")),p.yb(3),p.dc("ngIf",e.activateEmailCodeForm))},directives:[b.q,b.T,b.R,b.g,b.f,b.n,i.n,n.p,n.l,n.f,b.p,b.J,b.m,b.h,b.j,b.l,b.k,b.i,b.A,b.t,b.r,b.z,b.s,b.Z,n.k,n.d,i.m,b.Q],pipes:[f.c,M.a],styles:[""]}),t})();var E=o("XNiG"),w=o("vkgz"),C=o("JX91"),I=o("pLZG"),k=o("IzEk");const Y=["updateEmailFormDirective"];function Z(t,e){if(1&t&&(p.Nb(0,"ion-text",17),p.nc(1),p.Yb(2,"translate"),p.Mb()),2&t){const t=e.$implicit;p.yb(1),p.pc(" ",p.Zb(2,1,"errors."+t)," ")}}function j(t,e){if(1&t&&(p.Lb(0),p.mc(1,Z,3,3,"ion-text",16),p.Yb(2,"errorExtractor"),p.Kb()),2&t){const t=p.Xb(2);p.yb(1),p.dc("ngForOf",p.Zb(2,1,t.updateEmailForm.get("email").errors))}}function O(t,e){if(1&t){const t=p.Ob();p.Nb(0,"form",3,4),p.Nb(2,"ion-grid"),p.Nb(3,"ion-row"),p.Nb(4,"ion-col",5),p.Nb(5,"ion-card"),p.Nb(6,"ion-card-header"),p.Nb(7,"ion-card-title",6),p.nc(8),p.Yb(9,"translate"),p.Mb(),p.Mb(),p.Nb(10,"ion-card-content"),p.Nb(11,"ion-list"),p.Nb(12,"ion-item",7),p.Jb(13,"ion-icon",8),p.Nb(14,"ion-label",9),p.nc(15,"Email"),p.Mb(),p.Jb(16,"ion-input",10),p.Mb(),p.mc(17,j,3,3,"ng-container",11),p.Mb(),p.Mb(),p.Mb(),p.Nb(18,"ion-row"),p.Nb(19,"ion-col",12),p.Nb(20,"ion-button",13),p.Vb("click",function(){return p.jc(t),p.Xb().formSubmitSubject$.next()}),p.nc(21),p.Yb(22,"translate"),p.Mb(),p.Mb(),p.Nb(23,"ion-col",14),p.Nb(24,"ion-button",15),p.Vb("click",function(){return p.jc(t),p.Xb().dismiss(null)}),p.nc(25," Cancel "),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()}if(2&t){const t=p.Xb();p.dc("formGroup",t.updateEmailForm),p.yb(8),p.pc("",p.Zb(9,5,"elements.button.update")," email"),p.yb(9),p.dc("ngIf",t.updateEmailForm.get("email").dirty&&t.updateEmailForm.get("email").errors),p.yb(3),p.dc("disabled","INVALID"===t.updateEmailForm.status||"PENDING"===t.updateEmailForm.status),p.yb(1),p.pc(" ",p.Zb(22,7,"elements.button.update")," ")}}let x=(()=>{class t{constructor(t,e){this.modalController=t,this.userService=e,this.formSubmitSubject$=new E.a}ngOnInit(){this.updateEmailForm=new n.e({email:this.userService.emailFormControl("")}),this.formSubmitSubject$.pipe(Object(w.a)(()=>this.updateEmailForm.markAsDirty()),Object(w.a)(()=>console.log("tap")),Object(m.a)(()=>this.updateEmailForm.statusChanges.pipe(Object(C.a)(this.updateEmailForm.status),Object(I.a)(t=>(console.log("status",t),"PENDING"!==t)),Object(k.a)(1))),Object(I.a)(t=>"VALID"===t)).subscribe(t=>this.onUpdate())}dismiss(t){this.modalController.dismiss(t)}onUpdate(){this.dismiss({email:this.updateEmailForm.get("email").value}),this.resetForm()}resetForm(){this.updateEmailFormDirective&&this.updateEmailFormDirective.resetForm()}}return t.\u0275fac=function(e){return new(e||t)(p.Ib(b.X),p.Ib(N.a))},t.\u0275cmp=p.Cb({type:t,selectors:[["app-update-email"]],viewQuery:function(t,e){var o;1&t&&p.rc(Y,!0),2&t&&p.hc(o=p.Wb())&&(e.updateEmailFormDirective=o.first)},inputs:{email:"email"},decls:11,vars:7,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["updateEmailFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","email","autocomplete","","autocorrect","","formControlName","email"],[4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["class","input-error","color","danger",4,"ngFor","ngForOf"],["color","danger",1,"input-error"]],template:function(t,e){1&t&&(p.Nb(0,"ion-header"),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-title"),p.nc(3),p.Yb(4,"translate"),p.Mb(),p.Nb(5,"ion-buttons",0),p.Nb(6,"ion-button",1),p.Vb("click",function(){return e.dismiss()}),p.nc(7),p.Yb(8,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(9,"ion-content"),p.mc(10,O,26,9,"form",2),p.Mb()),2&t&&(p.yb(3),p.pc("",p.Zb(4,3,"elements.button.update")," Email"),p.yb(4),p.oc(p.Zb(8,5,"elements.button.close")),p.yb(3),p.dc("ngIf",e.updateEmailForm))},directives:[b.q,b.T,b.R,b.g,b.f,b.n,i.n,n.p,n.l,n.f,b.p,b.J,b.m,b.h,b.j,b.l,b.i,b.A,b.t,b.r,b.z,b.s,b.db,n.k,n.d,i.m,b.Q],pipes:[f.c,M.a],styles:[""]}),t})();var P=o("AytR"),D=o("l7P3");let V=(()=>{class t{constructor(t,e,o,i){this.el=t,this.vcr=e,this.templateRef=o,this.userService=i,this.hasView=!1}set appPermission(t){this.userService.displayGuard(t).subscribe(t=>{if(t&&!this.hasView)this.vcr.createEmbeddedView(this.templateRef),this.hasView=!0;else{if(t&&this.hasView)return;this.vcr.clear(),this.hasView=!1}})}}return t.\u0275fac=function(e){return new(e||t)(p.Ib(p.m),p.Ib(p.P),p.Ib(p.L),p.Ib(N.a))},t.\u0275dir=p.Db({type:t,selectors:[["","appPermission",""]],inputs:{appPermission:"appPermission"}}),t})();function X(t,e){1&t&&(p.Nb(0,"p",3),p.Nb(1,"ion-text",12),p.nc(2),p.Yb(3,"translate"),p.Mb(),p.Mb()),2&t&&(p.yb(2),p.oc(p.Zb(3,1,"modules.dashboard.profile.activateWarning")))}function z(t,e){if(1&t){const t=p.Ob();p.Nb(0,"ion-button",9),p.Vb("click",function(){return p.jc(t),p.Xb().activate()}),p.nc(1),p.Yb(2,"translate"),p.Mb()}2&t&&(p.yb(1),p.pc(" ",p.Zb(2,1,"elements.button.activate")," "))}function G(t,e){if(1&t){const t=p.Ob();p.Nb(0,"ion-row"),p.Nb(1,"ion-col",13),p.Nb(2,"ion-item",6),p.Nb(3,"ion-button",14),p.Vb("click",function(){p.jc(t);const e=p.Xb();return e.presentAlert(e.company.companyName)}),p.nc(4),p.Yb(5,"translate"),p.Yb(6,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb()}2&t&&(p.yb(4),p.qc("",p.Zb(5,2,"elements.button.delete")," ",p.Zb(6,4,"modules.dashboard.profile.company"),""))}const S=function(){return{component:"ProfilePage",item:"msgNotActivated",condition:!1}},A=function(){return{component:"ProfilePage",item:"btnRemoveCompany"}},J=[{path:"",component:(()=>{class t{constructor(t,e,o,i,n){this.store=t,this.modalController=e,this.userService=o,this.alertController=i,this.translate=n,this.user=null,this.environment=P.a}ngOnInit(){this.store.select(u.a).subscribe(t=>{this.company=t}),this.store.select(u.b).subscribe(t=>{this.user=t})}presentModal(t,e){return Object(a.a)(this,void 0,void 0,function*(){const o=yield this.modalController.create({component:t,componentProps:e});return yield o.present(),yield o.onWillDismiss()})}presentAlert(t){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.alertController.create({header:this.translate.instant("elements.button.delete")+" "+this.translate.instant("modules.dashboard.profile.company")+": "+t,subHeader:this.translate.instant("modules.dashboard.profile.deleteAttention"),message:this.translate.instant("dif.sure"),buttons:[{text:"Cancel",role:"cancel",handler:t=>{}},{text:"Okay",handler:()=>this.removeCompany(),cssClass:"color_danger"}]});yield e.present()})}removeCompany(){this.store.dispatch(new d.q)}activate(){this.userService.sendActivationCode(this.user._id).pipe(Object(l.a)(t=>Object(c.a)(t)),Object(m.a)(t=>Object(s.a)(this.presentModal(F)))).subscribe(t=>{var e;this.store.dispatch(new d.a({_id:this.user._id,code:null===(e=t.data)||void 0===e?void 0:e.code}))},t=>console.log("err activate",t))}updateEmail(){return Object(a.a)(this,void 0,void 0,function*(){const{data:t}=yield this.presentModal(x);t&&this.store.dispatch(new d.t({_id:this.user._id,email:t.email}))})}}return t.\u0275fac=function(e){return new(e||t)(p.Ib(D.i),p.Ib(b.X),p.Ib(N.a),p.Ib(b.a),p.Ib(f.d))},t.\u0275cmp=p.Cb({type:t,selectors:[["app-profile"]],decls:87,vars:37,consts:[["slot","end"],["menu","dashboard-menu"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["class","ion-text-center",4,"appPermission"],["size","4",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],["color","primary"],[3,"click"],[3,"click",4,"ngIf"],[4,"appPermission"],["color","danger"],[1,"ion-no-padding"],["color","danger","fill","outline",3,"click"]],template:function(t,e){1&t&&(p.Nb(0,"ion-header"),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-title"),p.nc(3),p.Yb(4,"translate"),p.Mb(),p.Nb(5,"ion-buttons",0),p.Jb(6,"ion-menu-button",1),p.Mb(),p.Mb(),p.Mb(),p.Nb(7,"ion-content"),p.Nb(8,"ion-grid"),p.Nb(9,"ion-row"),p.Nb(10,"ion-col",2),p.Nb(11,"h2",3),p.nc(12),p.Mb(),p.mc(13,X,4,3,"p",4),p.Nb(14,"ion-list"),p.Nb(15,"ion-row"),p.Nb(16,"ion-col",5),p.Nb(17,"ion-item",6),p.Nb(18,"ion-label"),p.Nb(19,"h4"),p.nc(20),p.Yb(21,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(22,"ion-col",7),p.Nb(23,"ion-item",6),p.Nb(24,"ion-label"),p.Nb(25,"ion-text",8),p.Nb(26,"p"),p.nc(27),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(28,"ion-row"),p.Nb(29,"ion-col",5),p.Nb(30,"ion-item",6),p.Nb(31,"ion-label"),p.Nb(32,"h4"),p.nc(33),p.Yb(34,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(35,"ion-col",7),p.Nb(36,"ion-item",6),p.Nb(37,"ion-label"),p.Nb(38,"ion-text",8),p.Nb(39,"p"),p.nc(40),p.Mb(),p.Mb(),p.Mb(),p.Nb(41,"ion-button",9),p.Vb("click",function(){return e.updateEmail()}),p.nc(42),p.Yb(43,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(44,"ion-row"),p.Nb(45,"ion-col",5),p.Nb(46,"ion-item",6),p.Nb(47,"ion-label"),p.Nb(48,"h4"),p.nc(49),p.Yb(50,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(51,"ion-col",7),p.Nb(52,"ion-item",6),p.Nb(53,"ion-label"),p.Nb(54,"ion-text",8),p.Nb(55,"p"),p.nc(56),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(57,"ion-row"),p.Nb(58,"ion-col",5),p.Nb(59,"ion-item",6),p.Nb(60,"ion-label"),p.Nb(61,"h4"),p.nc(62),p.Yb(63,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(64,"ion-col",7),p.Nb(65,"ion-item",6),p.Nb(66,"ion-label"),p.Nb(67,"ion-text",8),p.Nb(68,"p"),p.nc(69),p.Yb(70,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(71,"ion-row"),p.Nb(72,"ion-col",5),p.Nb(73,"ion-item",6),p.Nb(74,"ion-label"),p.Nb(75,"h4"),p.nc(76),p.Yb(77,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(78,"ion-col",7),p.Nb(79,"ion-item",6),p.Nb(80,"ion-label"),p.Nb(81,"ion-text",8),p.Nb(82,"p"),p.nc(83),p.Yb(84,"translate"),p.Mb(),p.Mb(),p.Mb(),p.mc(85,z,3,3,"ion-button",10),p.Mb(),p.Mb(),p.Mb(),p.mc(86,G,7,6,"ion-row",11),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()),2&t&&(p.yb(3),p.qc("",p.Zb(4,17,"modules.dashboard.profile.title")," -version ",e.environment.appVersion,""),p.yb(9),p.oc(null==e.company?null:e.company.companyName),p.yb(1),p.dc("appPermission",p.fc(35,S)),p.yb(7),p.oc(p.Zb(21,19,"modules.dashboard.profile.login")),p.yb(7),p.pc(" ",e.user.login," "),p.yb(6),p.oc(p.Zb(34,21,"modules.dashboard.profile.email")),p.yb(7),p.pc(" ",e.user.email," "),p.yb(2),p.pc(" ",p.Zb(43,23,"elements.button.update")," "),p.yb(7),p.oc(p.Zb(50,25,"modules.dashboard.profile.role")),p.yb(7),p.pc(" ",e.user.role," "),p.yb(6),p.oc(p.Zb(63,27,"modules.dashboard.profile.blocked")),p.yb(7),p.pc(" ",p.Zb(70,29,"common.logic."+!!e.user.blocked)," "),p.yb(7),p.oc(p.Zb(77,31,"modules.dashboard.profile.activated")),p.yb(7),p.pc(" ",p.Zb(84,33,"common.logic."+!!e.user.activated)," "),p.yb(2),p.dc("ngIf",!e.user.activated),p.yb(1),p.dc("appPermission",p.fc(36,A)))},directives:[b.q,b.T,b.R,b.g,b.D,b.n,b.p,b.J,b.m,V,b.A,b.t,b.z,b.Q,b.f,i.n],pipes:[f.c],styles:[""]}),t})()}];let L=(()=>{class t{}return t.\u0275mod=p.Gb({type:t}),t.\u0275inj=p.Fb({factory:function(e){return new(e||t)},imports:[[r.k.forChild(J)],r.k]}),t})();var q=o("FUS3"),R=o("iTUp");let T=(()=>{class t{}return t.\u0275mod=p.Gb({type:t}),t.\u0275inj=p.Fb({factory:function(e){return new(e||t)},imports:[[i.c,n.h,n.n,b.U,L,f.b.forChild({extend:!0}),q.a,R.a]]}),t})()}}]);