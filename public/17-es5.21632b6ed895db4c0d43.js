!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"L/5t":function(t,o,n){"use strict";n.r(o),n.d(o,"ProfilePageModule",function(){return L});var r=n("ofXK"),b=n("3Pt+"),c=n("TEn/"),a=n("tyNb"),l=n("mrSG"),s=n("z6cu"),u=n("Cfvw"),m=n("JIr8"),d=n("eIep"),f=n("mYIz"),p=n("mgGq"),N=n("fXoL"),M=n("d6tv"),v=["activateEmailCodeFormDirective"];function h(e,t){if(1&e&&(N.Nb(0,"ion-text",16),N.mc(1),N.Yb(2,"json"),N.Mb()),2&e){var i=N.Xb(2);N.yb(1),N.oc(" ",N.Zb(2,1,i.activateEmailCodeForm.get("code").errors)," ")}}function g(e,t){if(1&e){var i=N.Ob();N.Nb(0,"form",3,4),N.Nb(2,"ion-grid"),N.Nb(3,"ion-row"),N.Nb(4,"ion-col",5),N.Nb(5,"ion-card"),N.Nb(6,"ion-card-header"),N.Nb(7,"ion-card-title",6),N.mc(8,"Activate email"),N.Mb(),N.Nb(9,"ion-card-subtitle",6),N.mc(10,"Please enter activation code from email"),N.Mb(),N.Mb(),N.Nb(11,"ion-card-content"),N.Nb(12,"ion-list"),N.Nb(13,"ion-item",7),N.Jb(14,"ion-icon",8),N.Nb(15,"ion-label",9),N.mc(16,"Code"),N.Mb(),N.Jb(17,"ion-input",10),N.Mb(),N.lc(18,h,3,3,"ion-text",11),N.Mb(),N.Mb(),N.Mb(),N.Nb(19,"ion-row"),N.Nb(20,"ion-col",12),N.Nb(21,"ion-button",13),N.Vb("click",function(){return N.ic(i),N.Xb().activate()}),N.mc(22," Activate "),N.Mb(),N.Mb(),N.Nb(23,"ion-col",14),N.Nb(24,"ion-button",15),N.Vb("click",function(){return N.ic(i),N.Xb().dismiss(null)}),N.mc(25," Cancel "),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()}if(2&e){var o=N.Xb();N.dc("formGroup",o.activateEmailCodeForm),N.yb(18),N.dc("ngIf",o.activateEmailCodeForm.get("code").touched&&o.activateEmailCodeForm.get("code").errors),N.yb(3),N.dc("disabled","INVALID"===o.activateEmailCodeForm.status||"PENDING"===o.activateEmailCodeForm.status)}}var k,y=((k=function(){function t(i,o){e(this,t),this.modalController=i,this.userService=o}return i(t,[{key:"ngOnInit",value:function(){this.activateEmailCodeForm=new b.e({code:new b.c("",{updateOn:"change",validators:[b.o.pattern("^[0-9]{2,10}$"),b.o.minLength(2),b.o.maxLength(10),b.o.required]})})}},{key:"dismiss",value:function(e){console.log("code data",e),this.modalController.dismiss(e)}},{key:"activate",value:function(){this.dismiss({code:this.activateEmailCodeForm.get("code").value}),this.resetForm()}},{key:"resetForm",value:function(){this.activateEmailCodeFormDirective&&this.activateEmailCodeFormDirective.resetForm()}}]),t}()).\u0275fac=function(e){return new(e||k)(N.Ib(c.X),N.Ib(M.a))},k.\u0275cmp=N.Cb({type:k,selectors:[["app-update-activation"]],viewQuery:function(e,t){var i;1&e&&N.qc(v,!0),2&e&&N.gc(i=N.Wb())&&(t.activateEmailCodeFormDirective=i.first)},decls:9,vars:1,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["activateEmailCodeFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","number","autocomplete","","autocorrect","","formControlName","code"],["class","input-error","color","danger",4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["color","danger",1,"input-error"]],template:function(e,t){1&e&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.mc(3,"Activate email"),N.Mb(),N.Nb(4,"ion-buttons",0),N.Nb(5,"ion-button",1),N.Vb("click",function(){return t.dismiss(null)}),N.mc(6,"close"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(7,"ion-content"),N.lc(8,g,26,3,"form",2),N.Mb()),2&e&&(N.yb(8),N.dc("ngIf",t.activateEmailCodeForm))},directives:[c.q,c.T,c.R,c.g,c.f,c.n,r.n,b.p,b.l,b.f,c.p,c.J,c.m,c.h,c.j,c.l,c.k,c.i,c.A,c.t,c.r,c.z,c.s,c.Z,b.k,b.d,c.Q],pipes:[r.g],styles:[""]}),k),E=n("XNiG"),F=n("vkgz"),w=n("JX91"),C=n("pLZG"),I=n("IzEk"),x=["updateEmailFormDirective"];function j(e,t){if(1&e&&(N.Nb(0,"ion-text",16),N.mc(1),N.Yb(2,"json"),N.Mb()),2&e){var i=N.Xb(2);N.yb(1),N.oc(" ",N.Zb(2,1,i.updateEmailForm.get("email").errors)," ")}}function O(e,t){if(1&e){var i=N.Ob();N.Nb(0,"form",3,4),N.Nb(2,"ion-grid"),N.Nb(3,"ion-row"),N.Nb(4,"ion-col",5),N.Nb(5,"ion-card"),N.Nb(6,"ion-card-header"),N.Nb(7,"ion-card-title",6),N.mc(8,"Update email"),N.Mb(),N.Mb(),N.Nb(9,"ion-card-content"),N.Nb(10,"ion-list"),N.Nb(11,"ion-item",7),N.Jb(12,"ion-icon",8),N.Nb(13,"ion-label",9),N.mc(14,"Email"),N.Mb(),N.Jb(15,"ion-input",10),N.Mb(),N.lc(16,j,3,3,"ion-text",11),N.Mb(),N.Mb(),N.Mb(),N.Nb(17,"ion-row"),N.Nb(18,"ion-col",12),N.Nb(19,"ion-button",13),N.Vb("click",function(){return N.ic(i),N.Xb().formSubmitSubject$.next()}),N.mc(20," Update "),N.Mb(),N.Mb(),N.Nb(21,"ion-col",14),N.Nb(22,"ion-button",15),N.Vb("click",function(){return N.ic(i),N.Xb().dismiss(null)}),N.mc(23," Cancel "),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()}if(2&e){var o=N.Xb();N.dc("formGroup",o.updateEmailForm),N.yb(16),N.dc("ngIf",o.updateEmailForm.get("email").touched&&o.updateEmailForm.get("email").errors),N.yb(3),N.dc("disabled","INVALID"===o.updateEmailForm.status||"PENDING"===o.updateEmailForm.status)}}var D,z=((D=function(){function t(i,o){e(this,t),this.modalController=i,this.userService=o,this.formSubmitSubject$=new E.a}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.updateEmailForm=new b.e({email:this.userService.emailFormControl("")}),this.formSubmitSubject$.pipe(Object(F.a)(function(){return e.updateEmailForm.markAsDirty()}),Object(d.a)(function(){return e.updateEmailForm.statusChanges.pipe(Object(w.a)(e.updateEmailForm.status),Object(C.a)(function(e){return"PENDING"!==e}),Object(I.a)(1))}),Object(C.a)(function(e){return"VALID"===e})).subscribe(function(t){return e.onUpdate()})}},{key:"dismiss",value:function(e){console.log("data form",e),this.modalController.dismiss(e)}},{key:"onUpdate",value:function(){this.dismiss({email:this.updateEmailForm.get("email").value}),this.resetForm()}},{key:"resetForm",value:function(){this.updateEmailFormDirective&&this.updateEmailFormDirective.resetForm()}}]),t}()).\u0275fac=function(e){return new(e||D)(N.Ib(c.X),N.Ib(M.a))},D.\u0275cmp=N.Cb({type:D,selectors:[["app-update-email"]],viewQuery:function(e,t){var i;1&e&&N.qc(x,!0),2&e&&N.gc(i=N.Wb())&&(t.updateEmailFormDirective=i.first)},inputs:{email:"email"},decls:9,vars:1,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["updateEmailFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["class","input-error","color","danger",4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["color","danger",1,"input-error"]],template:function(e,t){1&e&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.mc(3,"Update Email"),N.Mb(),N.Nb(4,"ion-buttons",0),N.Nb(5,"ion-button",1),N.Vb("click",function(){return t.dismiss()}),N.mc(6,"close"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(7,"ion-content"),N.lc(8,O,24,3,"form",2),N.Mb()),2&e&&(N.yb(8),N.dc("ngIf",t.updateEmailForm))},directives:[c.q,c.T,c.R,c.g,c.f,c.n,r.n,b.p,b.l,b.f,c.p,c.J,c.m,c.h,c.j,c.l,c.i,c.A,c.t,c.r,c.z,c.s,c.db,b.k,b.d,c.Q],pipes:[r.g],styles:[""]}),D),X=n("l7P3");function G(e,t){if(1&e){var i=N.Ob();N.Nb(0,"ion-button",8),N.Vb("click",function(){return N.ic(i),N.Xb().activate()}),N.mc(1," Activate "),N.Mb()}}var A,J,P,S=[{path:"",component:(A=function(){function t(i,o,n){e(this,t),this.store=i,this.modalController=o,this.userService=n,this.user=null}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.store.select(p.b).subscribe(function(t){e.user=t})}},{key:"presentModal",value:function(e,t){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.modalController.create({component:e,componentProps:t});case 2:return o=i.sent,i.next=5,o.present();case 5:return i.next=7,o.onWillDismiss();case 7:return i.abrupt("return",i.sent);case 8:case"end":return i.stop()}},i,this)}))}},{key:"activate",value:function(){var e=this;this.userService.sendActivationCode(this.user._id).pipe(Object(m.a)(function(e){return Object(s.a)(e)}),Object(d.a)(function(t){return Object(u.a)(e.presentModal(y))})).subscribe(function(t){e.store.dispatch(new f.a({_id:e.user._id,code:t.data.code}))},function(e){return console.log("err activate",e)})}},{key:"updateEmail",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.presentModal(z);case 2:t=e.sent,(i=t.data)&&(console.log("data",i),this.store.dispatch(new f.n({_id:this.user._id,email:i.email})));case 5:case"end":return e.stop()}},e,this)}))}}]),t}(),A.\u0275fac=function(e){return new(e||A)(N.Ib(X.i),N.Ib(c.X),N.Ib(M.a))},A.\u0275cmp=N.Cb({type:A,selectors:[["app-profile"]],decls:76,vars:6,consts:[["slot","end"],["menu","dashboard-menu"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["size","4",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],["color","primary"],[3,"click"],[3,"click",4,"ngIf"]],template:function(e,t){1&e&&(N.Nb(0,"ion-header"),N.Nb(1,"ion-toolbar"),N.Nb(2,"ion-title"),N.mc(3,"Profile"),N.Mb(),N.Nb(4,"ion-buttons",0),N.Jb(5,"ion-menu-button",1),N.Mb(),N.Mb(),N.Mb(),N.Nb(6,"ion-content"),N.Nb(7,"ion-grid"),N.Nb(8,"ion-row"),N.Nb(9,"ion-col",2),N.Nb(10,"h2",3),N.mc(11,"Profile"),N.Mb(),N.Nb(12,"ion-list"),N.Nb(13,"ion-row"),N.Nb(14,"ion-col",4),N.Nb(15,"ion-item",5),N.Nb(16,"ion-label"),N.Nb(17,"h4"),N.mc(18,"Login:"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(19,"ion-col",6),N.Nb(20,"ion-item",5),N.Nb(21,"ion-label"),N.Nb(22,"ion-text",7),N.Nb(23,"p"),N.mc(24),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(25,"ion-row"),N.Nb(26,"ion-col",4),N.Nb(27,"ion-item",5),N.Nb(28,"ion-label"),N.Nb(29,"h4"),N.mc(30,"Email:"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(31,"ion-col",6),N.Nb(32,"ion-item",5),N.Nb(33,"ion-label"),N.Nb(34,"ion-text",7),N.Nb(35,"p"),N.mc(36),N.Mb(),N.Mb(),N.Mb(),N.Nb(37,"ion-button",8),N.Vb("click",function(){return t.updateEmail()}),N.mc(38," Update email "),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(39,"ion-row"),N.Nb(40,"ion-col",4),N.Nb(41,"ion-item",5),N.Nb(42,"ion-label"),N.Nb(43,"h4"),N.mc(44,"Role:"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(45,"ion-col",6),N.Nb(46,"ion-item",5),N.Nb(47,"ion-label"),N.Nb(48,"ion-text",7),N.Nb(49,"p"),N.mc(50),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(51,"ion-row"),N.Nb(52,"ion-col",4),N.Nb(53,"ion-item",5),N.Nb(54,"ion-label"),N.Nb(55,"h4"),N.mc(56,"Blocked:"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(57,"ion-col",6),N.Nb(58,"ion-item",5),N.Nb(59,"ion-label"),N.Nb(60,"ion-text",7),N.Nb(61,"p"),N.mc(62),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(63,"ion-row"),N.Nb(64,"ion-col",4),N.Nb(65,"ion-item",5),N.Nb(66,"ion-label"),N.Nb(67,"h4"),N.mc(68,"Activated:"),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Nb(69,"ion-col",6),N.Nb(70,"ion-item",5),N.Nb(71,"ion-label"),N.Nb(72,"ion-text",7),N.Nb(73,"p"),N.mc(74),N.Mb(),N.Mb(),N.Mb(),N.lc(75,G,2,0,"ion-button",9),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb(),N.Mb()),2&e&&(N.yb(24),N.oc(" ",t.user.login," "),N.yb(12),N.oc(" ",t.user.email," "),N.yb(14),N.oc(" ",t.user.role," "),N.yb(12),N.oc(" ",!!t.user.blocked," "),N.yb(12),N.oc(" ",!!t.user.activated," "),N.yb(1),N.dc("ngIf",!t.user.activated))},directives:[c.q,c.T,c.R,c.g,c.D,c.n,c.p,c.J,c.m,c.A,c.t,c.z,c.Q,c.f,r.n],styles:[""]}),A)}],V=((P=function t(){e(this,t)}).\u0275mod=N.Gb({type:P}),P.\u0275inj=N.Fb({factory:function(e){return new(e||P)},imports:[[a.k.forChild(S)],a.k]}),P),L=((J=function t(){e(this,t)}).\u0275mod=N.Gb({type:J}),J.\u0275inj=N.Fb({factory:function(e){return new(e||J)},imports:[[r.c,b.h,b.n,c.U,V]]}),J)}}])}();