!function(){function o(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}function n(o,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}function e(o,e,t){return e&&n(o.prototype,e),t&&n(o,t),o}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"M/w1":function(n,t,i){"use strict";i.r(t),i.d(t,"LoginFormPageModule",function(){return P});var r=i("ofXK"),s=i("3Pt+"),c=i("TEn/"),a=i("tyNb"),u=i("mYIz"),b=i("fXoL"),l=i("d6tv"),p=i("l7P3"),m=["loginFormDirective"];function g(o,n){if(1&o&&(b.Nb(0,"ion-text",15),b.mc(1),b.Yb(2,"json"),b.Mb()),2&o){var e=b.Xb();b.yb(1),b.oc(" ",b.Zb(2,1,e.loginForm.get("login").errors)," ")}}function d(o,n){if(1&o&&(b.Nb(0,"ion-text",15),b.mc(1),b.Yb(2,"json"),b.Mb()),2&o){var e=b.Xb();b.yb(1),b.oc(" ",b.Zb(2,1,e.loginForm.get("password").errors)," ")}}var f,y=((f=function(){function n(e,t,i){o(this,n),this.userService=e,this.router=t,this.store=i,this.inputType="password"}return e(n,[{key:"ngOnInit",value:function(){this.loginForm=new s.e({login:new s.c("",{updateOn:"change",validators:[s.o.pattern("^[a-zA-Z0-9_\\-]{2,60}$"),s.o.minLength(2),s.o.maxLength(60),s.o.required]}),password:new s.c("",{updateOn:"change",validators:[s.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),s.o.minLength(8),s.o.maxLength(60),s.o.required]})})}},{key:"switchInputType",value:function(){this.inputType="password"===this.inputType?"text":"password"}},{key:"onLogin",value:function(){var o={login:this.loginForm.get("login").value,password:this.loginForm.get("password").value};this.store.dispatch(new u.g({user:o})),this.resetForm()}},{key:"resetForm",value:function(){this.loginFormDirective&&this.loginFormDirective.resetForm()}}]),n}()).\u0275fac=function(o){return new(o||f)(b.Ib(l.a),b.Ib(a.g),b.Ib(p.i))},f.\u0275cmp=b.Cb({type:f,selectors:[["app-login-form"]],viewQuery:function(o,n){var e;1&o&&b.qc(m,!0),2&o&&b.gc(e=b.Wb())&&(n.loginFormDirective=e.first)},decls:38,vars:6,consts:[[3,"formGroup"],["loginFormDirective","ngForm"],["size-md","6","offset-md","3"],["src","/assets/shapes.svg",1,"logo_login"],[1,"ion-text-center"],["button","","color","primary","routerLink","/user/login/signup"],["name","person-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","login"],["class","input-error","color","danger",4,"ngIf"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["expand","block",3,"disabled","click"],["color","danger",1,"input-error"]],template:function(o,n){1&o&&(b.Nb(0,"ion-header"),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-title"),b.mc(3,"Login"),b.Mb(),b.Mb(),b.Mb(),b.Nb(4,"ion-content"),b.Nb(5,"form",0,1),b.Nb(7,"ion-grid"),b.Nb(8,"ion-row"),b.Nb(9,"ion-col",2),b.Nb(10,"ion-card"),b.Nb(11,"ion-card-header"),b.Nb(12,"div"),b.Jb(13,"img",3),b.Mb(),b.Nb(14,"ion-card-title",4),b.mc(15,"Login"),b.Mb(),b.Nb(16,"ion-card-subtitle",4),b.Nb(17,"a",5),b.mc(18,"or Signup"),b.Mb(),b.Mb(),b.Mb(),b.Nb(19,"ion-card-content"),b.Nb(20,"ion-list"),b.Nb(21,"ion-item"),b.Jb(22,"ion-icon",6),b.Nb(23,"ion-label",7),b.mc(24,"Login"),b.Mb(),b.Jb(25,"ion-input",8),b.Mb(),b.lc(26,g,3,3,"ion-text",9),b.Nb(27,"ion-item",10),b.Jb(28,"ion-icon",11),b.Nb(29,"ion-label",7),b.mc(30,"Password"),b.Mb(),b.Jb(31,"ion-input",12),b.Nb(32,"ion-icon",13),b.Vb("click",function(){return n.switchInputType()}),b.Mb(),b.Mb(),b.lc(33,d,3,3,"ion-text",9),b.Mb(),b.Mb(),b.Mb(),b.Nb(34,"ion-row"),b.Nb(35,"ion-col"),b.Nb(36,"ion-button",14),b.Vb("click",function(){return n.onLogin()}),b.mc(37," Login "),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb()),2&o&&(b.yb(5),b.dc("formGroup",n.loginForm),b.yb(21),b.dc("ngIf",n.loginForm.get("login").touched&&n.loginForm.get("login").errors),b.yb(5),b.dc("type",n.inputType),b.yb(1),b.dc("name","password"===n.inputType?"eye-outline":"eye-off-outline"),b.yb(1),b.dc("ngIf",n.loginForm.get("password").touched&&n.loginForm.get("password").errors),b.yb(3),b.dc("disabled","INVALID"===n.loginForm.status))},directives:[c.q,c.T,c.R,c.n,s.p,s.l,s.f,c.p,c.J,c.m,c.h,c.j,c.l,c.k,a.j,c.bb,c.i,c.A,c.t,c.r,c.z,c.s,c.db,s.k,s.d,r.n,c.f,c.Q],pipes:[r.g],styles:[".logo_login[_ngcontent-%COMP%]{width:100%;margin:auto;display:block}"]}),f),h=i("XNiG"),N=i("vkgz"),v=i("eIep"),w=i("JX91"),M=i("pLZG"),F=i("IzEk"),k=["signupFormDirective"];function I(o,n){if(1&o&&(b.Nb(0,"ion-text",23),b.mc(1),b.Yb(2,"json"),b.Mb()),2&o){var e=b.Xb(2);b.yb(1),b.oc(" ",b.Zb(2,1,e.signupForm.get("companyName").errors)," ")}}function x(o,n){if(1&o&&(b.Nb(0,"ion-text",23),b.mc(1),b.Yb(2,"json"),b.Mb()),2&o){var e=b.Xb(2);b.yb(1),b.oc(" ",b.Zb(2,1,e.signupForm.get("login").errors)," ")}}function L(o,n){if(1&o&&(b.Nb(0,"ion-text",23),b.mc(1),b.Yb(2,"json"),b.Mb()),2&o){var e=b.Xb(2);b.yb(1),b.oc(" ",b.Zb(2,1,e.signupForm.get("email").errors)," ")}}function C(o,n){if(1&o&&(b.Nb(0,"ion-text",23),b.mc(1),b.Yb(2,"json"),b.Mb()),2&o){var e=b.Xb(2);b.yb(1),b.oc(" ",b.Zb(2,1,e.signupForm.get("password").errors)," ")}}function j(o,n){1&o&&b.Jb(0,"ion-icon",24),2&o&&b.dc("name","checkmark-done-outline")}function J(o,n){if(1&o&&(b.Nb(0,"ion-text",23),b.mc(1),b.Yb(2,"json"),b.Mb()),2&o){var e=b.Xb(2);b.yb(1),b.oc(" ",b.Zb(2,1,e.signupForm.get("passwordConfirm").errors)," ")}}function O(o,n){if(1&o){var e=b.Ob();b.Nb(0,"form",1,2),b.Nb(2,"ion-grid"),b.Nb(3,"ion-row"),b.Nb(4,"ion-col",3),b.Nb(5,"ion-card"),b.Nb(6,"ion-card-header"),b.Nb(7,"div"),b.Jb(8,"img",4),b.Mb(),b.Nb(9,"ion-card-title",5),b.mc(10,"Signup"),b.Mb(),b.Nb(11,"ion-card-subtitle",5),b.Nb(12,"a",6),b.mc(13,"or Login"),b.Mb(),b.Mb(),b.Mb(),b.Nb(14,"ion-card-content"),b.Nb(15,"ion-list"),b.Nb(16,"ion-item"),b.Jb(17,"ion-icon",7),b.Nb(18,"ion-label",8),b.mc(19,"Company name"),b.Mb(),b.Jb(20,"ion-input",9),b.Mb(),b.lc(21,I,3,3,"ion-text",10),b.Nb(22,"ion-item"),b.Jb(23,"ion-icon",11),b.Nb(24,"ion-label",8),b.mc(25,"Login"),b.Mb(),b.Jb(26,"ion-input",12),b.Mb(),b.lc(27,x,3,3,"ion-text",10),b.Nb(28,"ion-item"),b.Jb(29,"ion-icon",13),b.Nb(30,"ion-label",8),b.mc(31,"Email"),b.Mb(),b.Jb(32,"ion-input",14),b.Mb(),b.lc(33,L,3,3,"ion-text",10),b.Nb(34,"ion-item",15),b.Jb(35,"ion-icon",16),b.Nb(36,"ion-label",8),b.mc(37,"Password"),b.Mb(),b.Jb(38,"ion-input",17),b.Nb(39,"ion-icon",18),b.Vb("click",function(){return b.ic(e),b.Xb().switchInputType()}),b.Mb(),b.Mb(),b.lc(40,C,3,3,"ion-text",10),b.Nb(41,"ion-item",15),b.Jb(42,"ion-icon",19),b.Nb(43,"ion-label",8),b.mc(44,"Password Confirm"),b.Mb(),b.Jb(45,"ion-input",20),b.lc(46,j,1,1,"ion-icon",21),b.Mb(),b.lc(47,J,3,3,"ion-text",10),b.Mb(),b.Mb(),b.Mb(),b.Nb(48,"ion-row"),b.Nb(49,"ion-col"),b.Nb(50,"ion-button",22),b.Vb("click",function(){return b.ic(e),b.Xb().formSubmitSubject$.next()}),b.mc(51," Signup "),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb()}if(2&o){var t=b.Xb();b.dc("formGroup",t.signupForm),b.yb(21),b.dc("ngIf",t.signupForm.get("companyName").touched&&t.signupForm.get("companyName").errors&&!t.signupForm.get("companyName").errors.unique),b.yb(6),b.dc("ngIf",t.signupForm.get("login").touched&&t.signupForm.get("login").errors),b.yb(6),b.dc("ngIf",t.signupForm.get("email").touched&&t.signupForm.get("email").errors),b.yb(5),b.dc("type",t.inputType),b.yb(1),b.dc("name","password"===t.inputType?"eye-outline":"eye-off-outline"),b.yb(1),b.dc("ngIf",t.signupForm.get("password").touched&&t.signupForm.get("password").errors),b.yb(5),b.dc("type",t.inputType),b.yb(1),b.dc("ngIf",t.signupForm.get("passwordConfirm").touched&&"VALID"===t.signupForm.get("passwordConfirm").status),b.yb(1),b.dc("ngIf",t.signupForm.get("passwordConfirm").touched&&t.signupForm.get("passwordConfirm").errors),b.yb(3),b.dc("disabled","INVALID"===t.signupForm.status||"PENDING"===t.signupForm.status)}}var S,T,D,z,A=((S=function(){function n(e,t){o(this,n),this.userService=e,this.router=t,this.inputType="password",this.formSubmitSubject$=new h.a}return e(n,[{key:"ngOnInit",value:function(){var o=this;this.signupForm=new s.e({companyName:new s.c("",{updateOn:"blur",validators:[s.o.pattern("^[a-zA-Z0-9 _\\-]{2,60}$"),s.o.minLength(2),s.o.maxLength(60),s.o.required],asyncValidators:[this.userService.checkCompanyNameUnique()]}),login:new s.c("",{updateOn:"blur",validators:[s.o.pattern("^[a-zA-Z0-9_\\-]{2,60}$"),s.o.minLength(2),s.o.maxLength(60),s.o.required],asyncValidators:[this.userService.checkLoginUnique()]}),password:new s.c("",{updateOn:"change",validators:[s.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),s.o.minLength(8),s.o.maxLength(60),s.o.required]}),passwordConfirm:new s.c("",{updateOn:"change",validators:[s.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),s.o.minLength(8),s.o.maxLength(60),s.o.required]}),email:new s.c("",{updateOn:"blur",validators:[s.o.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"),s.o.required],asyncValidators:[this.userService.checkEmailUnique()]})},this.userService.matchPassword),this.formSubmitSubject$.pipe(Object(N.a)(function(){return o.signupForm.markAsDirty()}),Object(v.a)(function(){return o.signupForm.statusChanges.pipe(Object(w.a)(o.signupForm.status),Object(M.a)(function(o){return"PENDING"!==o}),Object(F.a)(1))}),Object(M.a)(function(o){return"VALID"===o})).subscribe(function(n){return o.onSignup()})}},{key:"switchInputType",value:function(){this.inputType="password"===this.inputType?"text":"password"}},{key:"onSignup",value:function(){var o=this;this.userService.createCompany({companyName:this.signupForm.get("companyName").value,user:{login:this.signupForm.get("login").value,password:this.signupForm.get("password").value,email:this.signupForm.get("email").value}}).subscribe(function(n){return o.resetForm()},function(o){return console.log("signup Error",o.error)})}},{key:"resetForm",value:function(){this.signupFormDirective&&this.signupFormDirective.resetForm()}}]),n}()).\u0275fac=function(o){return new(o||S)(b.Ib(l.a),b.Ib(a.g))},S.\u0275cmp=b.Cb({type:S,selectors:[["app-signup-form"]],viewQuery:function(o,n){var e;1&o&&b.qc(k,!0),2&o&&b.gc(e=b.Wb())&&(n.signupFormDirective=e.first)},decls:6,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["signupFormDirective","ngForm"],["size-md","6","offset-md","3"],["src","/assets/shapes.svg",1,"logo_login"],[1,"ion-text-center"],["button","","color","primary","routerLink","/user/login"],["name","podium-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","companyName"],["class","input-error","color","danger",4,"ngIf"],["name","person-outline","slot","start",1,"ion-align-self-center"],["type","text","autocomplete","","autocorrect","","formControlName","login"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["name","reorder-two-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","passwordConfirm",3,"type"],["class","ion-align-self-center","color","primary","slot","end",3,"name",4,"ngIf"],["expand","block",3,"disabled","click"],["color","danger",1,"input-error"],["color","primary","slot","end",1,"ion-align-self-center",3,"name"]],template:function(o,n){1&o&&(b.Nb(0,"ion-header"),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-title"),b.mc(3,"Signup"),b.Mb(),b.Mb(),b.Mb(),b.Nb(4,"ion-content"),b.lc(5,O,52,11,"form",0),b.Mb()),2&o&&(b.yb(5),b.dc("ngIf",n.signupForm))},directives:[c.q,c.T,c.R,c.n,r.n,s.p,s.l,s.f,c.p,c.J,c.m,c.h,c.j,c.l,c.k,a.j,c.bb,c.i,c.A,c.t,c.r,c.z,c.s,c.db,s.k,s.d,c.f,c.Q],pipes:[r.g],styles:[".logo_login[_ngcontent-%COMP%]{width:100%;margin:auto;display:block}"]}),S),q=i("lJxs"),X=((T=function(){function n(e,t,i){o(this,n),this.userService=e,this.router=t,this.store=i}return e(n,[{key:"canActivate",value:function(o,n){var e=this;return this.store.select("user").pipe(Object(q.a)(function(o){return!o.user||(e.router.navigateByUrl("/"),!1)}))}}]),n}()).\u0275fac=function(o){return new(o||T)(b.Rb(l.a),b.Rb(a.g),b.Rb(p.i))},T.\u0275prov=b.Eb({token:T,factory:T.\u0275fac,providedIn:"root"}),T),Z=[{path:"",component:y,canActivate:[X]},{path:"signup",component:A,canActivate:[X]},{path:"**",redirectTo:"",pathMatch:"full"}],_=((z=function n(){o(this,n)}).\u0275mod=b.Gb({type:z}),z.\u0275inj=b.Fb({factory:function(o){return new(o||z)},imports:[[a.k.forChild(Z)],a.k]}),z),P=((D=function n(){o(this,n)}).\u0275mod=b.Gb({type:D}),D.\u0275inj=b.Fb({factory:function(o){return new(o||D)},imports:[[r.c,s.n,c.U,_]]}),D)}}])}();