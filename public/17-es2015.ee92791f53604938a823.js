(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"L/5t":function(t,e,o){"use strict";o.r(e),o.d(e,"ProfilePageModule",function(){return z});var i=o("ofXK"),n=o("3Pt+"),b=o("TEn/"),a=o("tyNb"),c=o("mrSG"),r=o("z6cu"),s=o("Cfvw"),l=o("JIr8"),m=o("eIep"),d=o("mYIz"),u=o("mgGq"),p=o("fXoL"),N=o("d6tv"),M=o("sYmb");const f=["activateEmailCodeFormDirective"];function h(t,e){if(1&t&&(p.Nb(0,"ion-text",16),p.nc(1),p.Yb(2,"json"),p.Mb()),2&t){const t=p.Xb(2);p.yb(1),p.pc(" ",p.Zb(2,1,t.activateEmailCodeForm.get("code").errors)," ")}}function v(t,e){if(1&t){const t=p.Ob();p.Nb(0,"form",3,4),p.Nb(2,"ion-grid"),p.Nb(3,"ion-row"),p.Nb(4,"ion-col",5),p.Nb(5,"ion-card"),p.Nb(6,"ion-card-header"),p.Nb(7,"ion-card-title",6),p.nc(8),p.Yb(9,"translate"),p.Mb(),p.Nb(10,"ion-card-subtitle",6),p.nc(11),p.Yb(12,"translate"),p.Mb(),p.Mb(),p.Nb(13,"ion-card-content"),p.Nb(14,"ion-list"),p.Nb(15,"ion-item",7),p.Jb(16,"ion-icon",8),p.Nb(17,"ion-label",9),p.nc(18),p.Yb(19,"translate"),p.Mb(),p.Jb(20,"ion-input",10),p.Mb(),p.mc(21,h,3,3,"ion-text",11),p.Mb(),p.Mb(),p.Mb(),p.Nb(22,"ion-row"),p.Nb(23,"ion-col",12),p.Nb(24,"ion-button",13),p.Vb("click",function(){return p.jc(t),p.Xb().activate()}),p.nc(25),p.Yb(26,"translate"),p.Mb(),p.Mb(),p.Nb(27,"ion-col",14),p.Nb(28,"ion-button",15),p.Vb("click",function(){return p.jc(t),p.Xb().dismiss(null)}),p.nc(29," Cancel "),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()}if(2&t){const t=p.Xb();p.dc("formGroup",t.activateEmailCodeForm),p.yb(8),p.pc("",p.Zb(9,7,"elements.button.activate")," email"),p.yb(3),p.pc("",p.Zb(12,9,"modules.dashboard.profile.activationText")," "),p.yb(7),p.oc(p.Zb(19,11,"modules.dashboard.profile.code")),p.yb(3),p.dc("ngIf",t.activateEmailCodeForm.get("code").touched&&t.activateEmailCodeForm.get("code").errors),p.yb(3),p.dc("disabled","INVALID"===t.activateEmailCodeForm.status||"PENDING"===t.activateEmailCodeForm.status),p.yb(1),p.pc(" ",p.Zb(26,13,"elements.button.update")," ")}}let y=(()=>{class t{constructor(t,e){this.modalController=t,this.userService=e}ngOnInit(){this.activateEmailCodeForm=new n.e({code:new n.c("",{updateOn:"change",validators:[n.o.pattern("^[0-9]{2,10}$"),n.o.minLength(2),n.o.maxLength(10),n.o.required]})})}dismiss(t){this.modalController.dismiss(t)}activate(){this.dismiss({code:this.activateEmailCodeForm.get("code").value}),this.resetForm()}resetForm(){this.activateEmailCodeFormDirective&&this.activateEmailCodeFormDirective.resetForm()}}return t.\u0275fac=function(e){return new(e||t)(p.Ib(b.W),p.Ib(N.a))},t.\u0275cmp=p.Cb({type:t,selectors:[["app-update-activation"]],viewQuery:function(t,e){var o;1&t&&p.rc(f,!0),2&t&&p.hc(o=p.Wb())&&(e.activateEmailCodeFormDirective=o.first)},decls:11,vars:7,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["activateEmailCodeFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","number","autocomplete","","autocorrect","","formControlName","code"],["class","input-error","color","danger",4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["color","danger",1,"input-error"]],template:function(t,e){1&t&&(p.Nb(0,"ion-header"),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-title"),p.nc(3),p.Yb(4,"translate"),p.Mb(),p.Nb(5,"ion-buttons",0),p.Nb(6,"ion-button",1),p.Vb("click",function(){return e.dismiss(null)}),p.nc(7),p.Yb(8,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(9,"ion-content"),p.mc(10,v,30,15,"form",2),p.Mb()),2&t&&(p.yb(3),p.pc("",p.Zb(4,3,"elements.button.activate")," email"),p.yb(4),p.oc(p.Zb(8,5,"elements.button.close")),p.yb(3),p.dc("ngIf",e.activateEmailCodeForm))},directives:[b.q,b.S,b.Q,b.g,b.f,b.n,i.n,n.p,n.l,n.f,b.p,b.J,b.m,b.h,b.j,b.l,b.k,b.i,b.A,b.t,b.r,b.z,b.s,b.Y,n.k,n.d,b.P],pipes:[M.c,i.g],styles:[""]}),t})();var g=o("XNiG"),F=o("vkgz"),E=o("JX91"),C=o("pLZG"),k=o("IzEk");const I=["updateEmailFormDirective"];function w(t,e){if(1&t&&(p.Nb(0,"ion-text",16),p.nc(1),p.Yb(2,"json"),p.Mb()),2&t){const t=p.Xb(2);p.yb(1),p.pc(" ",p.Zb(2,1,t.updateEmailForm.get("email").errors)," ")}}function j(t,e){if(1&t){const t=p.Ob();p.Nb(0,"form",3,4),p.Nb(2,"ion-grid"),p.Nb(3,"ion-row"),p.Nb(4,"ion-col",5),p.Nb(5,"ion-card"),p.Nb(6,"ion-card-header"),p.Nb(7,"ion-card-title",6),p.nc(8),p.Yb(9,"translate"),p.Mb(),p.Mb(),p.Nb(10,"ion-card-content"),p.Nb(11,"ion-list"),p.Nb(12,"ion-item",7),p.Jb(13,"ion-icon",8),p.Nb(14,"ion-label",9),p.nc(15,"Email"),p.Mb(),p.Jb(16,"ion-input",10),p.Mb(),p.mc(17,w,3,3,"ion-text",11),p.Mb(),p.Mb(),p.Mb(),p.Nb(18,"ion-row"),p.Nb(19,"ion-col",12),p.Nb(20,"ion-button",13),p.Vb("click",function(){return p.jc(t),p.Xb().formSubmitSubject$.next()}),p.nc(21),p.Yb(22,"translate"),p.Mb(),p.Mb(),p.Nb(23,"ion-col",14),p.Nb(24,"ion-button",15),p.Vb("click",function(){return p.jc(t),p.Xb().dismiss(null)}),p.nc(25," Cancel "),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()}if(2&t){const t=p.Xb();p.dc("formGroup",t.updateEmailForm),p.yb(8),p.pc("",p.Zb(9,5,"elements.button.update")," email"),p.yb(9),p.dc("ngIf",t.updateEmailForm.get("email").touched&&t.updateEmailForm.get("email").errors),p.yb(3),p.dc("disabled","INVALID"===t.updateEmailForm.status||"PENDING"===t.updateEmailForm.status),p.yb(1),p.pc(" ",p.Zb(22,7,"elements.button.update")," ")}}let Y=(()=>{class t{constructor(t,e){this.modalController=t,this.userService=e,this.formSubmitSubject$=new g.a}ngOnInit(){this.updateEmailForm=new n.e({email:this.userService.emailFormControl("")}),this.formSubmitSubject$.pipe(Object(F.a)(()=>this.updateEmailForm.markAsDirty()),Object(m.a)(()=>this.updateEmailForm.statusChanges.pipe(Object(E.a)(this.updateEmailForm.status),Object(C.a)(t=>"PENDING"!==t),Object(k.a)(1))),Object(C.a)(t=>"VALID"===t)).subscribe(t=>this.onUpdate())}dismiss(t){console.log("data form",t),this.modalController.dismiss(t)}onUpdate(){this.dismiss({email:this.updateEmailForm.get("email").value}),this.resetForm()}resetForm(){this.updateEmailFormDirective&&this.updateEmailFormDirective.resetForm()}}return t.\u0275fac=function(e){return new(e||t)(p.Ib(b.W),p.Ib(N.a))},t.\u0275cmp=p.Cb({type:t,selectors:[["app-update-email"]],viewQuery:function(t,e){var o;1&t&&p.rc(I,!0),2&t&&p.hc(o=p.Wb())&&(e.updateEmailFormDirective=o.first)},inputs:{email:"email"},decls:11,vars:7,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["updateEmailFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["class","input-error","color","danger",4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["color","danger",1,"input-error"]],template:function(t,e){1&t&&(p.Nb(0,"ion-header"),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-title"),p.nc(3),p.Yb(4,"translate"),p.Mb(),p.Nb(5,"ion-buttons",0),p.Nb(6,"ion-button",1),p.Vb("click",function(){return e.dismiss()}),p.nc(7),p.Yb(8,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(9,"ion-content"),p.mc(10,j,26,9,"form",2),p.Mb()),2&t&&(p.yb(3),p.pc("",p.Zb(4,3,"elements.button.update")," Email"),p.yb(4),p.oc(p.Zb(8,5,"elements.button.close")),p.yb(3),p.dc("ngIf",e.updateEmailForm))},directives:[b.q,b.S,b.Q,b.g,b.f,b.n,i.n,n.p,n.l,n.f,b.p,b.J,b.m,b.h,b.j,b.l,b.i,b.A,b.t,b.r,b.z,b.s,b.cb,n.k,n.d,b.P],pipes:[M.c,i.g],styles:[""]}),t})();var Z=o("l7P3");function x(t,e){if(1&t){const t=p.Ob();p.Nb(0,"ion-button",8),p.Vb("click",function(){return p.jc(t),p.Xb().activate()}),p.nc(1),p.Yb(2,"translate"),p.Mb()}2&t&&(p.yb(1),p.pc(" ",p.Zb(2,1,"elements.button.activate")," "))}const D=[{path:"",component:(()=>{class t{constructor(t,e,o){this.store=t,this.modalController=e,this.userService=o,this.user=null}ngOnInit(){this.store.select(u.a).subscribe(t=>{this.company=t}),this.store.select(u.b).subscribe(t=>{this.user=t})}presentModal(t,e){return Object(c.a)(this,void 0,void 0,function*(){const o=yield this.modalController.create({component:t,componentProps:e});return yield o.present(),yield o.onWillDismiss()})}activate(){this.userService.sendActivationCode(this.user._id).pipe(Object(l.a)(t=>Object(r.a)(t)),Object(m.a)(t=>Object(s.a)(this.presentModal(y)))).subscribe(t=>{var e;this.store.dispatch(new d.a({_id:this.user._id,code:null===(e=t.data)||void 0===e?void 0:e.code}))},t=>console.log("err activate",t))}updateEmail(){return Object(c.a)(this,void 0,void 0,function*(){const{data:t}=yield this.presentModal(Y);t&&(console.log("data",t),this.store.dispatch(new d.q({_id:this.user._id,email:t.email})))})}}return t.\u0275fac=function(e){return new(e||t)(p.Ib(Z.i),p.Ib(b.W),p.Ib(N.a))},t.\u0275cmp=p.Cb({type:t,selectors:[["app-profile"]],decls:85,vars:32,consts:[["slot","end"],["menu","dashboard-menu"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["size","4",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],["color","primary"],[3,"click"],[3,"click",4,"ngIf"]],template:function(t,e){1&t&&(p.Nb(0,"ion-header"),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-title"),p.nc(3),p.Yb(4,"translate"),p.Mb(),p.Nb(5,"ion-buttons",0),p.Jb(6,"ion-menu-button",1),p.Mb(),p.Mb(),p.Mb(),p.Nb(7,"ion-content"),p.Nb(8,"ion-grid"),p.Nb(9,"ion-row"),p.Nb(10,"ion-col",2),p.Nb(11,"h2",3),p.nc(12),p.Mb(),p.Nb(13,"ion-list"),p.Nb(14,"ion-row"),p.Nb(15,"ion-col",4),p.Nb(16,"ion-item",5),p.Nb(17,"ion-label"),p.Nb(18,"h4"),p.nc(19),p.Yb(20,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(21,"ion-col",6),p.Nb(22,"ion-item",5),p.Nb(23,"ion-label"),p.Nb(24,"ion-text",7),p.Nb(25,"p"),p.nc(26),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(27,"ion-row"),p.Nb(28,"ion-col",4),p.Nb(29,"ion-item",5),p.Nb(30,"ion-label"),p.Nb(31,"h4"),p.nc(32),p.Yb(33,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(34,"ion-col",6),p.Nb(35,"ion-item",5),p.Nb(36,"ion-label"),p.Nb(37,"ion-text",7),p.Nb(38,"p"),p.nc(39),p.Mb(),p.Mb(),p.Mb(),p.Nb(40,"ion-button",8),p.Vb("click",function(){return e.updateEmail()}),p.nc(41),p.Yb(42,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(43,"ion-row"),p.Nb(44,"ion-col",4),p.Nb(45,"ion-item",5),p.Nb(46,"ion-label"),p.Nb(47,"h4"),p.nc(48),p.Yb(49,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(50,"ion-col",6),p.Nb(51,"ion-item",5),p.Nb(52,"ion-label"),p.Nb(53,"ion-text",7),p.Nb(54,"p"),p.nc(55),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(56,"ion-row"),p.Nb(57,"ion-col",4),p.Nb(58,"ion-item",5),p.Nb(59,"ion-label"),p.Nb(60,"h4"),p.nc(61),p.Yb(62,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(63,"ion-col",6),p.Nb(64,"ion-item",5),p.Nb(65,"ion-label"),p.Nb(66,"ion-text",7),p.Nb(67,"p"),p.nc(68),p.Yb(69,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(70,"ion-row"),p.Nb(71,"ion-col",4),p.Nb(72,"ion-item",5),p.Nb(73,"ion-label"),p.Nb(74,"h4"),p.nc(75),p.Yb(76,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(77,"ion-col",6),p.Nb(78,"ion-item",5),p.Nb(79,"ion-label"),p.Nb(80,"ion-text",7),p.Nb(81,"p"),p.nc(82),p.Yb(83,"translate"),p.Mb(),p.Mb(),p.Mb(),p.mc(84,x,3,3,"ion-button",9),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()),2&t&&(p.yb(3),p.oc(p.Zb(4,14,"modules.dashboard.profile.title")),p.yb(9),p.oc(e.company.companyName),p.yb(7),p.oc(p.Zb(20,16,"modules.dashboard.profile.login")),p.yb(7),p.pc(" ",e.user.login," "),p.yb(6),p.oc(p.Zb(33,18,"modules.dashboard.profile.email")),p.yb(7),p.pc(" ",e.user.email," "),p.yb(2),p.pc(" ",p.Zb(42,20,"elements.button.update")," "),p.yb(7),p.oc(p.Zb(49,22,"modules.dashboard.profile.role")),p.yb(7),p.pc(" ",e.user.role," "),p.yb(6),p.oc(p.Zb(62,24,"modules.dashboard.profile.blocked")),p.yb(7),p.pc(" ",p.Zb(69,26,"common.logic."+!!e.user.blocked)," "),p.yb(7),p.oc(p.Zb(76,28,"modules.dashboard.profile.activated")),p.yb(7),p.pc(" ",p.Zb(83,30,"common.logic."+!!e.user.activated)," "),p.yb(2),p.dc("ngIf",!e.user.activated))},directives:[b.q,b.S,b.Q,b.g,b.D,b.n,b.p,b.J,b.m,b.A,b.t,b.z,b.P,b.f,i.n],pipes:[M.c],styles:[""]}),t})()}];let O=(()=>{class t{}return t.\u0275mod=p.Gb({type:t}),t.\u0275inj=p.Fb({factory:function(e){return new(e||t)},imports:[[a.k.forChild(D)],a.k]}),t})(),z=(()=>{class t{}return t.\u0275mod=p.Gb({type:t}),t.\u0275inj=p.Fb({factory:function(e){return new(e||t)},imports:[[i.c,n.h,n.n,b.T,O,M.b.forChild({extend:!0})]]}),t})()}}]);