!function(){function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function o(n,o){for(var e=0;e<o.length;e++){var t=o[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function e(n,e,t){return e&&o(n.prototype,e),t&&o(n,t),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"M/w1":function(o,t,i){"use strict";i.r(t),i.d(t,"LoginFormPageModule",function(){return G});var r=i("ofXK"),c=i("3Pt+"),s=i("TEn/"),a=i("tyNb"),u=i("fXoL"),b=i("d6tv"),l=["loginFormDirective"];function p(n,o){if(1&n&&(u.Nb(0,"ion-text",14),u.lc(1),u.Yb(2,"json"),u.Mb()),2&n){var e=u.Xb();u.yb(1),u.nc(" ",u.Zb(2,1,e.loginForm.get("login").errors)," ")}}function m(n,o){if(1&n&&(u.Nb(0,"ion-text",14),u.lc(1),u.Yb(2,"json"),u.Mb()),2&n){var e=u.Xb();u.yb(1),u.nc(" ",u.Zb(2,1,e.loginForm.get("password").errors)," ")}}var g,f=((g=function(){function o(e,t){n(this,o),this.userService=e,this.router=t,this.inputType="password"}return e(o,[{key:"ngOnInit",value:function(){this.loginForm=new c.e({login:new c.c("",{updateOn:"change",validators:[c.o.pattern("^[a-zA-Z0-9_\\-]{2,60}$"),c.o.minLength(2),c.o.maxLength(60),c.o.required]}),password:new c.c("",{updateOn:"change",validators:[c.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),c.o.minLength(8),c.o.maxLength(60),c.o.required]})})}},{key:"switchInputType",value:function(){this.inputType="password"===this.inputType?"text":"password"}},{key:"onLogin",value:function(){var n=this,o={login:this.loginForm.get("login").value,password:this.loginForm.get("password").value};this.userService.login(o).subscribe(function(o){return n.resetForm()},function(n){return console.log("login Error",n)})}},{key:"resetForm",value:function(){this.loginFormDirective&&this.loginFormDirective.resetForm()}}]),o}()).\u0275fac=function(n){return new(n||g)(u.Ib(b.a),u.Ib(a.g))},g.\u0275cmp=u.Cb({type:g,selectors:[["app-login-form"]],viewQuery:function(n,o){var e;1&n&&u.pc(l,!0),2&n&&u.gc(e=u.Wb())&&(o.loginFormDirective=e.first)},decls:36,vars:6,consts:[[3,"formGroup"],["loginFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["button","","color","primary","routerLink","/user/login/signup"],["name","person-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","login"],["class","input-error","color","danger",4,"ngIf"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["expand","block",3,"disabled","click"],["color","danger",1,"input-error"]],template:function(n,o){1&n&&(u.Nb(0,"ion-header"),u.Nb(1,"ion-toolbar"),u.Nb(2,"ion-title"),u.lc(3,"Login"),u.Mb(),u.Mb(),u.Mb(),u.Nb(4,"ion-content"),u.Nb(5,"form",0,1),u.Nb(7,"ion-grid"),u.Nb(8,"ion-row"),u.Nb(9,"ion-col",2),u.Nb(10,"ion-card"),u.Nb(11,"ion-card-header"),u.Nb(12,"ion-card-title",3),u.lc(13,"Login"),u.Mb(),u.Nb(14,"ion-card-subtitle",3),u.Nb(15,"a",4),u.lc(16,"or Signup"),u.Mb(),u.Mb(),u.Mb(),u.Nb(17,"ion-card-content"),u.Nb(18,"ion-list"),u.Nb(19,"ion-item"),u.Jb(20,"ion-icon",5),u.Nb(21,"ion-label",6),u.lc(22,"Login"),u.Mb(),u.Jb(23,"ion-input",7),u.Mb(),u.kc(24,p,3,3,"ion-text",8),u.Nb(25,"ion-item",9),u.Jb(26,"ion-icon",10),u.Nb(27,"ion-label",6),u.lc(28,"Password"),u.Mb(),u.Jb(29,"ion-input",11),u.Nb(30,"ion-icon",12),u.Vb("click",function(){return o.switchInputType()}),u.Mb(),u.Mb(),u.kc(31,m,3,3,"ion-text",8),u.Mb(),u.Mb(),u.Mb(),u.Nb(32,"ion-row"),u.Nb(33,"ion-col"),u.Nb(34,"ion-button",13),u.Vb("click",function(){return o.onLogin()}),u.lc(35," Login "),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb()),2&n&&(u.yb(5),u.dc("formGroup",o.loginForm),u.yb(19),u.dc("ngIf",o.loginForm.get("login").touched&&o.loginForm.get("login").errors),u.yb(5),u.dc("type",o.inputType),u.yb(1),u.dc("name","password"===o.inputType?"eye-outline":"eye-off-outline"),u.yb(1),u.dc("ngIf",o.loginForm.get("password").touched&&o.loginForm.get("password").errors),u.yb(3),u.dc("disabled","INVALID"===o.loginForm.status))},directives:[s.p,s.O,s.N,s.m,c.p,c.l,c.f,s.o,s.G,s.l,s.g,s.i,s.k,s.j,a.j,s.V,s.h,s.x,s.s,s.q,s.w,s.r,s.X,c.k,c.d,r.n,s.e,s.M],pipes:[r.g],styles:[""]}),g),d=i("XNiG"),y=i("vkgz"),h=i("eIep"),N=i("JX91"),v=i("pLZG"),w=i("IzEk"),M=["signupFormDirective"];function F(n,o){if(1&n&&(u.Nb(0,"ion-text",22),u.lc(1),u.Yb(2,"json"),u.Mb()),2&n){var e=u.Xb(2);u.yb(1),u.nc(" ",u.Zb(2,1,e.signupForm.get("companyName").errors)," ")}}function k(n,o){if(1&n&&(u.Nb(0,"ion-text",22),u.lc(1),u.Yb(2,"json"),u.Mb()),2&n){var e=u.Xb(2);u.yb(1),u.nc(" ",u.Zb(2,1,e.signupForm.get("login").errors)," ")}}function I(n,o){if(1&n&&(u.Nb(0,"ion-text",22),u.lc(1),u.Yb(2,"json"),u.Mb()),2&n){var e=u.Xb(2);u.yb(1),u.nc(" ",u.Zb(2,1,e.signupForm.get("email").errors)," ")}}function x(n,o){if(1&n&&(u.Nb(0,"ion-text",22),u.lc(1),u.Yb(2,"json"),u.Mb()),2&n){var e=u.Xb(2);u.yb(1),u.nc(" ",u.Zb(2,1,e.signupForm.get("password").errors)," ")}}function L(n,o){1&n&&u.Jb(0,"ion-icon",23),2&n&&u.dc("name","checkmark-done-outline")}function j(n,o){if(1&n&&(u.Nb(0,"ion-text",22),u.lc(1),u.Yb(2,"json"),u.Mb()),2&n){var e=u.Xb(2);u.yb(1),u.nc(" ",u.Zb(2,1,e.signupForm.get("passwordConfirm").errors)," ")}}function C(n,o){if(1&n){var e=u.Ob();u.Nb(0,"form",1,2),u.Nb(2,"ion-grid"),u.Nb(3,"ion-row"),u.Nb(4,"ion-col",3),u.Nb(5,"ion-card"),u.Nb(6,"ion-card-header"),u.Nb(7,"ion-card-title",4),u.lc(8,"Signup"),u.Mb(),u.Nb(9,"ion-card-subtitle",4),u.Nb(10,"a",5),u.lc(11,"or Login"),u.Mb(),u.Mb(),u.Mb(),u.Nb(12,"ion-card-content"),u.Nb(13,"ion-list"),u.Nb(14,"ion-item"),u.Jb(15,"ion-icon",6),u.Nb(16,"ion-label",7),u.lc(17,"Company name"),u.Mb(),u.Jb(18,"ion-input",8),u.Mb(),u.kc(19,F,3,3,"ion-text",9),u.Nb(20,"ion-item"),u.Jb(21,"ion-icon",10),u.Nb(22,"ion-label",7),u.lc(23,"Login"),u.Mb(),u.Jb(24,"ion-input",11),u.Mb(),u.kc(25,k,3,3,"ion-text",9),u.Nb(26,"ion-item"),u.Jb(27,"ion-icon",12),u.Nb(28,"ion-label",7),u.lc(29,"Email"),u.Mb(),u.Jb(30,"ion-input",13),u.Mb(),u.kc(31,I,3,3,"ion-text",9),u.Nb(32,"ion-item",14),u.Jb(33,"ion-icon",15),u.Nb(34,"ion-label",7),u.lc(35,"Password"),u.Mb(),u.Jb(36,"ion-input",16),u.Nb(37,"ion-icon",17),u.Vb("click",function(){return u.hc(e),u.Xb().switchInputType()}),u.Mb(),u.Mb(),u.kc(38,x,3,3,"ion-text",9),u.Nb(39,"ion-item",14),u.Jb(40,"ion-icon",18),u.Nb(41,"ion-label",7),u.lc(42,"Password Confirm"),u.Mb(),u.Jb(43,"ion-input",19),u.kc(44,L,1,1,"ion-icon",20),u.Mb(),u.kc(45,j,3,3,"ion-text",9),u.Mb(),u.Mb(),u.Mb(),u.Nb(46,"ion-row"),u.Nb(47,"ion-col"),u.Nb(48,"ion-button",21),u.Vb("click",function(){return u.hc(e),u.Xb().formSubmitSubject$.next()}),u.lc(49," Signup "),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb()}if(2&n){var t=u.Xb();u.dc("formGroup",t.signupForm),u.yb(19),u.dc("ngIf",t.signupForm.get("companyName").touched&&t.signupForm.get("companyName").errors&&!t.signupForm.get("companyName").errors.unique),u.yb(6),u.dc("ngIf",t.signupForm.get("login").touched&&t.signupForm.get("login").errors),u.yb(6),u.dc("ngIf",t.signupForm.get("email").touched&&t.signupForm.get("email").errors),u.yb(5),u.dc("type",t.inputType),u.yb(1),u.dc("name","password"===t.inputType?"eye-outline":"eye-off-outline"),u.yb(1),u.dc("ngIf",t.signupForm.get("password").touched&&t.signupForm.get("password").errors),u.yb(5),u.dc("type",t.inputType),u.yb(1),u.dc("ngIf","VALID"===t.signupForm.get("passwordConfirm").status),u.yb(1),u.dc("ngIf",t.signupForm.get("passwordConfirm").touched&&t.signupForm.get("passwordConfirm").errors),u.yb(3),u.dc("disabled","INVALID"===t.signupForm.status||"PENDING"===t.signupForm.status)}}var S,O,J,T,D=((S=function(){function o(e,t){n(this,o),this.userService=e,this.router=t,this.inputType="password",this.formSubmitSubject$=new d.a}return e(o,[{key:"ngOnInit",value:function(){var n=this;this.signupForm=new c.e({companyName:new c.c("",{updateOn:"blur",validators:[c.o.pattern("^[a-zA-Z0-9 _\\-]{2,60}$"),c.o.minLength(2),c.o.maxLength(60),c.o.required],asyncValidators:[this.userService.checkCompanyNameUnique()]}),login:new c.c("",{updateOn:"blur",validators:[c.o.pattern("^[a-zA-Z0-9_\\-]{2,60}$"),c.o.minLength(2),c.o.maxLength(60),c.o.required],asyncValidators:[this.userService.checkLoginUnique()]}),password:new c.c("",{updateOn:"change",validators:[c.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),c.o.minLength(8),c.o.maxLength(60),c.o.required]}),passwordConfirm:new c.c("",{updateOn:"change",validators:[c.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),c.o.minLength(8),c.o.maxLength(60),c.o.required]}),email:new c.c("",{updateOn:"blur",validators:[c.o.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"),c.o.required],asyncValidators:[this.userService.checkEmailUnique()]})},this.userService.matchPassword),this.formSubmitSubject$.pipe(Object(y.a)(function(){return n.signupForm.markAsDirty()}),Object(h.a)(function(){return n.signupForm.statusChanges.pipe(Object(N.a)(n.signupForm.status),Object(v.a)(function(n){return"PENDING"!==n}),Object(w.a)(1))}),Object(v.a)(function(n){return"VALID"===n})).subscribe(function(o){return n.onSignup()})}},{key:"switchInputType",value:function(){this.inputType="password"===this.inputType?"text":"password"}},{key:"onSignup",value:function(){var n=this;this.userService.createCompany({companyName:this.signupForm.get("companyName").value,user:{login:this.signupForm.get("login").value,password:this.signupForm.get("password").value,email:this.signupForm.get("email").value}}).subscribe(function(o){return n.resetForm()},function(n){return console.log("signup Error",n.error)})}},{key:"resetForm",value:function(){this.signupFormDirective&&this.signupFormDirective.resetForm()}}]),o}()).\u0275fac=function(n){return new(n||S)(u.Ib(b.a),u.Ib(a.g))},S.\u0275cmp=u.Cb({type:S,selectors:[["app-signup-form"]],viewQuery:function(n,o){var e;1&n&&u.pc(M,!0),2&n&&u.gc(e=u.Wb())&&(o.signupFormDirective=e.first)},decls:6,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["signupFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["button","","color","primary","routerLink","/user/login"],["name","podium-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","companyName"],["class","input-error","color","danger",4,"ngIf"],["name","person-outline","slot","start",1,"ion-align-self-center"],["type","text","autocomplete","","autocorrect","","formControlName","login"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["name","reorder-two-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","passwordConfirm",3,"type"],["class","ion-align-self-center","color","primary","slot","end",3,"name",4,"ngIf"],["expand","block",3,"disabled","click"],["color","danger",1,"input-error"],["color","primary","slot","end",1,"ion-align-self-center",3,"name"]],template:function(n,o){1&n&&(u.Nb(0,"ion-header"),u.Nb(1,"ion-toolbar"),u.Nb(2,"ion-title"),u.lc(3,"Signup"),u.Mb(),u.Mb(),u.Mb(),u.Nb(4,"ion-content"),u.kc(5,C,50,11,"form",0),u.Mb()),2&n&&(u.yb(5),u.dc("ngIf",o.signupForm))},directives:[s.p,s.O,s.N,s.m,r.n,c.p,c.l,c.f,s.o,s.G,s.l,s.g,s.i,s.k,s.j,a.j,s.V,s.h,s.x,s.s,s.q,s.w,s.r,s.X,c.k,c.d,s.e,s.M],pipes:[r.g],styles:[""]}),S),X=i("lJxs"),A=i("l7P3"),Z=((O=function(){function o(e,t,i){n(this,o),this.userService=e,this.router=t,this.store=i}return e(o,[{key:"canActivate",value:function(n,o){var e=this;return this.store.select("user").pipe(Object(X.a)(function(n){return!n.user||(e.router.navigateByUrl("/"),!1)}))}}]),o}()).\u0275fac=function(n){return new(n||O)(u.Rb(b.a),u.Rb(a.g),u.Rb(A.i))},O.\u0275prov=u.Eb({token:O,factory:O.\u0275fac,providedIn:"root"}),O),q=[{path:"",component:f,canActivate:[Z]},{path:"signup",component:D,canActivate:[Z]},{path:"**",redirectTo:"",pathMatch:"full"}],z=((T=function o(){n(this,o)}).\u0275mod=u.Gb({type:T}),T.\u0275inj=u.Fb({factory:function(n){return new(n||T)},imports:[[a.k.forChild(q)],a.k]}),T),G=((J=function o(){n(this,o)}).\u0275mod=u.Gb({type:J}),J.\u0275inj=u.Fb({factory:function(n){return new(n||J)},imports:[[r.c,c.n,s.P,z]]}),J)}}])}();