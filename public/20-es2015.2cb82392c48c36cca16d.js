(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"M/w1":function(n,o,e){"use strict";e.r(o),e.d(o,"LoginFormPageModule",function(){return T});var t=e("ofXK"),i=e("3Pt+"),r=e("TEn/"),s=e("tyNb"),a=e("mYIz"),c=e("fXoL"),b=e("d6tv"),l=e("l7P3"),u=e("sYmb");const p=["loginFormDirective"];function m(n,o){if(1&n&&(c.Nb(0,"ion-text",18),c.nc(1),c.Yb(2,"json"),c.Mb()),2&n){const n=c.Xb();c.yb(1),c.pc(" ",c.Zb(2,1,n.loginForm.get("login").errors)," ")}}function g(n,o){if(1&n&&(c.Nb(0,"ion-text",18),c.nc(1),c.Yb(2,"json"),c.Mb()),2&n){const n=c.Xb();c.yb(1),c.pc(" ",c.Zb(2,1,n.loginForm.get("password").errors)," ")}}let d=(()=>{class n{constructor(n,o,e,t){this.userService=n,this.router=o,this.store=e,this.translate=t,this.inputType="password"}ngOnInit(){this.lang=this.translate.currentLang,this.loginForm=new i.e({login:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{2,60}$"),i.o.minLength(2),i.o.maxLength(60),i.o.required]}),password:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),i.o.minLength(8),i.o.maxLength(60),i.o.required]})})}switchInputType(){this.inputType="password"===this.inputType?"text":"password"}onLogin(){const n={login:this.loginForm.get("login").value,password:this.loginForm.get("password").value};this.store.dispatch(new a.j({user:n})),this.resetForm()}resetForm(){this.loginFormDirective&&this.loginFormDirective.resetForm()}switchLanguage(){this.lang="en"===this.lang?"uk":"en",this.translate.use(this.lang)}}return n.\u0275fac=function(o){return new(o||n)(c.Ib(b.a),c.Ib(s.g),c.Ib(l.i),c.Ib(u.d))},n.\u0275cmp=c.Cb({type:n,selectors:[["app-login-form"]],viewQuery:function(n,o){var e;1&n&&c.rc(p,!0),2&n&&c.hc(e=c.Wb())&&(o.loginFormDirective=e.first)},decls:50,vars:27,consts:[["slot","end"],["color","primary","button","","lines","none",3,"click"],["name","earth-outline","slot","start"],[3,"formGroup"],["loginFormDirective","ngForm"],["size-md","6","offset-md","3"],["src","/assets/shapes.svg",1,"logo_login"],[1,"ion-text-center"],["button","","color","primary","routerLink","/user/login/signup"],["name","person-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","login"],["class","input-error","color","danger",4,"ngIf"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["expand","block",3,"disabled","click"],["color","danger",1,"input-error"]],template:function(n,o){1&n&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.nc(3),c.Yb(4,"translate"),c.Mb(),c.Nb(5,"ion-buttons",0),c.Nb(6,"ion-item",1),c.Vb("click",function(){return o.switchLanguage()}),c.Jb(7,"ion-icon",2),c.Nb(8,"ion-label"),c.nc(9),c.Yb(10,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(11,"ion-content"),c.Nb(12,"form",3,4),c.Nb(14,"ion-grid"),c.Nb(15,"ion-row"),c.Nb(16,"ion-col",5),c.Nb(17,"ion-card"),c.Nb(18,"ion-card-header"),c.Nb(19,"div"),c.Jb(20,"img",6),c.Mb(),c.Nb(21,"ion-card-title",7),c.nc(22),c.Yb(23,"translate"),c.Mb(),c.Nb(24,"ion-card-subtitle",7),c.Nb(25,"a",8),c.nc(26),c.Yb(27,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Nb(28,"ion-card-content"),c.Nb(29,"ion-list"),c.Nb(30,"ion-item"),c.Jb(31,"ion-icon",9),c.Nb(32,"ion-label",10),c.nc(33),c.Yb(34,"translate"),c.Mb(),c.Jb(35,"ion-input",11),c.Mb(),c.mc(36,m,3,3,"ion-text",12),c.Nb(37,"ion-item",13),c.Jb(38,"ion-icon",14),c.Nb(39,"ion-label",10),c.nc(40),c.Yb(41,"translate"),c.Mb(),c.Jb(42,"ion-input",15),c.Nb(43,"ion-icon",16),c.Vb("click",function(){return o.switchInputType()}),c.Mb(),c.Mb(),c.mc(44,g,3,3,"ion-text",12),c.Mb(),c.Mb(),c.Mb(),c.Nb(45,"ion-row"),c.Nb(46,"ion-col"),c.Nb(47,"ion-button",17),c.Vb("click",function(){return o.onLogin()}),c.nc(48),c.Yb(49,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb()),2&n&&(c.yb(3),c.oc(c.Zb(4,13,"modules.user.signin")),c.yb(6),c.oc(c.Zb(10,15,"language")),c.yb(3),c.dc("formGroup",o.loginForm),c.yb(10),c.oc(c.Zb(23,17,"modules.user.signin")),c.yb(4),c.oc(c.Zb(27,19,"modules.user.orSignup")),c.yb(7),c.oc(c.Zb(34,21,"modules.user.login")),c.yb(3),c.dc("ngIf",o.loginForm.get("login").touched&&o.loginForm.get("login").errors),c.yb(4),c.oc(c.Zb(41,23,"modules.user.password")),c.yb(2),c.dc("type",o.inputType),c.yb(1),c.dc("name","password"===o.inputType?"eye-outline":"eye-off-outline"),c.yb(1),c.dc("ngIf",o.loginForm.get("password").touched&&o.loginForm.get("password").errors),c.yb(3),c.dc("disabled","INVALID"===o.loginForm.status),c.yb(1),c.pc(" ",c.Zb(49,25,"modules.user.signin")," "))},directives:[r.q,r.S,r.Q,r.g,r.t,r.r,r.z,r.n,i.p,i.l,i.f,r.p,r.J,r.m,r.h,r.j,r.l,r.k,s.j,r.ab,r.i,r.A,r.s,r.cb,i.k,i.d,t.n,r.f,r.P],pipes:[u.c,t.g],styles:[".logo_login[_ngcontent-%COMP%]{width:100%;margin:auto;display:block}"]}),n})();var h=e("XNiG"),f=e("vkgz"),y=e("eIep"),N=e("JX91"),w=e("pLZG"),M=e("IzEk");const F=["signupFormDirective"];function v(n,o){if(1&n&&(c.Nb(0,"ion-text",26),c.nc(1),c.Yb(2,"json"),c.Mb()),2&n){const n=c.Xb(2);c.yb(1),c.pc(" ",c.Zb(2,1,n.signupForm.get("companyName").errors)," ")}}function k(n,o){if(1&n&&(c.Nb(0,"ion-text",26),c.nc(1),c.Yb(2,"json"),c.Mb()),2&n){const n=c.Xb(2);c.yb(1),c.pc(" ",c.Zb(2,1,n.signupForm.get("login").errors)," ")}}function I(n,o){if(1&n&&(c.Nb(0,"ion-text",26),c.nc(1),c.Yb(2,"json"),c.Mb()),2&n){const n=c.Xb(2);c.yb(1),c.pc(" ",c.Zb(2,1,n.signupForm.get("email").errors)," ")}}function x(n,o){if(1&n&&(c.Nb(0,"ion-text",26),c.nc(1),c.Yb(2,"json"),c.Mb()),2&n){const n=c.Xb(2);c.yb(1),c.pc(" ",c.Zb(2,1,n.signupForm.get("password").errors)," ")}}function Z(n,o){1&n&&c.Jb(0,"ion-icon",27),2&n&&c.dc("name","checkmark-done-outline")}function L(n,o){if(1&n&&(c.Nb(0,"ion-text",26),c.nc(1),c.Yb(2,"json"),c.Mb()),2&n){const n=c.Xb(2);c.yb(1),c.pc(" ",c.Zb(2,1,n.signupForm.get("passwordConfirm").errors)," ")}}function j(n,o){if(1&n){const n=c.Ob();c.Nb(0,"form",4,5),c.Nb(2,"ion-grid"),c.Nb(3,"ion-row"),c.Nb(4,"ion-col",6),c.Nb(5,"ion-card"),c.Nb(6,"ion-card-header"),c.Nb(7,"div"),c.Jb(8,"img",7),c.Mb(),c.Nb(9,"ion-card-title",8),c.nc(10),c.Yb(11,"translate"),c.Mb(),c.Nb(12,"ion-card-subtitle",8),c.Nb(13,"a",9),c.nc(14),c.Yb(15,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Nb(16,"ion-card-content"),c.Nb(17,"ion-list"),c.Nb(18,"ion-item"),c.Jb(19,"ion-icon",10),c.Nb(20,"ion-label",11),c.nc(21),c.Yb(22,"translate"),c.Mb(),c.Jb(23,"ion-input",12),c.Mb(),c.mc(24,v,3,3,"ion-text",13),c.Nb(25,"ion-item"),c.Jb(26,"ion-icon",14),c.Nb(27,"ion-label",11),c.nc(28),c.Yb(29,"translate"),c.Mb(),c.Jb(30,"ion-input",15),c.Mb(),c.mc(31,k,3,3,"ion-text",13),c.Nb(32,"ion-item"),c.Jb(33,"ion-icon",16),c.Nb(34,"ion-label",11),c.nc(35),c.Yb(36,"translate"),c.Mb(),c.Jb(37,"ion-input",17),c.Mb(),c.mc(38,I,3,3,"ion-text",13),c.Nb(39,"ion-item",18),c.Jb(40,"ion-icon",19),c.Nb(41,"ion-label",11),c.nc(42),c.Yb(43,"translate"),c.Mb(),c.Jb(44,"ion-input",20),c.Nb(45,"ion-icon",21),c.Vb("click",function(){return c.jc(n),c.Xb().switchInputType()}),c.Mb(),c.Mb(),c.mc(46,x,3,3,"ion-text",13),c.Nb(47,"ion-item",18),c.Jb(48,"ion-icon",22),c.Nb(49,"ion-label",11),c.nc(50),c.Yb(51,"translate"),c.Mb(),c.Jb(52,"ion-input",23),c.mc(53,Z,1,1,"ion-icon",24),c.Mb(),c.mc(54,L,3,3,"ion-text",13),c.Mb(),c.Mb(),c.Mb(),c.Nb(55,"ion-row"),c.Nb(56,"ion-col"),c.Nb(57,"ion-button",25),c.Vb("click",function(){return c.jc(n),c.Xb().formSubmitSubject$.next()}),c.nc(58),c.Yb(59,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb()}if(2&n){const n=c.Xb();c.dc("formGroup",n.signupForm),c.yb(10),c.oc(c.Zb(11,19,"modules.user.signup")),c.yb(4),c.oc(c.Zb(15,21,"modules.user.orSignin")),c.yb(7),c.oc(c.Zb(22,23,"modules.user.companyName")),c.yb(3),c.dc("ngIf",n.signupForm.get("companyName").touched&&n.signupForm.get("companyName").errors&&!n.signupForm.get("companyName").errors.unique),c.yb(4),c.oc(c.Zb(29,25,"modules.user.signin")),c.yb(3),c.dc("ngIf",n.signupForm.get("login").touched&&n.signupForm.get("login").errors),c.yb(4),c.oc(c.Zb(36,27,"modules.user.email")),c.yb(3),c.dc("ngIf",n.signupForm.get("email").touched&&n.signupForm.get("email").errors),c.yb(4),c.oc(c.Zb(43,29,"modules.user.password")),c.yb(2),c.dc("type",n.inputType),c.yb(1),c.dc("name","password"===n.inputType?"eye-outline":"eye-off-outline"),c.yb(1),c.dc("ngIf",n.signupForm.get("password").touched&&n.signupForm.get("password").errors),c.yb(4),c.oc(c.Zb(51,31,"modules.user.confirmPassword")),c.yb(2),c.dc("type",n.inputType),c.yb(1),c.dc("ngIf",n.signupForm.get("passwordConfirm").touched&&"VALID"===n.signupForm.get("passwordConfirm").status),c.yb(1),c.dc("ngIf",n.signupForm.get("passwordConfirm").touched&&n.signupForm.get("passwordConfirm").errors),c.yb(3),c.dc("disabled","INVALID"===n.signupForm.status||"PENDING"===n.signupForm.status),c.yb(1),c.pc(" ",c.Zb(59,33,"modules.user.signup")," ")}}let Y=(()=>{class n{constructor(n,o,e){this.userService=n,this.router=o,this.translate=e,this.inputType="password",this.formSubmitSubject$=new h.a}ngOnInit(){this.lang=this.translate.currentLang,this.signupForm=new i.e({companyName:new i.c("",{updateOn:"blur",validators:[i.o.pattern("^[a-zA-Z0-9 _\\-]{2,60}$"),i.o.minLength(2),i.o.maxLength(60),i.o.required],asyncValidators:[this.userService.checkCompanyNameUnique()]}),login:new i.c("",{updateOn:"blur",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{2,60}$"),i.o.minLength(2),i.o.maxLength(60),i.o.required],asyncValidators:[this.userService.checkLoginUnique()]}),password:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),i.o.minLength(8),i.o.maxLength(60),i.o.required]}),passwordConfirm:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),i.o.minLength(8),i.o.maxLength(60),i.o.required]}),email:new i.c("",{updateOn:"blur",validators:[i.o.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"),i.o.required],asyncValidators:[this.userService.checkEmailUnique()]})},this.userService.matchPassword),this.formSubmitSubject$.pipe(Object(f.a)(()=>this.signupForm.markAsDirty()),Object(y.a)(()=>this.signupForm.statusChanges.pipe(Object(N.a)(this.signupForm.status),Object(w.a)(n=>"PENDING"!==n),Object(M.a)(1))),Object(w.a)(n=>"VALID"===n)).subscribe(n=>this.onSignup())}switchInputType(){this.inputType="password"===this.inputType?"text":"password"}onSignup(){this.userService.createCompany({companyName:this.signupForm.get("companyName").value,user:{login:this.signupForm.get("login").value,password:this.signupForm.get("password").value,email:this.signupForm.get("email").value}}).subscribe(n=>this.resetForm(),n=>console.log("signup Error",n.error))}resetForm(){this.signupFormDirective&&this.signupFormDirective.resetForm()}switchLanguage(){this.lang="en"===this.lang?"uk":"en",this.translate.use(this.lang)}}return n.\u0275fac=function(o){return new(o||n)(c.Ib(b.a),c.Ib(s.g),c.Ib(u.d))},n.\u0275cmp=c.Cb({type:n,selectors:[["app-signup-form"]],viewQuery:function(n,o){var e;1&n&&c.rc(F,!0),2&n&&c.hc(e=c.Wb())&&(o.signupFormDirective=e.first)},decls:13,vars:7,consts:[["slot","end"],["color","primary","button","","lines","none",3,"click"],["name","earth-outline","slot","start"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["signupFormDirective","ngForm"],["size-md","6","offset-md","3"],["src","/assets/shapes.svg",1,"logo_login"],[1,"ion-text-center"],["button","","color","primary","routerLink","/user/login"],["name","podium-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","companyName"],["class","input-error","color","danger",4,"ngIf"],["name","person-outline","slot","start",1,"ion-align-self-center"],["type","text","autocomplete","","autocorrect","","formControlName","login"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["name","reorder-two-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","passwordConfirm",3,"type"],["class","ion-align-self-center","color","primary","slot","end",3,"name",4,"ngIf"],["expand","block",3,"disabled","click"],["color","danger",1,"input-error"],["color","primary","slot","end",1,"ion-align-self-center",3,"name"]],template:function(n,o){1&n&&(c.Nb(0,"ion-header"),c.Nb(1,"ion-toolbar"),c.Nb(2,"ion-title"),c.nc(3),c.Yb(4,"translate"),c.Mb(),c.Nb(5,"ion-buttons",0),c.Nb(6,"ion-item",1),c.Vb("click",function(){return o.switchLanguage()}),c.Jb(7,"ion-icon",2),c.Nb(8,"ion-label"),c.nc(9),c.Yb(10,"translate"),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Mb(),c.Nb(11,"ion-content"),c.mc(12,j,60,35,"form",3),c.Mb()),2&n&&(c.yb(3),c.oc(c.Zb(4,3,"modules.user.signup")),c.yb(6),c.oc(c.Zb(10,5,"language")),c.yb(3),c.dc("ngIf",o.signupForm))},directives:[r.q,r.S,r.Q,r.g,r.t,r.r,r.z,r.n,t.n,i.p,i.l,i.f,r.p,r.J,r.m,r.h,r.j,r.l,r.k,s.j,r.ab,r.i,r.A,r.s,r.cb,i.k,i.d,r.f,r.P],pipes:[u.c,t.g],styles:[".logo_login[_ngcontent-%COMP%]{width:100%;margin:auto;display:block}"]}),n})();var J=e("lJxs");let C=(()=>{class n{constructor(n,o,e){this.userService=n,this.router=o,this.store=e}canActivate(n,o){return this.store.select("user").pipe(Object(J.a)(n=>!n.user||(this.router.navigateByUrl("/"),!1)))}}return n.\u0275fac=function(o){return new(o||n)(c.Rb(b.a),c.Rb(s.g),c.Rb(l.i))},n.\u0275prov=c.Eb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const S=[{path:"",component:d,canActivate:[C]},{path:"signup",component:Y,canActivate:[C]},{path:"**",redirectTo:"",pathMatch:"full"}];let O=(()=>{class n{}return n.\u0275mod=c.Gb({type:n}),n.\u0275inj=c.Fb({factory:function(o){return new(o||n)},imports:[[s.k.forChild(S)],s.k]}),n})(),T=(()=>{class n{}return n.\u0275mod=c.Gb({type:n}),n.\u0275inj=c.Fb({factory:function(o){return new(o||n)},imports:[[t.c,i.n,r.T,O,u.b.forChild({extend:!0})]]}),n})()}}]);