(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"L/5t":function(t,e,o){"use strict";o.r(e),o.d(e,"ProfilePageModule",function(){return S});var i=o("ofXK"),n=o("3Pt+"),b=o("TEn/"),a=o("tyNb"),r=o("mrSG"),s=o("z6cu"),c=o("Cfvw"),l=o("JIr8"),m=o("eIep"),d=o("mYIz"),u=o("mgGq"),p=o("fXoL"),N=o("d6tv"),M=o("sYmb");const f=["activateEmailCodeFormDirective"];function h(t,e){if(1&t&&(p.Nb(0,"ion-text",16),p.oc(1),p.Yb(2,"json"),p.Mb()),2&t){const t=p.Xb(2);p.yb(1),p.qc(" ",p.Zb(2,1,t.activateEmailCodeForm.get("code").errors)," ")}}function v(t,e){if(1&t){const t=p.Ob();p.Nb(0,"form",3,4),p.Nb(2,"ion-grid"),p.Nb(3,"ion-row"),p.Nb(4,"ion-col",5),p.Nb(5,"ion-card"),p.Nb(6,"ion-card-header"),p.Nb(7,"ion-card-title",6),p.oc(8),p.Yb(9,"translate"),p.Mb(),p.Nb(10,"ion-card-subtitle",6),p.oc(11),p.Yb(12,"translate"),p.Mb(),p.Mb(),p.Nb(13,"ion-card-content"),p.Nb(14,"ion-list"),p.Nb(15,"ion-item",7),p.Jb(16,"ion-icon",8),p.Nb(17,"ion-label",9),p.oc(18),p.Yb(19,"translate"),p.Mb(),p.Jb(20,"ion-input",10),p.Mb(),p.nc(21,h,3,3,"ion-text",11),p.Mb(),p.Mb(),p.Mb(),p.Nb(22,"ion-row"),p.Nb(23,"ion-col",12),p.Nb(24,"ion-button",13),p.Vb("click",function(){return p.kc(t),p.Xb().activate()}),p.oc(25),p.Yb(26,"translate"),p.Mb(),p.Mb(),p.Nb(27,"ion-col",14),p.Nb(28,"ion-button",15),p.Vb("click",function(){return p.kc(t),p.Xb().dismiss(null)}),p.oc(29," Cancel "),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()}if(2&t){const t=p.Xb();p.dc("formGroup",t.activateEmailCodeForm),p.yb(8),p.qc("",p.Zb(9,7,"elements.button.activate")," email"),p.yb(3),p.qc("",p.Zb(12,9,"modules.dashboard.profile.activationText")," "),p.yb(7),p.pc(p.Zb(19,11,"modules.dashboard.profile.code")),p.yb(3),p.dc("ngIf",t.activateEmailCodeForm.get("code").touched&&t.activateEmailCodeForm.get("code").errors),p.yb(3),p.dc("disabled","INVALID"===t.activateEmailCodeForm.status||"PENDING"===t.activateEmailCodeForm.status),p.yb(1),p.qc(" ",p.Zb(26,13,"elements.button.update")," ")}}let y=(()=>{class t{constructor(t,e){this.modalController=t,this.userService=e}ngOnInit(){this.activateEmailCodeForm=new n.e({code:new n.c("",{updateOn:"change",validators:[n.o.pattern("^[0-9]{2,10}$"),n.o.minLength(2),n.o.maxLength(10),n.o.required]})})}dismiss(t){this.modalController.dismiss(t)}activate(){this.dismiss({code:this.activateEmailCodeForm.get("code").value}),this.resetForm()}resetForm(){this.activateEmailCodeFormDirective&&this.activateEmailCodeFormDirective.resetForm()}}return t.\u0275fac=function(e){return new(e||t)(p.Ib(b.X),p.Ib(N.a))},t.\u0275cmp=p.Cb({type:t,selectors:[["app-update-activation"]],viewQuery:function(t,e){var o;1&t&&p.sc(f,!0),2&t&&p.ic(o=p.Wb())&&(e.activateEmailCodeFormDirective=o.first)},decls:11,vars:7,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["activateEmailCodeFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","number","autocomplete","","autocorrect","","formControlName","code"],["class","input-error","color","danger",4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["color","danger",1,"input-error"]],template:function(t,e){1&t&&(p.Nb(0,"ion-header"),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-title"),p.oc(3),p.Yb(4,"translate"),p.Mb(),p.Nb(5,"ion-buttons",0),p.Nb(6,"ion-button",1),p.Vb("click",function(){return e.dismiss(null)}),p.oc(7),p.Yb(8,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(9,"ion-content"),p.nc(10,v,30,15,"form",2),p.Mb()),2&t&&(p.yb(3),p.qc("",p.Zb(4,3,"elements.button.activate")," email"),p.yb(4),p.pc(p.Zb(8,5,"elements.button.close")),p.yb(3),p.dc("ngIf",e.activateEmailCodeForm))},directives:[b.q,b.T,b.R,b.g,b.f,b.n,i.n,n.p,n.l,n.f,b.p,b.J,b.m,b.h,b.j,b.l,b.k,b.i,b.A,b.t,b.r,b.z,b.s,b.Z,n.k,n.d,b.Q],pipes:[M.c,i.g],styles:[""]}),t})();var g=o("XNiG"),F=o("vkgz"),k=o("JX91"),E=o("pLZG"),w=o("IzEk");const C=["updateEmailFormDirective"];function I(t,e){if(1&t&&(p.Nb(0,"ion-text",16),p.oc(1),p.Yb(2,"json"),p.Mb()),2&t){const t=p.Xb(2);p.yb(1),p.qc(" ",p.Zb(2,1,t.updateEmailForm.get("email").errors)," ")}}function Y(t,e){if(1&t){const t=p.Ob();p.Nb(0,"form",3,4),p.Nb(2,"ion-grid"),p.Nb(3,"ion-row"),p.Nb(4,"ion-col",5),p.Nb(5,"ion-card"),p.Nb(6,"ion-card-header"),p.Nb(7,"ion-card-title",6),p.oc(8),p.Yb(9,"translate"),p.Mb(),p.Mb(),p.Nb(10,"ion-card-content"),p.Nb(11,"ion-list"),p.Nb(12,"ion-item",7),p.Jb(13,"ion-icon",8),p.Nb(14,"ion-label",9),p.oc(15,"Email"),p.Mb(),p.Jb(16,"ion-input",10),p.Mb(),p.nc(17,I,3,3,"ion-text",11),p.Mb(),p.Mb(),p.Mb(),p.Nb(18,"ion-row"),p.Nb(19,"ion-col",12),p.Nb(20,"ion-button",13),p.Vb("click",function(){return p.kc(t),p.Xb().formSubmitSubject$.next()}),p.oc(21),p.Yb(22,"translate"),p.Mb(),p.Mb(),p.Nb(23,"ion-col",14),p.Nb(24,"ion-button",15),p.Vb("click",function(){return p.kc(t),p.Xb().dismiss(null)}),p.oc(25," Cancel "),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()}if(2&t){const t=p.Xb();p.dc("formGroup",t.updateEmailForm),p.yb(8),p.qc("",p.Zb(9,5,"elements.button.update")," email"),p.yb(9),p.dc("ngIf",t.updateEmailForm.get("email").dirty&&t.updateEmailForm.get("email").errors),p.yb(3),p.dc("disabled","INVALID"===t.updateEmailForm.status||"PENDING"===t.updateEmailForm.status),p.yb(1),p.qc(" ",p.Zb(22,7,"elements.button.update")," ")}}let Z=(()=>{class t{constructor(t,e){this.modalController=t,this.userService=e,this.formSubmitSubject$=new g.a}ngOnInit(){this.updateEmailForm=new n.e({email:this.userService.emailFormControl("")}),this.formSubmitSubject$.pipe(Object(F.a)(()=>this.updateEmailForm.markAsDirty()),Object(F.a)(()=>console.log("tap")),Object(m.a)(()=>this.updateEmailForm.statusChanges.pipe(Object(k.a)(this.updateEmailForm.status),Object(E.a)(t=>(console.log("status",t),"PENDING"!==t)),Object(w.a)(1))),Object(E.a)(t=>"VALID"===t)).subscribe(t=>this.onUpdate())}dismiss(t){this.modalController.dismiss(t)}onUpdate(){this.dismiss({email:this.updateEmailForm.get("email").value}),this.resetForm()}resetForm(){this.updateEmailFormDirective&&this.updateEmailFormDirective.resetForm()}}return t.\u0275fac=function(e){return new(e||t)(p.Ib(b.X),p.Ib(N.a))},t.\u0275cmp=p.Cb({type:t,selectors:[["app-update-email"]],viewQuery:function(t,e){var o;1&t&&p.sc(C,!0),2&t&&p.ic(o=p.Wb())&&(e.updateEmailFormDirective=o.first)},inputs:{email:"email"},decls:11,vars:7,consts:[["slot","end"],[3,"click"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["updateEmailFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["lines","none"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["class","input-error","color","danger",4,"ngIf"],["size","8"],["expand","block",3,"disabled","click"],["size","4"],["expand","block",3,"click"],["color","danger",1,"input-error"]],template:function(t,e){1&t&&(p.Nb(0,"ion-header"),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-title"),p.oc(3),p.Yb(4,"translate"),p.Mb(),p.Nb(5,"ion-buttons",0),p.Nb(6,"ion-button",1),p.Vb("click",function(){return e.dismiss()}),p.oc(7),p.Yb(8,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(9,"ion-content"),p.nc(10,Y,26,9,"form",2),p.Mb()),2&t&&(p.yb(3),p.qc("",p.Zb(4,3,"elements.button.update")," Email"),p.yb(4),p.pc(p.Zb(8,5,"elements.button.close")),p.yb(3),p.dc("ngIf",e.updateEmailForm))},directives:[b.q,b.T,b.R,b.g,b.f,b.n,i.n,n.p,n.l,n.f,b.p,b.J,b.m,b.h,b.j,b.l,b.i,b.A,b.t,b.r,b.z,b.s,b.db,n.k,n.d,b.Q],pipes:[M.c,i.g],styles:[""]}),t})();var x=o("l7P3");let j=(()=>{class t{constructor(t,e,o,i){this.el=t,this.vcr=e,this.templateRef=o,this.userService=i,this.hasView=!1}set appPermission(t){this.userService.displayGuard(t).subscribe(t=>{if(t&&!this.hasView)this.vcr.createEmbeddedView(this.templateRef),this.hasView=!0;else{if(t&&this.hasView)return;this.vcr.clear(),this.hasView=!1}})}}return t.\u0275fac=function(e){return new(e||t)(p.Ib(p.m),p.Ib(p.P),p.Ib(p.L),p.Ib(N.a))},t.\u0275dir=p.Db({type:t,selectors:[["","appPermission",""]],inputs:{appPermission:"appPermission"}}),t})();function O(t,e){1&t&&(p.Nb(0,"p",3),p.Nb(1,"ion-text",12),p.oc(2),p.Yb(3,"translate"),p.Mb(),p.Mb()),2&t&&(p.yb(2),p.pc(p.Zb(3,1,"modules.dashboard.profile.activateWarning")))}function q(t,e){if(1&t){const t=p.Ob();p.Nb(0,"ion-button",9),p.Vb("click",function(){return p.kc(t),p.Xb().activate()}),p.oc(1),p.Yb(2,"translate"),p.Mb()}2&t&&(p.yb(1),p.qc(" ",p.Zb(2,1,"elements.button.activate")," "))}function D(t,e){if(1&t){const t=p.Ob();p.Nb(0,"ion-row"),p.Nb(1,"ion-col",13),p.Nb(2,"ion-item",6),p.Nb(3,"ion-button",14),p.Vb("click",function(){p.kc(t);const e=p.Xb();return e.presentAlert(e.company.companyName)}),p.oc(4),p.Yb(5,"translate"),p.Yb(6,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb()}2&t&&(p.yb(4),p.rc("",p.Zb(5,2,"elements.button.delete")," ",p.Zb(6,4,"modules.dashboard.profile.company"),""))}const V=function(t){return{component:t,item:"msgNotActivated",condition:!1}},P=function(t){return{component:t,item:"btnRemoveCompany"}},X=[{path:"",component:(()=>{class t{constructor(t,e,o,i,n){this.store=t,this.modalController=e,this.userService=o,this.alertController=i,this.translate=n,this.user=null}ngOnInit(){this.store.select(u.a).subscribe(t=>{this.company=t}),this.store.select(u.b).subscribe(t=>{this.user=t})}presentModal(t,e){return Object(r.a)(this,void 0,void 0,function*(){const o=yield this.modalController.create({component:t,componentProps:e});return yield o.present(),yield o.onWillDismiss()})}presentAlert(t){return Object(r.a)(this,void 0,void 0,function*(){const e=yield this.alertController.create({header:this.translate.instant("elements.button.delete")+" "+this.translate.instant("modules.dashboard.profile.company")+": "+t,subHeader:this.translate.instant("modules.dashboard.profile.deleteAttention"),message:this.translate.instant("dif.sure"),buttons:[{text:"Cancel",role:"cancel",handler:t=>{}},{text:"Okay",handler:()=>this.removeCompany(),cssClass:"color_danger"}]});yield e.present()})}removeCompany(){this.store.dispatch(new d.q)}activate(){this.userService.sendActivationCode(this.user._id).pipe(Object(l.a)(t=>Object(s.a)(t)),Object(m.a)(t=>Object(c.a)(this.presentModal(y)))).subscribe(t=>{var e;this.store.dispatch(new d.a({_id:this.user._id,code:null===(e=t.data)||void 0===e?void 0:e.code}))},t=>console.log("err activate",t))}updateEmail(){return Object(r.a)(this,void 0,void 0,function*(){const{data:t}=yield this.presentModal(Z);t&&this.store.dispatch(new d.t({_id:this.user._id,email:t.email}))})}}return t.\u0275fac=function(e){return new(e||t)(p.Ib(x.i),p.Ib(b.X),p.Ib(N.a),p.Ib(b.a),p.Ib(M.d))},t.\u0275cmp=p.Cb({type:t,selectors:[["app-profile"]],decls:87,vars:38,consts:[["slot","end"],["menu","dashboard-menu"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["class","ion-text-center",4,"appPermission"],["size","4",1,"ion-no-padding"],["lines","none",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],["color","primary"],[3,"click"],[3,"click",4,"ngIf"],[4,"appPermission"],["color","danger"],[1,"ion-no-padding"],["color","danger","fill","outline",3,"click"]],template:function(t,e){1&t&&(p.Nb(0,"ion-header"),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-title"),p.oc(3),p.Yb(4,"translate"),p.Mb(),p.Nb(5,"ion-buttons",0),p.Jb(6,"ion-menu-button",1),p.Mb(),p.Mb(),p.Mb(),p.Nb(7,"ion-content"),p.Nb(8,"ion-grid"),p.Nb(9,"ion-row"),p.Nb(10,"ion-col",2),p.Nb(11,"h2",3),p.oc(12),p.Mb(),p.nc(13,O,4,3,"p",4),p.Nb(14,"ion-list"),p.Nb(15,"ion-row"),p.Nb(16,"ion-col",5),p.Nb(17,"ion-item",6),p.Nb(18,"ion-label"),p.Nb(19,"h4"),p.oc(20),p.Yb(21,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(22,"ion-col",7),p.Nb(23,"ion-item",6),p.Nb(24,"ion-label"),p.Nb(25,"ion-text",8),p.Nb(26,"p"),p.oc(27),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(28,"ion-row"),p.Nb(29,"ion-col",5),p.Nb(30,"ion-item",6),p.Nb(31,"ion-label"),p.Nb(32,"h4"),p.oc(33),p.Yb(34,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(35,"ion-col",7),p.Nb(36,"ion-item",6),p.Nb(37,"ion-label"),p.Nb(38,"ion-text",8),p.Nb(39,"p"),p.oc(40),p.Mb(),p.Mb(),p.Mb(),p.Nb(41,"ion-button",9),p.Vb("click",function(){return e.updateEmail()}),p.oc(42),p.Yb(43,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(44,"ion-row"),p.Nb(45,"ion-col",5),p.Nb(46,"ion-item",6),p.Nb(47,"ion-label"),p.Nb(48,"h4"),p.oc(49),p.Yb(50,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(51,"ion-col",7),p.Nb(52,"ion-item",6),p.Nb(53,"ion-label"),p.Nb(54,"ion-text",8),p.Nb(55,"p"),p.oc(56),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(57,"ion-row"),p.Nb(58,"ion-col",5),p.Nb(59,"ion-item",6),p.Nb(60,"ion-label"),p.Nb(61,"h4"),p.oc(62),p.Yb(63,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(64,"ion-col",7),p.Nb(65,"ion-item",6),p.Nb(66,"ion-label"),p.Nb(67,"ion-text",8),p.Nb(68,"p"),p.oc(69),p.Yb(70,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(71,"ion-row"),p.Nb(72,"ion-col",5),p.Nb(73,"ion-item",6),p.Nb(74,"ion-label"),p.Nb(75,"h4"),p.oc(76),p.Yb(77,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(78,"ion-col",7),p.Nb(79,"ion-item",6),p.Nb(80,"ion-label"),p.Nb(81,"ion-text",8),p.Nb(82,"p"),p.oc(83),p.Yb(84,"translate"),p.Mb(),p.Mb(),p.Mb(),p.nc(85,q,3,3,"ion-button",10),p.Mb(),p.Mb(),p.Mb(),p.nc(86,D,7,6,"ion-row",11),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()),2&t&&(p.yb(3),p.pc(p.Zb(4,16,"modules.dashboard.profile.title")),p.yb(9),p.pc(e.company.companyName),p.yb(1),p.dc("appPermission",p.gc(34,V,e.constructor.name)),p.yb(7),p.pc(p.Zb(21,18,"modules.dashboard.profile.login")),p.yb(7),p.qc(" ",e.user.login," "),p.yb(6),p.pc(p.Zb(34,20,"modules.dashboard.profile.email")),p.yb(7),p.qc(" ",e.user.email," "),p.yb(2),p.qc(" ",p.Zb(43,22,"elements.button.update")," "),p.yb(7),p.pc(p.Zb(50,24,"modules.dashboard.profile.role")),p.yb(7),p.qc(" ",e.user.role," "),p.yb(6),p.pc(p.Zb(63,26,"modules.dashboard.profile.blocked")),p.yb(7),p.qc(" ",p.Zb(70,28,"common.logic."+!!e.user.blocked)," "),p.yb(7),p.pc(p.Zb(77,30,"modules.dashboard.profile.activated")),p.yb(7),p.qc(" ",p.Zb(84,32,"common.logic."+!!e.user.activated)," "),p.yb(2),p.dc("ngIf",!e.user.activated),p.yb(1),p.dc("appPermission",p.gc(36,P,e.constructor.name)))},directives:[b.q,b.T,b.R,b.g,b.D,b.n,b.p,b.J,b.m,j,b.A,b.t,b.z,b.Q,b.f,i.n],pipes:[M.c],styles:[""]}),t})()}];let z=(()=>{class t{}return t.\u0275mod=p.Gb({type:t}),t.\u0275inj=p.Fb({factory:function(e){return new(e||t)},imports:[[a.k.forChild(X)],a.k]}),t})();var G=o("FUS3");let S=(()=>{class t{}return t.\u0275mod=p.Gb({type:t}),t.\u0275inj=p.Fb({factory:function(e){return new(e||t)},imports:[[i.c,n.h,n.n,b.U,z,M.b.forChild({extend:!0}),G.a]]}),t})()}}]);