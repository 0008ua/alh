(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"M/w1":function(o,n,e){"use strict";e.r(n),e.d(n,"LoginFormPageModule",function(){return D});var t=e("ofXK"),i=e("3Pt+"),r=e("TEn/"),s=e("tyNb"),c=e("mYIz"),a=e("fXoL"),b=e("d6tv"),l=e("l7P3");const u=["loginFormDirective"];function m(o,n){if(1&o&&(a.Nb(0,"ion-text",15),a.mc(1),a.Yb(2,"json"),a.Mb()),2&o){const o=a.Xb();a.yb(1),a.oc(" ",a.Zb(2,1,o.loginForm.get("login").errors)," ")}}function p(o,n){if(1&o&&(a.Nb(0,"ion-text",15),a.mc(1),a.Yb(2,"json"),a.Mb()),2&o){const o=a.Xb();a.yb(1),a.oc(" ",a.Zb(2,1,o.loginForm.get("password").errors)," ")}}let g=(()=>{class o{constructor(o,n,e){this.userService=o,this.router=n,this.store=e,this.inputType="password"}ngOnInit(){this.loginForm=new i.e({login:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{2,60}$"),i.o.minLength(2),i.o.maxLength(60),i.o.required]}),password:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),i.o.minLength(8),i.o.maxLength(60),i.o.required]})})}switchInputType(){this.inputType="password"===this.inputType?"text":"password"}onLogin(){const o={login:this.loginForm.get("login").value,password:this.loginForm.get("password").value};this.store.dispatch(new c.g({user:o})),this.resetForm()}resetForm(){this.loginFormDirective&&this.loginFormDirective.resetForm()}}return o.\u0275fac=function(n){return new(n||o)(a.Ib(b.a),a.Ib(s.g),a.Ib(l.i))},o.\u0275cmp=a.Cb({type:o,selectors:[["app-login-form"]],viewQuery:function(o,n){var e;1&o&&a.qc(u,!0),2&o&&a.gc(e=a.Wb())&&(n.loginFormDirective=e.first)},decls:38,vars:6,consts:[[3,"formGroup"],["loginFormDirective","ngForm"],["size-md","6","offset-md","3"],["src","/assets/shapes.svg",1,"logo_login"],[1,"ion-text-center"],["button","","color","primary","routerLink","/user/login/signup"],["name","person-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","login"],["class","input-error","color","danger",4,"ngIf"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["expand","block",3,"disabled","click"],["color","danger",1,"input-error"]],template:function(o,n){1&o&&(a.Nb(0,"ion-header"),a.Nb(1,"ion-toolbar"),a.Nb(2,"ion-title"),a.mc(3,"Login"),a.Mb(),a.Mb(),a.Mb(),a.Nb(4,"ion-content"),a.Nb(5,"form",0,1),a.Nb(7,"ion-grid"),a.Nb(8,"ion-row"),a.Nb(9,"ion-col",2),a.Nb(10,"ion-card"),a.Nb(11,"ion-card-header"),a.Nb(12,"div"),a.Jb(13,"img",3),a.Mb(),a.Nb(14,"ion-card-title",4),a.mc(15,"Login"),a.Mb(),a.Nb(16,"ion-card-subtitle",4),a.Nb(17,"a",5),a.mc(18,"or Signup"),a.Mb(),a.Mb(),a.Mb(),a.Nb(19,"ion-card-content"),a.Nb(20,"ion-list"),a.Nb(21,"ion-item"),a.Jb(22,"ion-icon",6),a.Nb(23,"ion-label",7),a.mc(24,"Login"),a.Mb(),a.Jb(25,"ion-input",8),a.Mb(),a.lc(26,m,3,3,"ion-text",9),a.Nb(27,"ion-item",10),a.Jb(28,"ion-icon",11),a.Nb(29,"ion-label",7),a.mc(30,"Password"),a.Mb(),a.Jb(31,"ion-input",12),a.Nb(32,"ion-icon",13),a.Vb("click",function(){return n.switchInputType()}),a.Mb(),a.Mb(),a.lc(33,p,3,3,"ion-text",9),a.Mb(),a.Mb(),a.Mb(),a.Nb(34,"ion-row"),a.Nb(35,"ion-col"),a.Nb(36,"ion-button",14),a.Vb("click",function(){return n.onLogin()}),a.mc(37," Login "),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb()),2&o&&(a.yb(5),a.dc("formGroup",n.loginForm),a.yb(21),a.dc("ngIf",n.loginForm.get("login").touched&&n.loginForm.get("login").errors),a.yb(5),a.dc("type",n.inputType),a.yb(1),a.dc("name","password"===n.inputType?"eye-outline":"eye-off-outline"),a.yb(1),a.dc("ngIf",n.loginForm.get("password").touched&&n.loginForm.get("password").errors),a.yb(3),a.dc("disabled","INVALID"===n.loginForm.status))},directives:[r.q,r.T,r.R,r.n,i.p,i.l,i.f,r.p,r.J,r.m,r.h,r.j,r.l,r.k,s.j,r.bb,r.i,r.A,r.t,r.r,r.z,r.s,r.db,i.k,i.d,t.n,r.f,r.Q],pipes:[t.g],styles:[".logo_login[_ngcontent-%COMP%]{width:100%;margin:auto;display:block}"]}),o})();var d=e("XNiG"),f=e("vkgz"),h=e("eIep"),y=e("JX91"),N=e("pLZG"),w=e("IzEk");const M=["signupFormDirective"];function F(o,n){if(1&o&&(a.Nb(0,"ion-text",23),a.mc(1),a.Yb(2,"json"),a.Mb()),2&o){const o=a.Xb(2);a.yb(1),a.oc(" ",a.Zb(2,1,o.signupForm.get("companyName").errors)," ")}}function v(o,n){if(1&o&&(a.Nb(0,"ion-text",23),a.mc(1),a.Yb(2,"json"),a.Mb()),2&o){const o=a.Xb(2);a.yb(1),a.oc(" ",a.Zb(2,1,o.signupForm.get("login").errors)," ")}}function I(o,n){if(1&o&&(a.Nb(0,"ion-text",23),a.mc(1),a.Yb(2,"json"),a.Mb()),2&o){const o=a.Xb(2);a.yb(1),a.oc(" ",a.Zb(2,1,o.signupForm.get("email").errors)," ")}}function k(o,n){if(1&o&&(a.Nb(0,"ion-text",23),a.mc(1),a.Yb(2,"json"),a.Mb()),2&o){const o=a.Xb(2);a.yb(1),a.oc(" ",a.Zb(2,1,o.signupForm.get("password").errors)," ")}}function x(o,n){1&o&&a.Jb(0,"ion-icon",24),2&o&&a.dc("name","checkmark-done-outline")}function L(o,n){if(1&o&&(a.Nb(0,"ion-text",23),a.mc(1),a.Yb(2,"json"),a.Mb()),2&o){const o=a.Xb(2);a.yb(1),a.oc(" ",a.Zb(2,1,o.signupForm.get("passwordConfirm").errors)," ")}}function j(o,n){if(1&o){const o=a.Ob();a.Nb(0,"form",1,2),a.Nb(2,"ion-grid"),a.Nb(3,"ion-row"),a.Nb(4,"ion-col",3),a.Nb(5,"ion-card"),a.Nb(6,"ion-card-header"),a.Nb(7,"div"),a.Jb(8,"img",4),a.Mb(),a.Nb(9,"ion-card-title",5),a.mc(10,"Signup"),a.Mb(),a.Nb(11,"ion-card-subtitle",5),a.Nb(12,"a",6),a.mc(13,"or Login"),a.Mb(),a.Mb(),a.Mb(),a.Nb(14,"ion-card-content"),a.Nb(15,"ion-list"),a.Nb(16,"ion-item"),a.Jb(17,"ion-icon",7),a.Nb(18,"ion-label",8),a.mc(19,"Company name"),a.Mb(),a.Jb(20,"ion-input",9),a.Mb(),a.lc(21,F,3,3,"ion-text",10),a.Nb(22,"ion-item"),a.Jb(23,"ion-icon",11),a.Nb(24,"ion-label",8),a.mc(25,"Login"),a.Mb(),a.Jb(26,"ion-input",12),a.Mb(),a.lc(27,v,3,3,"ion-text",10),a.Nb(28,"ion-item"),a.Jb(29,"ion-icon",13),a.Nb(30,"ion-label",8),a.mc(31,"Email"),a.Mb(),a.Jb(32,"ion-input",14),a.Mb(),a.lc(33,I,3,3,"ion-text",10),a.Nb(34,"ion-item",15),a.Jb(35,"ion-icon",16),a.Nb(36,"ion-label",8),a.mc(37,"Password"),a.Mb(),a.Jb(38,"ion-input",17),a.Nb(39,"ion-icon",18),a.Vb("click",function(){return a.ic(o),a.Xb().switchInputType()}),a.Mb(),a.Mb(),a.lc(40,k,3,3,"ion-text",10),a.Nb(41,"ion-item",15),a.Jb(42,"ion-icon",19),a.Nb(43,"ion-label",8),a.mc(44,"Password Confirm"),a.Mb(),a.Jb(45,"ion-input",20),a.lc(46,x,1,1,"ion-icon",21),a.Mb(),a.lc(47,L,3,3,"ion-text",10),a.Mb(),a.Mb(),a.Mb(),a.Nb(48,"ion-row"),a.Nb(49,"ion-col"),a.Nb(50,"ion-button",22),a.Vb("click",function(){return a.ic(o),a.Xb().formSubmitSubject$.next()}),a.mc(51," Signup "),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb()}if(2&o){const o=a.Xb();a.dc("formGroup",o.signupForm),a.yb(21),a.dc("ngIf",o.signupForm.get("companyName").touched&&o.signupForm.get("companyName").errors&&!o.signupForm.get("companyName").errors.unique),a.yb(6),a.dc("ngIf",o.signupForm.get("login").touched&&o.signupForm.get("login").errors),a.yb(6),a.dc("ngIf",o.signupForm.get("email").touched&&o.signupForm.get("email").errors),a.yb(5),a.dc("type",o.inputType),a.yb(1),a.dc("name","password"===o.inputType?"eye-outline":"eye-off-outline"),a.yb(1),a.dc("ngIf",o.signupForm.get("password").touched&&o.signupForm.get("password").errors),a.yb(5),a.dc("type",o.inputType),a.yb(1),a.dc("ngIf","VALID"===o.signupForm.get("passwordConfirm").status),a.yb(1),a.dc("ngIf",o.signupForm.get("passwordConfirm").touched&&o.signupForm.get("passwordConfirm").errors),a.yb(3),a.dc("disabled","INVALID"===o.signupForm.status||"PENDING"===o.signupForm.status)}}let C=(()=>{class o{constructor(o,n){this.userService=o,this.router=n,this.inputType="password",this.formSubmitSubject$=new d.a}ngOnInit(){this.signupForm=new i.e({companyName:new i.c("",{updateOn:"blur",validators:[i.o.pattern("^[a-zA-Z0-9 _\\-]{2,60}$"),i.o.minLength(2),i.o.maxLength(60),i.o.required],asyncValidators:[this.userService.checkCompanyNameUnique()]}),login:new i.c("",{updateOn:"blur",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{2,60}$"),i.o.minLength(2),i.o.maxLength(60),i.o.required],asyncValidators:[this.userService.checkLoginUnique()]}),password:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),i.o.minLength(8),i.o.maxLength(60),i.o.required]}),passwordConfirm:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]{8,60}$"),i.o.minLength(8),i.o.maxLength(60),i.o.required]}),email:new i.c("",{updateOn:"blur",validators:[i.o.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"),i.o.required],asyncValidators:[this.userService.checkEmailUnique()]})},this.userService.matchPassword),this.formSubmitSubject$.pipe(Object(f.a)(()=>this.signupForm.markAsDirty()),Object(h.a)(()=>this.signupForm.statusChanges.pipe(Object(y.a)(this.signupForm.status),Object(N.a)(o=>"PENDING"!==o),Object(w.a)(1))),Object(N.a)(o=>"VALID"===o)).subscribe(o=>this.onSignup())}switchInputType(){this.inputType="password"===this.inputType?"text":"password"}onSignup(){this.userService.createCompany({companyName:this.signupForm.get("companyName").value,user:{login:this.signupForm.get("login").value,password:this.signupForm.get("password").value,email:this.signupForm.get("email").value}}).subscribe(o=>this.resetForm(),o=>console.log("signup Error",o.error))}resetForm(){this.signupFormDirective&&this.signupFormDirective.resetForm()}}return o.\u0275fac=function(n){return new(n||o)(a.Ib(b.a),a.Ib(s.g))},o.\u0275cmp=a.Cb({type:o,selectors:[["app-signup-form"]],viewQuery:function(o,n){var e;1&o&&a.qc(M,!0),2&o&&a.gc(e=a.Wb())&&(n.signupFormDirective=e.first)},decls:6,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["signupFormDirective","ngForm"],["size-md","6","offset-md","3"],["src","/assets/shapes.svg",1,"logo_login"],[1,"ion-text-center"],["button","","color","primary","routerLink","/user/login"],["name","podium-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","companyName"],["class","input-error","color","danger",4,"ngIf"],["name","person-outline","slot","start",1,"ion-align-self-center"],["type","text","autocomplete","","autocorrect","","formControlName","login"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["name","reorder-two-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","passwordConfirm",3,"type"],["class","ion-align-self-center","color","primary","slot","end",3,"name",4,"ngIf"],["expand","block",3,"disabled","click"],["color","danger",1,"input-error"],["color","primary","slot","end",1,"ion-align-self-center",3,"name"]],template:function(o,n){1&o&&(a.Nb(0,"ion-header"),a.Nb(1,"ion-toolbar"),a.Nb(2,"ion-title"),a.mc(3,"Signup"),a.Mb(),a.Mb(),a.Mb(),a.Nb(4,"ion-content"),a.lc(5,j,52,11,"form",0),a.Mb()),2&o&&(a.yb(5),a.dc("ngIf",n.signupForm))},directives:[r.q,r.T,r.R,r.n,t.n,i.p,i.l,i.f,r.p,r.J,r.m,r.h,r.j,r.l,r.k,s.j,r.bb,r.i,r.A,r.t,r.r,r.z,r.s,r.db,i.k,i.d,r.f,r.Q],pipes:[t.g],styles:[".logo_login[_ngcontent-%COMP%]{width:100%;margin:auto;display:block}"]}),o})();var J=e("lJxs");let S=(()=>{class o{constructor(o,n,e){this.userService=o,this.router=n,this.store=e}canActivate(o,n){return this.store.select("user").pipe(Object(J.a)(o=>!o.user||(this.router.navigateByUrl("/"),!1)))}}return o.\u0275fac=function(n){return new(n||o)(a.Rb(b.a),a.Rb(s.g),a.Rb(l.i))},o.\u0275prov=a.Eb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const O=[{path:"",component:g,canActivate:[S]},{path:"signup",component:C,canActivate:[S]},{path:"**",redirectTo:"",pathMatch:"full"}];let T=(()=>{class o{}return o.\u0275mod=a.Gb({type:o}),o.\u0275inj=a.Fb({factory:function(n){return new(n||o)},imports:[[s.k.forChild(O)],s.k]}),o})(),D=(()=>{class o{}return o.\u0275mod=a.Gb({type:o}),o.\u0275inj=a.Fb({factory:function(n){return new(n||o)},imports:[[t.c,i.n,r.U,T]]}),o})()}}]);