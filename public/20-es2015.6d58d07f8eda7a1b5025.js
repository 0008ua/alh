(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"M/w1":function(n,o,t){"use strict";t.r(o),t.d(o,"LoginFormPageModule",function(){return G});var e=t("ofXK"),i=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),c=t("mYIz"),a=t("fXoL"),b=t("d6tv"),l=t("l7P3"),u=t("sYmb"),m=t("1UXS");const p=["loginFormDirective"];function g(n,o){if(1&n&&(a.Nb(0,"ion-text",19),a.nc(1),a.Yb(2,"translate"),a.Mb()),2&n){const n=o.$implicit;a.yb(1),a.pc(" ",a.Zb(2,1,"errors."+n)," ")}}function d(n,o){if(1&n&&(a.Lb(0),a.mc(1,g,3,3,"ion-text",18),a.Yb(2,"errorExtractor"),a.Kb()),2&n){const n=a.Xb();a.yb(1),a.dc("ngForOf",a.Zb(2,1,n.loginForm.get("login").errors))}}function f(n,o){if(1&n&&(a.Nb(0,"ion-text",19),a.nc(1),a.Yb(2,"translate"),a.Mb()),2&n){const n=o.$implicit;a.yb(1),a.pc(" ",a.Zb(2,1,"errors."+n)," ")}}function y(n,o){if(1&n&&(a.Lb(0),a.mc(1,f,3,3,"ion-text",18),a.Yb(2,"errorExtractor"),a.Kb()),2&n){const n=a.Xb();a.yb(1),a.dc("ngForOf",a.Zb(2,1,n.loginForm.get("password").errors))}}let h=(()=>{class n{constructor(n,o,t,e){this.userService=n,this.router=o,this.store=t,this.translate=e,this.inputType="password"}ngOnInit(){this.lang=this.translate.currentLang,this.loginForm=new i.e({login:new i.c("",{updateOn:"change",validators:[i.o.required]}),password:new i.c("",{updateOn:"change",validators:[i.o.required]})})}switchInputType(){this.inputType="password"===this.inputType?"text":"password"}onLogin(){const n={login:this.loginForm.get("login").value,password:this.loginForm.get("password").value};this.store.dispatch(new c.j({user:n})),this.resetForm()}resetForm(){this.loginFormDirective&&this.loginFormDirective.resetForm()}switchLanguage(){this.lang="en"===this.lang?"uk":"en",this.translate.use(this.lang)}}return n.\u0275fac=function(o){return new(o||n)(a.Ib(b.a),a.Ib(s.g),a.Ib(l.i),a.Ib(u.d))},n.\u0275cmp=a.Cb({type:n,selectors:[["app-login-form"]],viewQuery:function(n,o){var t;1&n&&a.rc(p,!0),2&n&&a.hc(t=a.Wb())&&(o.loginFormDirective=t.first)},decls:53,vars:27,consts:[["slot","end"],["color","primary","button","","lines","none",3,"click"],["name","earth-outline","slot","start"],[3,"formGroup"],["loginFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["src","/assets/banner.svg",1,"logo_login"],["button","","color","primary","routerLink","/user/login/signup"],["name","person-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","login"],[4,"ngIf"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["expand","block",3,"disabled","click"],["class","input-error","color","danger",4,"ngFor","ngForOf"],["color","danger",1,"input-error"]],template:function(n,o){1&n&&(a.Nb(0,"ion-header"),a.Nb(1,"ion-toolbar"),a.Nb(2,"ion-title"),a.nc(3),a.Yb(4,"translate"),a.Mb(),a.Nb(5,"ion-buttons",0),a.Nb(6,"ion-item",1),a.Vb("click",function(){return o.switchLanguage()}),a.Jb(7,"ion-icon",2),a.Nb(8,"ion-label"),a.nc(9),a.Yb(10,"translate"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(11,"ion-content"),a.Nb(12,"form",3,4),a.Nb(14,"ion-grid"),a.Nb(15,"ion-row"),a.Nb(16,"ion-col",5),a.Nb(17,"div",6),a.Nb(18,"h1"),a.nc(19,"The Little Hotel"),a.Mb(),a.Mb(),a.Nb(20,"ion-card"),a.Nb(21,"ion-card-header"),a.Nb(22,"div"),a.Jb(23,"img",7),a.Mb(),a.Nb(24,"ion-card-title",6),a.nc(25),a.Yb(26,"translate"),a.Mb(),a.Nb(27,"ion-card-subtitle",6),a.Nb(28,"a",8),a.nc(29),a.Yb(30,"translate"),a.Mb(),a.Mb(),a.Mb(),a.Nb(31,"ion-card-content"),a.Nb(32,"ion-list"),a.Nb(33,"ion-item"),a.Jb(34,"ion-icon",9),a.Nb(35,"ion-label",10),a.nc(36),a.Yb(37,"translate"),a.Mb(),a.Jb(38,"ion-input",11),a.Mb(),a.mc(39,d,3,3,"ng-container",12),a.Nb(40,"ion-item",13),a.Jb(41,"ion-icon",14),a.Nb(42,"ion-label",10),a.nc(43),a.Yb(44,"translate"),a.Mb(),a.Jb(45,"ion-input",15),a.Nb(46,"ion-icon",16),a.Vb("click",function(){return o.switchInputType()}),a.Mb(),a.Mb(),a.mc(47,y,3,3,"ng-container",12),a.Mb(),a.Mb(),a.Mb(),a.Nb(48,"ion-row"),a.Nb(49,"ion-col"),a.Nb(50,"ion-button",17),a.Vb("click",function(){return o.onLogin()}),a.nc(51),a.Yb(52,"translate"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb()),2&n&&(a.yb(3),a.oc(a.Zb(4,13,"modules.user.signin")),a.yb(6),a.oc(a.Zb(10,15,"language")),a.yb(3),a.dc("formGroup",o.loginForm),a.yb(13),a.oc(a.Zb(26,17,"modules.user.signin")),a.yb(4),a.oc(a.Zb(30,19,"modules.user.orSignup")),a.yb(7),a.oc(a.Zb(37,21,"modules.user.login")),a.yb(3),a.dc("ngIf",o.loginForm.get("login").dirty&&o.loginForm.get("login").errors),a.yb(4),a.oc(a.Zb(44,23,"modules.user.password")),a.yb(2),a.dc("type",o.inputType),a.yb(1),a.dc("name","password"===o.inputType?"eye-outline":"eye-off-outline"),a.yb(1),a.dc("ngIf",o.loginForm.get("password").dirty&&o.loginForm.get("password").errors),a.yb(3),a.dc("disabled","INVALID"===o.loginForm.status),a.yb(1),a.pc(" ",a.Zb(52,25,"modules.user.signin")," "))},directives:[r.q,r.T,r.R,r.g,r.t,r.r,r.z,r.n,i.p,i.l,i.f,r.p,r.J,r.m,r.h,r.j,r.l,r.k,s.j,r.bb,r.i,r.A,r.s,r.db,i.k,i.d,e.n,r.f,e.m,r.Q],pipes:[u.c,m.a],styles:[".logo_login[_ngcontent-%COMP%]{width:100%;margin:auto;display:block}"]}),n})();var N=t("XNiG"),M=t("vkgz"),w=t("eIep"),F=t("JX91"),v=t("pLZG"),k=t("IzEk");const I=["signupFormDirective"];function x(n,o){if(1&n&&(a.Nb(0,"ion-text",27),a.nc(1),a.Yb(2,"translate"),a.Mb()),2&n){const n=o.$implicit;a.yb(1),a.pc(" ",a.Zb(2,1,"errors."+n)," ")}}function Z(n,o){if(1&n&&(a.Lb(0),a.mc(1,x,3,3,"ion-text",26),a.Yb(2,"errorExtractor"),a.Kb()),2&n){const n=a.Xb(2);a.yb(1),a.dc("ngForOf",a.Zb(2,1,n.signupForm.get("companyName").errors))}}function L(n,o){if(1&n&&(a.Nb(0,"ion-text",27),a.nc(1),a.Yb(2,"translate"),a.Mb()),2&n){const n=o.$implicit;a.yb(1),a.pc(" ",a.Zb(2,1,"errors."+n)," ")}}function Y(n,o){if(1&n&&(a.Lb(0),a.mc(1,L,3,3,"ion-text",26),a.Yb(2,"errorExtractor"),a.Kb()),2&n){const n=a.Xb(2);a.yb(1),a.dc("ngForOf",a.Zb(2,1,n.signupForm.get("login").errors))}}function O(n,o){if(1&n&&(a.Nb(0,"ion-text",27),a.nc(1),a.Yb(2,"translate"),a.Mb()),2&n){const n=o.$implicit;a.yb(1),a.pc(" ",a.Zb(2,1,"errors."+n)," ")}}function J(n,o){if(1&n&&(a.Lb(0),a.mc(1,O,3,3,"ion-text",26),a.Yb(2,"errorExtractor"),a.Kb()),2&n){const n=a.Xb(2);a.yb(1),a.dc("ngForOf",a.Zb(2,1,n.signupForm.get("email").errors))}}function C(n,o){if(1&n&&(a.Nb(0,"ion-text",27),a.nc(1),a.Yb(2,"translate"),a.Mb()),2&n){const n=o.$implicit;a.yb(1),a.pc(" ",a.Zb(2,1,"errors."+n)," ")}}function T(n,o){if(1&n&&(a.Lb(0),a.mc(1,C,3,3,"ion-text",26),a.Yb(2,"errorExtractor"),a.Kb()),2&n){const n=a.Xb(2);a.yb(1),a.dc("ngForOf",a.Zb(2,1,n.signupForm.get("password").errors))}}function j(n,o){1&n&&a.Jb(0,"ion-icon",28),2&n&&a.dc("name","checkmark-done-outline")}function S(n,o){if(1&n&&(a.Nb(0,"ion-text",27),a.nc(1),a.Yb(2,"translate"),a.Mb()),2&n){const n=o.$implicit;a.yb(1),a.pc(" ",a.Zb(2,1,"errors."+n)," ")}}function D(n,o){if(1&n&&(a.Lb(0),a.mc(1,S,3,3,"ion-text",26),a.Yb(2,"errorExtractor"),a.Kb()),2&n){const n=a.Xb(2);a.yb(1),a.dc("ngForOf",a.Zb(2,1,n.signupForm.get("passwordConfirm").errors))}}function X(n,o){if(1&n){const n=a.Ob();a.Nb(0,"form",4,5),a.Nb(2,"ion-grid"),a.Nb(3,"ion-row"),a.Nb(4,"ion-col",6),a.Nb(5,"div",7),a.Nb(6,"h1"),a.nc(7,"The Little Hotel"),a.Mb(),a.Mb(),a.Nb(8,"ion-card"),a.Nb(9,"ion-card-header"),a.Nb(10,"div"),a.Jb(11,"img",8),a.Mb(),a.Nb(12,"ion-card-title",7),a.nc(13),a.Yb(14,"translate"),a.Mb(),a.Nb(15,"ion-card-subtitle",7),a.Nb(16,"a",9),a.nc(17),a.Yb(18,"translate"),a.Mb(),a.Mb(),a.Mb(),a.Nb(19,"ion-card-content"),a.Nb(20,"ion-list"),a.Nb(21,"ion-item"),a.Jb(22,"ion-icon",10),a.Nb(23,"ion-label",11),a.nc(24),a.Yb(25,"translate"),a.Mb(),a.Jb(26,"ion-input",12),a.Mb(),a.mc(27,Z,3,3,"ng-container",13),a.Nb(28,"ion-item"),a.Jb(29,"ion-icon",14),a.Nb(30,"ion-label",11),a.nc(31),a.Yb(32,"translate"),a.Mb(),a.Jb(33,"ion-input",15),a.Mb(),a.mc(34,Y,3,3,"ng-container",13),a.Nb(35,"ion-item"),a.Jb(36,"ion-icon",16),a.Nb(37,"ion-label",11),a.nc(38),a.Yb(39,"translate"),a.Mb(),a.Jb(40,"ion-input",17),a.Mb(),a.mc(41,J,3,3,"ng-container",13),a.Nb(42,"ion-item",18),a.Jb(43,"ion-icon",19),a.Nb(44,"ion-label",11),a.nc(45),a.Yb(46,"translate"),a.Mb(),a.Jb(47,"ion-input",20),a.Nb(48,"ion-icon",21),a.Vb("click",function(){return a.jc(n),a.Xb().switchInputType()}),a.Mb(),a.Mb(),a.mc(49,T,3,3,"ng-container",13),a.Nb(50,"ion-item",18),a.Jb(51,"ion-icon",22),a.Nb(52,"ion-label",11),a.nc(53),a.Yb(54,"translate"),a.Mb(),a.Jb(55,"ion-input",23),a.mc(56,j,1,1,"ion-icon",24),a.Mb(),a.mc(57,D,3,3,"ng-container",13),a.Mb(),a.Mb(),a.Mb(),a.Nb(58,"ion-row"),a.Nb(59,"ion-col"),a.Nb(60,"ion-button",25),a.Vb("click",function(){return a.jc(n),a.Xb().formSubmitSubject$.next()}),a.nc(61),a.Yb(62,"translate"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb()}if(2&n){const n=a.Xb();a.dc("formGroup",n.signupForm),a.yb(13),a.oc(a.Zb(14,19,"modules.user.signup")),a.yb(4),a.oc(a.Zb(18,21,"modules.user.orSignin")),a.yb(7),a.oc(a.Zb(25,23,"modules.user.companyName")),a.yb(3),a.dc("ngIf",n.signupForm.get("companyName").dirty&&n.signupForm.get("companyName").errors),a.yb(4),a.oc(a.Zb(32,25,"modules.user.login")),a.yb(3),a.dc("ngIf",n.signupForm.get("login").dirty&&n.signupForm.get("login").errors),a.yb(4),a.oc(a.Zb(39,27,"modules.user.email")),a.yb(3),a.dc("ngIf",n.signupForm.get("email").dirty&&n.signupForm.get("email").errors),a.yb(4),a.oc(a.Zb(46,29,"modules.user.password")),a.yb(2),a.dc("type",n.inputType),a.yb(1),a.dc("name","password"===n.inputType?"eye-outline":"eye-off-outline"),a.yb(1),a.dc("ngIf",n.signupForm.get("password").dirty&&n.signupForm.get("password").errors),a.yb(4),a.oc(a.Zb(54,31,"modules.user.confirmPassword")),a.yb(2),a.dc("type",n.inputType),a.yb(1),a.dc("ngIf",n.signupForm.get("passwordConfirm").dirty&&"VALID"===n.signupForm.get("passwordConfirm").status),a.yb(1),a.dc("ngIf",n.signupForm.get("passwordConfirm").dirty&&n.signupForm.get("passwordConfirm").errors),a.yb(3),a.dc("disabled","INVALID"===n.signupForm.status||"PENDING"===n.signupForm.status),a.yb(1),a.pc(" ",a.Zb(62,33,"modules.user.signup")," ")}}let $=(()=>{class n{constructor(n,o,t){this.userService=n,this.router=o,this.translate=t,this.inputType="password",this.formSubmitSubject$=new N.a}ngOnInit(){this.lang=this.translate.currentLang,this.signupForm=new i.e({companyName:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9 _\\-]+$"),i.o.minLength(2),i.o.maxLength(60),i.o.required],asyncValidators:[this.userService.checkCompanyNameUnique()]}),login:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]+$"),i.o.minLength(2),i.o.maxLength(60),i.o.required],asyncValidators:[this.userService.checkLoginUnique()]}),password:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]+$"),i.o.minLength(8),i.o.maxLength(60),i.o.required]}),passwordConfirm:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-zA-Z0-9_\\-]+$"),i.o.minLength(8),i.o.maxLength(60),i.o.required]}),email:new i.c("",{updateOn:"change",validators:[i.o.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"),i.o.required],asyncValidators:[this.userService.checkEmailUnique()]})},this.userService.matchPassword),this.formSubmitSubject$.pipe(Object(M.a)(()=>this.signupForm.markAsDirty()),Object(w.a)(()=>this.signupForm.statusChanges.pipe(Object(F.a)(this.signupForm.status),Object(v.a)(n=>"PENDING"!==n),Object(k.a)(1))),Object(v.a)(n=>"VALID"===n)).subscribe(n=>this.onSignup())}switchInputType(){this.inputType="password"===this.inputType?"text":"password"}onSignup(){this.userService.createCompany({companyName:this.signupForm.get("companyName").value,user:{login:this.signupForm.get("login").value,password:this.signupForm.get("password").value,email:this.signupForm.get("email").value}}).subscribe(n=>this.resetForm(),n=>console.log("signup Error",n.error))}resetForm(){this.signupFormDirective&&this.signupFormDirective.resetForm()}switchLanguage(){this.lang="en"===this.lang?"uk":"en",this.translate.use(this.lang)}}return n.\u0275fac=function(o){return new(o||n)(a.Ib(b.a),a.Ib(s.g),a.Ib(u.d))},n.\u0275cmp=a.Cb({type:n,selectors:[["app-signup-form"]],viewQuery:function(n,o){var t;1&n&&a.rc(I,!0),2&n&&a.hc(t=a.Wb())&&(o.signupFormDirective=t.first)},decls:13,vars:7,consts:[["slot","end"],["color","primary","button","","lines","none",3,"click"],["name","earth-outline","slot","start"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["signupFormDirective","ngForm"],["size-md","6","offset-md","3"],[1,"ion-text-center"],["src","/assets/banner.svg",1,"logo_login"],["button","","color","primary","routerLink","/user/login"],["name","podium-outline","slot","start",1,"ion-align-self-center"],["position","floating"],["type","text","autocomplete","","autocorrect","","formControlName","companyName"],[4,"ngIf"],["name","person-outline","slot","start",1,"ion-align-self-center"],["type","text","autocomplete","","autocorrect","","formControlName","login"],["name","mail-outline","slot","start",1,"ion-align-self-center"],["type","email","autocomplete","","autocorrect","","formControlName","email"],["lines","none"],["name","lock-closed-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","password",3,"type"],["slot","end",1,"ion-align-self-center",3,"name","click"],["name","reorder-two-outline","slot","start",1,"ion-align-self-center"],["autocomplete","","autocorrect","","formControlName","passwordConfirm",3,"type"],["class","ion-align-self-center","color","success","slot","end",3,"name",4,"ngIf"],["expand","block",3,"disabled","click"],["class","input-error","color","danger",4,"ngFor","ngForOf"],["color","danger",1,"input-error"],["color","success","slot","end",1,"ion-align-self-center",3,"name"]],template:function(n,o){1&n&&(a.Nb(0,"ion-header"),a.Nb(1,"ion-toolbar"),a.Nb(2,"ion-title"),a.nc(3),a.Yb(4,"translate"),a.Mb(),a.Nb(5,"ion-buttons",0),a.Nb(6,"ion-item",1),a.Vb("click",function(){return o.switchLanguage()}),a.Jb(7,"ion-icon",2),a.Nb(8,"ion-label"),a.nc(9),a.Yb(10,"translate"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(11,"ion-content"),a.mc(12,X,63,35,"form",3),a.Mb()),2&n&&(a.yb(3),a.oc(a.Zb(4,3,"modules.user.signup")),a.yb(6),a.oc(a.Zb(10,5,"language")),a.yb(3),a.dc("ngIf",o.signupForm))},directives:[r.q,r.T,r.R,r.g,r.t,r.r,r.z,r.n,e.n,i.p,i.l,i.f,r.p,r.J,r.m,r.h,r.j,r.l,r.k,s.j,r.bb,r.i,r.A,r.s,r.db,i.k,i.d,r.f,e.m,r.Q],pipes:[u.c,m.a],styles:[".logo_login[_ngcontent-%COMP%]{width:100%;margin:auto;display:block}"]}),n})();var z=t("lJxs");let A=(()=>{class n{constructor(n,o,t){this.userService=n,this.router=o,this.store=t}canActivate(n,o){return this.store.select("user").pipe(Object(z.a)(n=>!n.user||(this.router.navigateByUrl("/"),!1)))}}return n.\u0275fac=function(o){return new(o||n)(a.Rb(b.a),a.Rb(s.g),a.Rb(l.i))},n.\u0275prov=a.Eb({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const E=[{path:"",component:h,canActivate:[A]},{path:"signup",component:$,canActivate:[A]},{path:"**",redirectTo:"",pathMatch:"full"}];let V=(()=>{class n{}return n.\u0275mod=a.Gb({type:n}),n.\u0275inj=a.Fb({factory:function(o){return new(o||n)},imports:[[s.k.forChild(E)],s.k]}),n})();var q=t("iTUp");let G=(()=>{class n{}return n.\u0275mod=a.Gb({type:n}),n.\u0275inj=a.Fb({factory:function(o){return new(o||n)},imports:[[e.c,i.n,r.U,V,u.b.forChild({extend:!0}),q.a]]}),n})()}}]);